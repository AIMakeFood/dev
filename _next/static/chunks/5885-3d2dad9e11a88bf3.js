"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5885],{15885:(e,t,a)=>{a.r(t),a.d(t,{api:()=>y,default:()=>g,getSupabase:()=>l,setDemoState:()=>c});var n=a(99631),i=a(43987),s=a(55036);let o=!1,r=[];function c(e,t){o=e,r=t}let u=null,l=()=>{if(u)return u;let e="https://zdevzvayrwnkcstfevrq.supabase.co",t="sb_publishable_ZWVSEfRBOB1IrgHoqe-ZRw_BC07NJX3";if(!e||!t)throw Error("Missing Supabase environment variables");return u=(0,n.UU)(e,t,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}})},d=async(e,t,a=0)=>{let n=l();try{let{data:{session:i},error:s}=await n.auth.getSession();if(s)throw console.error("[API] Failed to get session:",s),Error("Failed to retrieve authentication session");if(!i?.access_token)throw console.warn("[API] No active session found. API call blocked."),Error("No active session. Please log in.");let{data:o,error:r}=await n.functions.invoke(e,{body:t||{}});if(r){let i=r.context,s=i?.status||500,o=r.message||`Failed to call ${e}`;try{let e=i?.body;if(e){let t=JSON.parse(e);t.message&&(o=t.message)}}catch{}if(401===s&&a<1){console.warn(`[API] 401 from ${e}, refreshing and retrying...`);try{let{data:i,error:s}=await n.auth.refreshSession();if(s)throw console.error("[API] Refresh failed:",s),Error(`REFRESH_FAILED: ${s.message}`);if(!i?.session?.access_token)throw Error("REFRESH_NO_TOKEN");return console.log(`[API] Session refreshed, retrying ${e}...`),await d(e,t,a+1)}catch(e){console.error("[API] Failed to refresh for retry:",e)}}401===s&&(o="Your session has expired. Please log in again.");let c=Error(o);throw c.statusCode=s,c}return o}catch(t){if(t instanceof Error&&t.message.includes("No active session"))throw Error(`Cannot call ${e}: ${t.message}`);throw t}},y={signUp:async(e,t,a)=>l().auth.signUp({email:e,password:t,options:{data:{display_name:a}}}),signIn:async(e,t)=>l().auth.signInWithPassword({email:e,password:t}),signOut:async()=>l().auth.signOut(),getSession:async()=>l().auth.getSession(),getUser:async()=>l().auth.getUser(),onAuthStateChange:e=>l().auth.onAuthStateChange(e),getProfile:async()=>{try{return await d("user",{action:"get"})||null}catch{return null}},updatePreferences:async e=>d("user",{action:"update-preferences",...e}),validateGeminiKey:async e=>{try{return await d("user",{action:"validate-gemini-key",api_key:e})}catch(e){return{valid:!1,error:"Validation failed"}}},updateGeminiAPIKey:async e=>{await d("user",{action:"update-gemini-key",...e})},scanIngredients:async(e,t="gemini-3-flash-preview",a="video",n="pantry",s=[],c)=>o?(await (0,i.Qi)(1200,2e3),(0,i.EB)(r)):d("ingredients",{action:"scan",inputBase64:e,inputModel:t,inputType:a,scanType:n,categories:s,customPrompt:c}),getIngredients:async()=>o?(await (0,i.Qi)(300,600),(0,i.cR)(r)):(await d("ingredients",{action:"get"})).ingredients||[],saveIngredients:async e=>o?(await (0,i.Qi)(500,800),(0,i.cR)(e.map(e=>e.name))):(await d("ingredients",{action:"save",ingredients:e})).ingredients||[],deleteIngredient:async e=>{await d("ingredients",{action:"delete",ingredient_id:e})},getScanHistory:async e=>d("scan-history",{action:"list",...e}),deleteScan:async e=>{await d("scan-history",{action:"delete",scan_id:e})},rescanFromHistory:async e=>d("scan-history",{action:"rescan",scan_id:e}),getRecipes:async e=>o?(await (0,i.Qi)(800,1500),i.MW):(await d("recipes",{action:"suggest",ingredient_ids:e})).recipes||[],getRecipeById:async e=>{if(o)return await (0,i.Qi)(300,500),i.MW.find(t=>t.id===e)||i.MW[0];try{return(await d("recipes",{action:"get",recipe_id:e})).recipe||null}catch{return null}},createRecipe:async e=>(await d("recipes",{action:"create",...e})).recipe,browseRecipes:async e=>d("recipes",{action:"browse",...e}),startCooking:async e=>o?(await (0,i.Qi)(500,1e3),(0,i.K2)(e)):(await d("cooking",{action:"start",recipe_id:e})).session,startCookingFromIngredients:async e=>o?(await (0,i.Qi)(500,1e3),(0,i.K2)("demo-recipe-from-ingredients")):(await d("cooking",{action:"start-from-ingredients",ingredients:e.map(e=>({name:e.name,quantity:e.quantity,unit:e.unit,category:e.category}))})).session,getCookingSession:async e=>{try{return(await d("cooking",{action:"get",session_id:e})).session||null}catch{return null}},updateSession:async(e,t)=>(await d("cooking",{action:"update",session_id:e,updates:t})).session,regenerateRecipeSteps:async(e,t)=>(await d("cooking",{action:"regenerate-steps",session_id:e,ingredients:t.map(e=>({name:e.name,quantity:e.quantity,unit:e.unit}))})).recipe,analyzeFrame:async(e,t="cooking",a={})=>o?(await (0,i.Qi)(800,1200),{analysis:(0,i.hB)()}):d("analyze",{action:"frame",image:e,mode:t,...a}),saveMeal:async(e,t,a)=>d("cooking",{action:"save",session_id:e,rating:t,feedback:a}),getMealHistory:async()=>(await d("cooking",{action:"history"})).history||[],getSubstitutions:async(e,t,a)=>d("get-substitutions",{ingredient:e,recipe_context:t,dietary_restrictions:a}),analyzeDish:async(e,t,a,n={})=>d("analyze",{action:"dish",image:e,inputType:t,...n}),getSubscription:async()=>d("subscription",{action:"get"}),createCheckoutSession:async e=>d("subscription",{action:"create-checkout",price_id:e}),createPortalSession:async()=>d("subscription",{action:"create-portal"}),resetPassword:async e=>{let t=`${window.location.origin}/reset-password`,{error:a}=await l().auth.resetPasswordForEmail(e,{redirectTo:t});return{error:a}},updatePassword:async e=>{let{error:t}=await l().auth.updateUser({password:e});return{error:t}},signInWithMagicLink:async e=>{let t=`${window.location.origin}/auth-callback`,{error:a}=await l().auth.signInWithOtp({email:e,options:{emailRedirectTo:t}});return{error:a}},resendVerification:async e=>{let{error:t}=await l().auth.resend({type:"signup",email:e});return{error:t}},verifyDevAuth:async(e,t)=>{let a=s.env.NEXT_PUBLIC_DEV_AUTH_USERS;if(a)try{if(JSON.parse(atob(a)).some(a=>a.username===e&&a.password===t))return!0}catch{}try{let a=await fetch("https://zdevzvayrwnkcstfevrq.supabase.co/functions/v1/auth",{method:"POST",headers:{"Content-Type":"application/json",apikey:"sb_publishable_ZWVSEfRBOB1IrgHoqe-ZRw_BC07NJX3"},body:JSON.stringify({action:"verify-dev",username:e,password:t})});if(!a.ok)return!1;let n=await a.json();return!0===n.valid}catch{return!1}},getAAL:async()=>l().auth.mfa.getAuthenticatorAssuranceLevel(),getMFAFactors:async()=>l().auth.mfa.listFactors(),enrollMFA:async(e="Authenticator App")=>l().auth.mfa.enroll({factorType:"totp",friendlyName:e}),challengeMFA:async e=>l().auth.mfa.challenge({factorId:e}),verifyMFA:async(e,t,a)=>l().auth.mfa.verify({factorId:e,challengeId:t,code:a}),unenrollMFA:async e=>l().auth.mfa.unenroll({factorId:e}),generateRecoveryCodes:async()=>(await d("auth",{action:"generate-recovery-codes"})).codes||[],getRecoveryStatus:async()=>d("auth",{action:"recovery-status"}),getRecoveryCodesCount:async()=>(await d("auth",{action:"recovery-status"})).unused_codes||0,verifyRecoveryCode:async(e,t)=>(await d("auth",{action:"verify-recovery",code:e,email:t})).success||!1,sendEmailOTP:async e=>{try{return await d("auth",{action:"send-email-otp",purpose:e})}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to send verification code"}}},verifyEmailOTP:async(e,t)=>{try{return await d("auth",{action:"verify-email-otp",code:e,purpose:t})}catch(e){return{valid:!1,error:e instanceof Error?e.message:"Failed to verify code"}}},getMFAMethod:async()=>{try{let e=await y.getProfile();return{method:e?.mfa_method||null,setupCompleted:e?.mfa_setup_completed||!1}}catch{return{method:null,setupCompleted:!1}}},setMFAMethod:async e=>{try{return await y.updatePreferences({mfa_method:e,mfa_setup_completed:!0}),{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to update MFA method"}}},verifyMFAForAction:async(e,t,a,n)=>{try{return await d("auth",{action:"verify-mfa-action",mfa_action:e,code:t,factorId:a,challengeId:n})}catch(e){return{valid:!1,error:e instanceof Error?e.message:"Failed to verify MFA"}}},createCheckoutSessionWithMFA:async(e,t)=>d("subscription",{action:"create-checkout",price_id:e,mfaToken:t}),createPortalSessionWithMFA:async e=>d("subscription",{action:"create-portal",mfaToken:e}),createCryptoCheckout:async(e,t,a)=>d("subscription",{action:"create-crypto-checkout",tier:e,billing:t,mfaToken:a}),updateEmail:async e=>{let t=`${window.location.origin}/auth-callback`,{error:a}=await l().auth.updateUser({email:e},{emailRedirectTo:t});return{error:a}},getReferralCode:async()=>d("referral",{action:"get-code"}),getReferralStats:async()=>d("referral",{action:"stats"}),applyReferralCode:async e=>{try{return await d("referral",{action:"apply",code:e})}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to apply referral code"}}},getAntiPhishingCode:async()=>{try{return await d("auth",{action:"get-anti-phishing"})}catch{return{code:null,enabled:!1}}},updateAntiPhishingCode:async(e,t)=>{try{return await d("auth",{action:"update-anti-phishing",code:e,enabled:t})}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to update anti-phishing code"}}},checkExpiringIngredients:async()=>d("zero-waste-check"),generateWeeklyPlan:async e=>d("generate-weekly-plan",e||{}),getShoppingLists:async()=>(await d("shopping",{action:"get-lists"})).lists||[],createShoppingList:async(e,t)=>(await d("shopping",{action:"create-list",name:e,is_default:t})).list,updateShoppingList:async(e,t)=>(await d("shopping",{action:"update-list",list_id:e,...t})).list,deleteShoppingList:async e=>{await d("shopping",{action:"delete-list",list_id:e})},getShoppingList:async e=>{let t=await d("shopping",e?{action:"get-list",list_id:e}:{action:"get-list"});return{items:t.items||[],list_id:t.list_id}},addShoppingItem:async e=>(await d("shopping",{action:"add-item",...e})).item,updateShoppingItem:async(e,t)=>{await d("shopping",{action:"update-item",id:e,...t})},deleteShoppingItem:async e=>{await d("shopping",{action:"delete-item",id:e})},clearShoppingList:async(e,t)=>{await d("shopping",{action:"clear",checked_only:e,list_id:t})},moveShoppingItem:async(e,t)=>(await d("shopping",{action:"move-item",item_id:e,target_list_id:t})).item,createPost:async e=>d("community",{action:"post-create",...e}),updatePost:async(e,t)=>d("community",{action:"post-update",post_id:e,...t}),deletePost:async e=>d("community",{action:"post-delete",post_id:e}),getCommunityFeed:async(e="trending",t)=>d("community",{action:"post-feed",filter:e,...t}),shareMeal:async e=>{try{let t=await d("community",{action:"post-create",image_url:e.image,caption:e.caption,recipe_id:e.recipe_id,recipe_title:e.recipe_title});return{success:!0,post_id:t.post.id}}catch{return{success:!1}}},likePost:async e=>d("community",{action:"post-like",post_id:e}),unlikePost:async e=>d("community",{action:"post-unlike",post_id:e}),addComment:async(e,t)=>d("community",{action:"comment-add",post_id:e,content:t}),updateComment:async(e,t)=>d("community",{action:"comment-update",comment_id:e,content:t}),deleteComment:async e=>d("community",{action:"comment-delete",comment_id:e}),commentOnPost:async(e,t)=>{try{let a=await d("community",{action:"comment-add",post_id:e,content:t});return{success:!0,comment_id:a.comment.id}}catch{return{success:!1}}},followUser:async e=>d("community",{action:"follow",user_id:e}),unfollowUser:async e=>d("community",{action:"unfollow",user_id:e}),getFollowers:async(e,t,a)=>d("community",{action:"get-followers",user_id:e,page:t,limit:a}),getFollowing:async(e,t,a)=>d("community",{action:"get-following",user_id:e,page:t,limit:a}),getNotifications:async e=>d("notifications",{action:"get",...e}),markNotificationRead:async(e,t)=>d("notifications",{action:"mark-read",notification_id:e,mark_all:t}),updateNotificationSetting:async(e,t,a,n)=>d("notifications",{action:"update-settings",category:e,channel:t,setting:a,value:n}),searchCommunity:async(e,t)=>d("community",{action:"post-search",query:e,...t}),subscribeNewsletter:async e=>{if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return{success:!1,message:"Please enter a valid email address"};{let t=localStorage.getItem("newsletter_subscribers"),a=t?JSON.parse(t):[];a.includes(e)||(a.push(e),localStorage.setItem("newsletter_subscribers",JSON.stringify(a)))}return{success:!0,message:"Successfully subscribed to the newsletter!"}},createTicket:async e=>d("support-tickets",{action:"create",...e}),getTickets:async e=>d("support-tickets",{action:"list",status:e?.status,category:e?.category,assigned_to:e?.assigned_to,limit:e?.limit,offset:e?.offset}),getTicket:async e=>{let t=await d("support-tickets",{action:"get",ticket_id:e});return{...t.ticket,messages:t.messages,escalations:t.escalations}},updateTicket:async e=>d("support-tickets",{action:"update",...e}),escalateTicket:async e=>d("support-tickets",{action:"escalate",...e}),addTicketMessage:async e=>d("support-tickets",{action:"add-message",...e}),updateReferralCode:async e=>d("referral",{action:"update-code",code:e}),validateContent:async(e,t)=>d("moderation",{action:"validate",text:e,context:t}),validateContentFields:async(e,t)=>d("moderation",{action:"validate",fields:e,context:t}),getFilteredWords:async e=>d("admin",{action:"list-words",...e}),createFilteredWord:async e=>d("admin",{action:"create-word",...e}),updateFilteredWord:async e=>d("admin",{action:"update-word",...e}),deleteFilteredWord:async e=>d("admin",{action:"delete-word",id:e}),getPromptTemplates:async(e,t)=>(await d("prompts",{action:"get-templates",scan_type:e,category:t})).templates||[],getFavoritePrompts:async()=>(await d("prompts",{action:"get-favorites"})).prompts||[],saveFavoritePrompt:async e=>(await d("prompts",{action:"save",...e})).prompt,updateFavoritePrompt:async(e,t)=>(await d("prompts",{action:"update",id:e,...t})).prompt,deleteFavoritePrompt:async e=>d("prompts",{action:"delete",id:e}),analyzeSafetyFrame:async(e,t,a,n="video")=>o?(await (0,i.Qi)(800,1200),(0,i.eq)()):d("analyze",{action:"safety",frame:e,inputType:n,settings:t,cooking_active:a}),generateGuidance:async(e,t,a)=>o?(await (0,i.Qi)(400,800),(0,i.mL)(e,t,a)):d("generate-guidance",{persona_id:e,context:t,guidance_type:a}),logSafetyEvent:async e=>o?{success:!0,event_id:`demo-event-${Date.now()}`}:d("safety-monitoring",{action:"log",...e}),getSafetyEvents:async e=>o?(await (0,i.Qi)(200,400),{events:[],has_more:!1,next_cursor:null,total:0}):d("safety-monitoring",{action:"get",...e}),acknowledgeSafetyEvent:async e=>d("safety-monitoring",{action:"acknowledge",event_id:e}),clearSafetyEvent:async e=>d("safety-monitoring",{action:"clear",event_id:e}),clearSafetyEvents:async e=>d("safety-monitoring",{action:"clear",severity_filter:e}),getSafetyAnalytics:async e=>d("safety-monitoring",{action:"analytics",period:e}),sendHelpBotMessage:async(e,t)=>d("helpbot-chat",{message:e,history:t||[]}),getUsage:async()=>d("usage-tracking",{action:"get"}),getUsageAnalytics:async(e="7days")=>d("usage-tracking",{action:"analytics",period:e}),createFamilyGroup:async e=>d("family-groups",{action:"create",name:e}),getFamilyGroup:async()=>d("family-groups",{action:"get"}),updateFamilyGroup:async(e,t)=>d("family-groups",{action:"update",group_id:e,...t}),deleteFamilyGroup:async(e,t)=>d("family-groups",{action:"delete",group_id:e,confirm:t}),inviteFamilyMember:async(e,t,a)=>d("family-groups",{action:"invite",group_id:e,role:t,email:a}),acceptFamilyInvite:async e=>d("family-groups",{action:"accept-invite",token:e}),removeFamilyMember:async(e,t)=>d("family-groups",{action:"remove-member",group_id:e,user_id:t}),leaveFamilyGroup:async(e,t)=>d("family-groups",{action:"leave",group_id:e,confirm:t}),updateMemberRole:async(e,t,a)=>d("family-groups",{action:"update-role",group_id:e,user_id:t,new_role:a}),getGroupPermissions:async e=>d("family-groups",{action:"get-permissions",group_id:e}),updateGroupPermissions:async(e,t)=>d("family-groups",{action:"update-permissions",group_id:e,permissions:t}),getTrendingRecipes:async e=>d("recipes",{action:"trending",...e}),getIngredientNutrition:async e=>d("ingredients",{action:"nutrition",ingredient_name:e}),getIngredientShelfLife:async(e,t)=>d("ingredients",{action:"shelf-life",ingredient_name:e,storage_type:t}),syncExternalRecipes:async e=>d("recipes",{action:"sync-external",...e})},g=y},43987:(e,t,a)=>{a.d(t,{EB:()=>c,J_:()=>o,K2:()=>d,MW:()=>l,Qi:()=>r,cR:()=>u,eq:()=>p,hB:()=>_,mL:()=>f});var n=a(55036);let i=["eggs","peanut butter","bread","canned beans"],s={eggs:{quantity:12,unit:"pcs",category:"protein"},"peanut butter":{quantity:1,unit:"jar",category:"other"},bread:{quantity:1,unit:"loaf",category:"grain"},"canned beans":{quantity:2,unit:"cans",category:"protein"},chicken:{quantity:500,unit:"g",category:"protein"},rice:{quantity:2,unit:"cups",category:"grain"},broccoli:{quantity:1,unit:"head",category:"vegetable"},"soy sauce":{quantity:1,unit:"bottle",category:"spice"},tomatoes:{quantity:4,unit:"pcs",category:"vegetable"},cheese:{quantity:200,unit:"g",category:"dairy"},milk:{quantity:1,unit:"L",category:"dairy"},butter:{quantity:1,unit:"stick",category:"dairy"},onion:{quantity:2,unit:"pcs",category:"vegetable"},garlic:{quantity:1,unit:"head",category:"spice"},pasta:{quantity:500,unit:"g",category:"grain"},"olive oil":{quantity:1,unit:"bottle",category:"other"}};function o(){let e=n.env.NEXT_PUBLIC_DEMO_INGREDIENTS;return e&&e.trim().length>0?e.split(",").map(e=>e.trim()).filter(Boolean):i}function r(e=1e3,t=2e3){let a=e+Math.random()*(t-e);return new Promise(e=>setTimeout(e,a))}function c(e){return{ingredients:e.map(e=>{let t=s[e.toLowerCase()]||{quantity:1,unit:"pcs",category:"other"};return{name:e,quantity:t.quantity,unit:t.unit,category:t.category,freshness:"fresh",confidence:.95+.04*Math.random()}})}}function u(e){return e.map((e,t)=>{let a=s[e.toLowerCase()]||{quantity:1,unit:"pcs",category:"other"};return{id:`demo-ing-${t}-${Date.now()}`,user_id:"demo-user",name:e,category:a.category,quantity:a.quantity,unit:a.unit,confidence:.97,freshness:"fresh",scanned_at:new Date().toISOString()}})}let l=[{id:"demo-recipe-1",title:"Classic French Toast",description:"Golden, crispy French toast with a fluffy interior. A beloved breakfast classic made with simple pantry ingredients.",cuisine:"French",difficulty:"easy",cook_time_minutes:15,servings:2,ingredients:[{name:"Bread",quantity:"4",unit:"slices"},{name:"Eggs",quantity:"2",unit:"large"},{name:"Milk",quantity:"1/4",unit:"cup"},{name:"Cinnamon",quantity:"1/2",unit:"tsp"},{name:"Butter",quantity:"1",unit:"tbsp"}],steps:[{step_number:1,instruction:"Crack eggs into a shallow bowl and whisk with milk and cinnamon until smooth.",duration_minutes:2},{step_number:2,instruction:"Heat a non-stick pan over medium heat and melt butter.",duration_minutes:1},{step_number:3,instruction:"Dip each bread slice into the egg mixture, coating both sides evenly.",duration_minutes:2},{step_number:4,instruction:"Cook each slice for 2-3 minutes per side until golden brown and cooked through.",duration_minutes:6,tips:"Don't move the bread too much while cooking for the best golden crust."},{step_number:5,instruction:"Serve immediately with your favorite toppings like maple syrup, fresh berries, or powdered sugar.",duration_minutes:1}],tags:["breakfast","quick","easy","classic"],is_system:!0,match_score:.92,nutrition:{calories:320,fat_g:12,carbs_g:38,protein_g:14}},{id:"demo-recipe-2",title:"Peanut Butter & Bean Power Bowl",description:"A protein-packed power bowl combining creamy peanut butter with hearty beans. Satisfying, nutritious, and surprisingly delicious.",cuisine:"American",difficulty:"easy",cook_time_minutes:10,servings:2,ingredients:[{name:"Canned Beans",quantity:"1",unit:"can"},{name:"Peanut Butter",quantity:"2",unit:"tbsp"},{name:"Bread",quantity:"2",unit:"slices"},{name:"Honey",quantity:"1",unit:"tbsp"},{name:"Soy Sauce",quantity:"1",unit:"tsp"}],steps:[{step_number:1,instruction:"Drain and rinse the canned beans. Heat them in a small pot over medium heat.",duration_minutes:3},{step_number:2,instruction:"Stir in peanut butter, honey, and soy sauce until the beans are coated in a creamy sauce.",duration_minutes:2,tips:"Add a splash of water if the mixture is too thick."},{step_number:3,instruction:"Toast the bread slices until golden brown.",duration_minutes:2},{step_number:4,instruction:"Spoon the peanut butter bean mixture over the toasted bread and serve.",duration_minutes:1}],tags:["protein","quick","easy","lunch"],is_system:!0,match_score:.88,nutrition:{calories:410,fat_g:16,carbs_g:48,protein_g:22}},{id:"demo-recipe-3",title:"Egg & Bean Breakfast Wrap",description:"A hearty breakfast wrap loaded with scrambled eggs and seasoned beans. Perfect fuel to start your day.",cuisine:"Tex-Mex",difficulty:"easy",cook_time_minutes:12,servings:2,ingredients:[{name:"Eggs",quantity:"3",unit:"large"},{name:"Canned Beans",quantity:"1/2",unit:"can"},{name:"Bread",quantity:"2",unit:"slices"},{name:"Salt",quantity:"1/4",unit:"tsp"},{name:"Pepper",quantity:"1/4",unit:"tsp"},{name:"Butter",quantity:"1",unit:"tsp"}],steps:[{step_number:1,instruction:"Drain the beans and warm them in a small pan with a pinch of salt and cumin.",duration_minutes:3},{step_number:2,instruction:"Beat eggs with salt and pepper. Melt butter in a non-stick skillet over medium-low heat.",duration_minutes:1},{step_number:3,instruction:"Pour in the eggs and gently scramble, pushing curds from the edges toward the center.",duration_minutes:3,tips:"Remove from heat slightly before eggs look done -- they'll finish cooking from residual heat."},{step_number:4,instruction:"Warm the bread slices, then layer scrambled eggs and seasoned beans on top.",duration_minutes:2},{step_number:5,instruction:"Fold or roll into a wrap and serve immediately.",duration_minutes:1}],tags:["breakfast","protein","hearty","quick"],is_system:!0,match_score:.95,nutrition:{calories:380,fat_g:14,carbs_g:36,protein_g:24}}];function d(e){return{id:`demo-session-${Date.now()}`,user_id:"demo-user",recipe_id:e,status:"active",current_step:1,started_at:new Date().toISOString(),ai_interventions:[],frame_count:0}}let y=0,g=[{type:"towel_near_heat",severity:"warning",message:"Towel detected near the stove burner. Move it to a safe distance.",voice_message:"Careful! I see a towel near the burner. Please move it away from the heat.",overall_safety:"caution"},{type:"hot_surface",severity:"warning",message:"Pan handle is facing outward. Turn it inward for safety.",voice_message:"Quick tip — your pan handle is sticking out. Turn it inward so it doesn't get knocked off.",overall_safety:"caution"},{type:"fire_hazard",severity:"critical",message:"Flammable item detected near active flame. Remove immediately.",voice_message:"Warning! I see something flammable near the flame. Please move it away right now.",overall_safety:"danger"}];function p(){if(!(++y%10>=7)){let e=[{current_action:"stirring",quality:"good",suggestion:"Nice even strokes. Keep the heat steady."},{current_action:"chopping",quality:"excellent",suggestion:"Great knife control. Fingers curled safely."},{current_action:"saut\xe9ing",quality:"good",suggestion:"Good pan movement. The food is cooking evenly."}];return{hazards:[],technique_guidance:e[y%e.length],user_present:!0,overall_safety:"safe",confidence:.92+.06*Math.random()}}let e=g[(y-7)%g.length];return{hazards:[{id:`demo-hazard-${Date.now()}`,type:e.type,severity:e.severity,message:e.message,voice_message:e.voice_message,confidence:.85+.1*Math.random(),timestamp:new Date().toISOString(),acknowledged:!1}],technique_guidance:null,user_present:!0,overall_safety:e.overall_safety,confidence:.88+.08*Math.random()}}let m={professional_chef:{name:"Chef Laurent",tone:"professional and precise"},friendly_home_cook:{name:"Mama Rosa",tone:"warm and encouraging"},strict_instructor:{name:"Chef Tanaka",tone:"disciplined and exacting"},casual_foodie:{name:"Jake",tone:"casual and fun"}},h={safety_alert:["I noticed something that needs your attention. Let's make sure your cooking space stays safe.","Safety first! Take a moment to check your surroundings before continuing.","Let's pause and address this safety concern before moving on."],technique_feedback:["Your technique is looking really solid. Keep that consistent motion going.","Nice work on that! The way you're handling the ingredients shows great control.","That's exactly how it should be done. You're building great cooking habits."],encouragement:["You're doing great! This dish is coming together beautifully.","Wonderful progress! The aromas coming from your kitchen must be amazing.","Keep it up! You're cooking like a pro today."],tip:["Here's a tip: let the pan get fully hot before adding oil. It prevents sticking.","Pro tip: taste as you go. It's the best way to learn seasoning.","Quick tip: a squeeze of lemon at the end brightens up almost any savory dish."],progress_update:["You're making great progress. About halfway through the recipe now.","Looking good! Just a few more steps to go.","Almost there! The finish line is in sight."],timing_alert:["Time to check on that — it should be ready to flip or stir.","Keep an eye on the clock. This step is time-sensitive.","Perfect timing! Move on to the next step now."]};function f(e,t,a){let n=m[e]||m.professional_chef,i=h[a]||h.encouragement;return{guidance:i[Math.floor(Math.random()*i.length)],persona:{id:e||"professional_chef",name:n.name,tone:n.tone},context_used:t}}function _(){let e=["Great technique! Your knife skills are looking solid.","Looking good! The heat level seems perfect for this step.","Nice work! The ingredients are well-prepared and ready for the next step.","Excellent progress! You're right on track with the timing.","Well done! The consistency looks just right."];return{guidance:e[Math.floor(Math.random()*e.length)],technique:{technique:"cooking",quality:"good",feedback:"Consistent technique with good control."},progress:"on-track",next_action:"Continue with the current step.",confidence:.88+.1*Math.random()}}}}]);