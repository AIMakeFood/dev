(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7095],{2295:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(18889).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},18889:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(21555);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},i=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:c,iconNode:d,...o},h)=>(0,r.createElement)("svg",{ref:h,...n,width:t,height:t,stroke:e,strokeWidth:a?24*Number(s)/Number(t):s,className:i("lucide",l),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(o)&&{"aria-hidden":"true"},...o},[...d.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(c)?c:[c]])),c=(e,t)=>{let s=(0,r.forwardRef)(({className:s,...n},c)=>(0,r.createElement)(l,{ref:c,iconNode:t,className:i(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,s),...n}));return s.displayName=a(e),s}},34652:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(55155),a=s(50536),i=s(39156),n=s(2295),l=s(3948),c=s.n(l),d=s(50497),o=s(21555),h=s(15885);function u(){let e=(0,d.useRouter)(),[t,s]=(0,o.useState)("loading"),[l,u]=(0,o.useState)("");return(0,o.useEffect)(()=>{(async()=>{let t=window.location.hash;if(t){let r=new URLSearchParams(t.substring(1)),a=r.get("access_token"),i=r.get("type"),n=r.get("error"),l=r.get("error_description");if(n){s("error"),u(l||"Authentication failed");return}if(a)try{let{data:t}=await h.api.getSession();if(t?.session)if(s("success"),"recovery"===i)setTimeout(()=>e.push("/reset-password"),1500);else if("signup"===i)setTimeout(()=>e.push("/verify-email"),1500);else try{let t=await h.api.getMFAMethod();t.setupCompleted&&t.method?setTimeout(()=>e.push("/mfa-verify"),1500):setTimeout(()=>e.push("/scan"),1500)}catch{setTimeout(()=>e.push("/scan"),1500)}else s("error"),u("Could not establish session")}catch{s("error"),u("Authentication error")}else s("error"),u("Invalid authentication callback")}else{let{data:t}=await h.api.getSession();if(t?.session){s("success");try{let t=await h.api.getMFAMethod();t.setupCompleted&&t.method?setTimeout(()=>e.push("/mfa-verify"),1500):setTimeout(()=>e.push("/scan"),1500)}catch{setTimeout(()=>e.push("/scan"),1500)}}else s("error"),u("No authentication data found")}})()},[e]),(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-brand-dark px-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full",children:[(0,r.jsxs)(c(),{href:"/",className:"flex items-center justify-center gap-2 mb-8",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-brand-orange to-brand-teal flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-3xl",children:"\uD83C\uDF73"})}),(0,r.jsxs)("span",{className:"font-bold text-2xl",children:[(0,r.jsx)("span",{className:"text-brand-orange",children:"AI"}),(0,r.jsx)("span",{className:"dark:text-white text-gray-900",children:" Make "}),(0,r.jsx)("span",{className:"text-brand-teal",children:"Food"})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-white/5 rounded-2xl shadow-xl border border-gray-200 dark:border-white/10 p-8",children:["loading"===t&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(a.A,{className:"w-16 h-16 text-brand-orange mx-auto mb-4 animate-spin"}),(0,r.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Authenticating"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Please wait while we verify your credentials..."})]}),"success"===t&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(i.A,{className:"w-12 h-12 text-green-500"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Success!"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"You have been authenticated. Redirecting..."}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 text-brand-orange",children:[(0,r.jsx)(a.A,{className:"w-4 h-4 animate-spin"}),(0,r.jsx)("span",{children:"Redirecting..."})]})]}),"error"===t&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-red-100 dark:bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(n.A,{className:"w-12 h-12 text-red-500"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Authentication Failed"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:l||"The authentication link may have expired or is invalid."}),(0,r.jsx)(c(),{href:"/login",className:"inline-block px-6 py-3 bg-gradient-to-r from-brand-orange to-brand-teal text-white rounded-full font-medium hover:shadow-lg transition-all",children:"Back to Login"})]})]})]})})}},39156:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(18889).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},50497:(e,t,s)=>{"use strict";var r=s(60685);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},50536:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(18889).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},69401:(e,t,s)=>{Promise.resolve().then(s.bind(s,34652))}},e=>{e.O(0,[9731,9631,3948,5885,6939,1170,7358],()=>e(e.s=69401)),_N_E=e.O()}]);