(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7766],{792:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2908:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]])},3738:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5762:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},7353:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},13309:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]])},13851:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},24290:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},25699:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},25990:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},30382:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("chef-hat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]])},32447:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},33444:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},39156:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},45723:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},47665:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},50497:(e,t,a)=>{"use strict";var r=a(60685);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},50536:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},53101:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("thermometer-sun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 8a4 4 0 0 0-1.645 7.647",key:"wz5p04"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 14.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0z",key:"yu0u2z"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}]])},57026:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ep});var r=a(55155),s=a(88102),n=a(18889);let l=(0,n.A)("snowflake",[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]]);var i=a(53101),o=a(30382),d=a(33444),c=a(44746),u=a(3738),m=a(75686),g=a(45723),h=a(21555),p=a(50497),f=a(13851),x=a(13309),y=a(2908),b=a(48345),k=a(81065),v=a(50536),w=a(25699),j=a(62649),N=a(78562),U=a(32447),A=a(33971),C=a(93842),S=a(94999),_=a(15885),L=a(15749);function F(){return(0,r.jsxs)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[(0,r.jsx)(L.P.div,{initial:{top:"-10%"},animate:{top:"110%"},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute left-0 right-0 h-1 bg-gradient-to-r from-transparent via-orange-500 to-transparent shadow-[0_0_15px_rgba(255,107,53,0.8)] z-10"}),(0,r.jsx)("div",{className:"absolute top-8 left-8 w-12 h-12 border-t-4 border-l-4 border-white/40 rounded-tl-xl"}),(0,r.jsx)("div",{className:"absolute top-8 right-8 w-12 h-12 border-t-4 border-r-4 border-white/40 rounded-tr-xl"}),(0,r.jsx)("div",{className:"absolute bottom-8 left-8 w-12 h-12 border-b-4 border-l-4 border-white/40 rounded-bl-xl"}),(0,r.jsx)("div",{className:"absolute bottom-8 right-8 w-12 h-12 border-b-4 border-r-4 border-white/40 rounded-br-xl"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-orange-500/5 animate-pulse"})]})}let E={scan:["scan","capture","take photo","take picture","analyze"],stop:["stop","pause","cancel","quit"],start:["start","begin","go","continue","resume"],watch:["watch","keep watch","monitor","observe"],back:["back","go back","previous"],next:["next","forward","continue"],repeat:["repeat","again","say again","what"],help:["help","commands","what can you do"]};function P({onScanComplete:e,onVoiceCommand:t,scanType:a="pantry",inputType:s="video",categories:n=[],customPrompt:l,enableLiveMode:i=!1,captureInterval:o=3e3,enableVoice:d=!1}){let[u,m]=(0,h.useState)("low"),{videoRef:g,canvasRef:p,isActive:L,error:P,startCamera:z,stopCamera:M,captureFrame:T,captureVideo:R}=(0,C.V)({preset:u}),{pauseForScan:$,resumeAfterScan:I}=(0,S.y4)(),[D,B]=(0,h.useState)(!1),[O,V]=(0,h.useState)(null),[G,H]=(0,h.useState)(null),[q,W]=(0,h.useState)(i),[Y,K]=(0,h.useState)(!1),Z=(0,h.useRef)(!1),J=(0,h.useRef)(!1),Q=(0,h.useRef)(null),[X,ee]=(0,h.useState)(d),[et,ea]=(0,h.useState)(!1),[er,es]=(0,h.useState)(null),en=(0,h.useRef)(null),[el,ei]=(0,h.useState)(!1);(0,h.useEffect)(()=>{Z.current=q,J.current=Y},[q,Y]),(0,h.useEffect)(()=>{L?$():I()},[L,$,I]),(0,h.useEffect)(()=>()=>{I(),Q.current&&clearInterval(Q.current),en.current&&en.current.stop()},[I]),(0,h.useEffect)(()=>{if(!X)return;let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return void console.warn("[LiveScanner] Speech recognition not supported");let t=new e;t.continuous=!0,t.interimResults=!1,t.lang="en-US",t.onstart=()=>{ea(!0),console.log("[LiveScanner] Voice recognition started")},t.onend=()=>{if(ea(!1),X&&en.current)try{t.start()}catch(e){console.log("[LiveScanner] Could not restart recognition:",e)}},t.onerror=e=>{console.error("[LiveScanner] Voice recognition error:",e.error),"not-allowed"===e.error&&ee(!1)},t.onresult=e=>{let t=e.results[e.results.length-1][0].transcript.toLowerCase().trim();console.log("[LiveScanner] Voice input:",t),eo(t)},en.current=t;try{t.start()}catch(e){console.error("[LiveScanner] Failed to start recognition:",e)}return()=>{t.stop(),en.current=null}},[X]);let eo=(0,h.useCallback)(e=>{let a=null;for(let[t,r]of Object.entries(E))if(r.some(t=>e.includes(t))){a=t;break}if(a)switch(es(a),console.log("[LiveScanner] Matched command:",a),a){case"scan":L&&!D?ed():L||z();break;case"stop":W(!1),K(!1);break;case"start":L||z();break;case"watch":K(!0),W(!0);break;default:t?.(a)}},[L,D,z,t]),ed=(0,h.useCallback)(async()=>{let t=null;if("video"===s?(console.log("[LiveScanner] Capturing video..."),t=await R(3e3)):(console.log("[LiveScanner] Capturing image frame..."),t=T()),!t)return void console.warn(`[LiveScanner] No ${s||"image"} captured`);B(!0),H(null);try{console.log(`[LiveScanner] Sending ${s||"image"} to API...`);let r=await _.api.scanIngredients(t,"gemini-3-flash-preview",s,a,n,l);if(V(r),e?.(r),J.current&&r.ingredients.length>0){let e=r.ingredients.map(e=>e.name).join(", ");ec(`Found ${r.ingredients.length} items: ${e}`)}}catch(e){console.error("[LiveScanner] Scan failed:",e),H(e instanceof Error?e.message:"Scan failed. Please try again.")}finally{B(!1)}},[T,R,s,e,a,n,l]);(0,h.useEffect)(()=>(q&&L&&!D?(console.log("[LiveScanner] Starting live mode interval"),Q.current=setInterval(()=>{Z.current&&!D&&ed()},o)):Q.current&&(clearInterval(Q.current),Q.current=null),()=>{Q.current&&clearInterval(Q.current)}),[q,L,D,o,ed]);let ec=(0,h.useCallback)(e=>{if("speechSynthesis"in window){let t=new SpeechSynthesisUtterance(e);t.rate=1,t.pitch=1,window.speechSynthesis.speak(t)}},[]),eu=()=>{V(null),H(null)},em=()=>{X?(ee(!1),en.current?.stop()):ee(!0)};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative bg-slate-900 rounded-3xl overflow-hidden aspect-[4/3]",children:[(0,r.jsx)("video",{ref:g,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),(0,r.jsx)("canvas",{ref:p,className:"hidden"}),L&&(0,r.jsx)(F,{}),(0,r.jsxs)("div",{className:"absolute top-4 left-4 flex gap-2",children:[q&&(0,r.jsxs)("div",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 animate-pulse",children:[(0,r.jsx)("span",{className:"w-2 h-2 bg-white rounded-full"}),"LIVE"]}),Y&&(0,r.jsxs)("div",{className:"bg-blue-500 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[(0,r.jsx)(f.A,{className:"w-3 h-3"}),"WATCHING"]}),et&&(0,r.jsxs)("div",{className:"bg-orange-500 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[(0,r.jsx)(x.A,{className:"w-3 h-3"}),"LISTENING"]})]}),(0,r.jsx)("button",{onClick:()=>ei(!el),className:"absolute top-4 right-4 p-2 bg-black/50 rounded-full text-white hover:bg-black/70 transition-colors","aria-label":"Scanner settings",children:(0,r.jsx)(y.A,{className:"w-5 h-5"})}),el&&(0,r.jsxs)("div",{className:"absolute top-14 right-4 bg-white dark:bg-slate-800 rounded-xl shadow-lg p-4 w-64 z-10",children:[(0,r.jsx)("h4",{className:"font-bold text-sm mb-3 text-slate-900 dark:text-white",children:"Scanner Settings"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Frame Quality"}),(0,r.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full mt-1 px-2 py-1 text-sm rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",children:[(0,r.jsx)("option",{value:"ultraLow",children:"Ultra Low (max token savings)"}),(0,r.jsx)("option",{value:"low",children:"Low (saves tokens)"}),(0,r.jsx)("option",{value:"medium",children:"Medium"}),(0,r.jsx)("option",{value:"high",children:"High (detailed)"})]}),(0,r.jsxs)("p",{className:"text-[10px] text-slate-400 mt-1",children:[C.p[u].width,"x",C.p[u].height]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Live Mode"}),(0,r.jsx)("button",{onClick:()=>W(!q),className:`w-10 h-6 rounded-full transition-colors ${q?"bg-green-500":"bg-slate-300 dark:bg-slate-600"}`,children:(0,r.jsx)("div",{className:`w-4 h-4 bg-white rounded-full transform transition-transform ${q?"translate-x-5":"translate-x-1"}`})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Voice Commands"}),(0,r.jsx)("button",{onClick:em,className:`w-10 h-6 rounded-full transition-colors ${X?"bg-orange-500":"bg-slate-300 dark:bg-slate-600"}`,children:(0,r.jsx)("div",{className:`w-4 h-4 bg-white rounded-full transform transition-transform ${X?"translate-x-5":"translate-x-1"}`})})]})]})]}),er&&(0,r.jsxs)("div",{className:"absolute bottom-20 left-4 right-4 bg-orange-500/90 text-white px-4 py-2 rounded-xl text-sm text-center",children:['Voice command: "',er,'"']}),(0,r.jsx)("div",{className:"absolute bottom-4 left-4 right-4 flex justify-center gap-3",children:L?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A.$,{onClick:M,variant:"secondary",size:"icon","aria-label":"Close camera",children:(0,r.jsx)(c.A,{className:"w-5 h-5"})}),(0,r.jsx)(A.$,{onClick:em,variant:X?"default":"secondary",size:"icon","aria-label":X?"Disable voice":"Enable voice",children:X?(0,r.jsx)(x.A,{className:"w-5 h-5"}):(0,r.jsx)(k.A,{className:"w-5 h-5"})}),(0,r.jsx)(A.$,{onClick:ed,size:"lg",disabled:D,className:"gap-2 px-8",children:D?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.A,{className:"w-5 h-5 animate-spin"}),"Analyzing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.A,{className:"w-5 h-5"}),"Capture"]})}),(0,r.jsx)(A.$,{onClick:()=>{let e=!Y;K(e),e?(W(!0),ec("Watch mode enabled. I will continuously monitor for ingredients.")):(W(!1),ec("Watch mode disabled."))},variant:Y?"default":"secondary",size:"icon",className:Y?"bg-blue-500 hover:bg-blue-600":"","aria-label":Y?"Disable watch mode":"Enable watch mode",children:Y?(0,r.jsx)(f.A,{className:"w-5 h-5"}):(0,r.jsx)(w.A,{className:"w-5 h-5"})})]}):(0,r.jsxs)(A.$,{onClick:z,size:"lg",className:"gap-2",children:[(0,r.jsx)(b.A,{className:"w-5 h-5"}),"Open Camera"]})}),"http:"===window.location.protocol&&"localhost"!==window.location.hostname&&!window.location.hostname.startsWith("127.")&&(0,r.jsx)("div",{className:"absolute top-4 left-4 right-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,r.jsx)("p",{className:"text-sm text-yellow-800",children:"⚠️ Camera access requires HTTPS. The app is currently accessed via HTTP. Please use https:// to enable camera features."})}),P&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/90 p-6",children:(0,r.jsxs)("div",{className:"text-center text-white space-y-4",children:[(0,r.jsx)("p",{className:"text-red-400",children:P}),(0,r.jsx)(A.$,{onClick:z,variant:"secondary",children:"Try Again"})]})})]}),X&&(0,r.jsxs)("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-xl p-3",children:[(0,r.jsx)("h4",{className:"font-medium text-orange-800 dark:text-orange-200 text-sm mb-2",children:"Voice Commands:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 text-xs",children:Object.entries(E).map(([e,t])=>(0,r.jsxs)("span",{className:"px-2 py-1 bg-orange-100 dark:bg-orange-800 text-orange-700 dark:text-orange-200 rounded",children:['"',t[0],'"']},e))})]}),G&&(0,r.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-2xl p-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(j.A,{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-medium text-red-800 dark:text-red-200",children:"Scan Failed"}),(0,r.jsx)("p",{className:"text-sm text-red-600 dark:text-red-300 mt-1",children:G})]}),(0,r.jsx)(A.$,{variant:"ghost",size:"sm",onClick:eu,className:"text-red-600 dark:text-red-300 hover:text-red-800 dark:hover:text-red-100",children:(0,r.jsx)(c.A,{className:"w-4 h-4"})})]})}),O&&(0,r.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h3",{className:"font-bold flex items-center gap-2 text-slate-900 dark:text-white",children:[(0,r.jsx)(N.A,{className:"w-5 h-5 text-teal-500"}),O.ingredients.length," Items Found"]}),(0,r.jsxs)(A.$,{variant:"ghost",size:"sm",onClick:eu,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white",children:[(0,r.jsx)(U.A,{className:"w-4 h-4 mr-1"}),"Scan Again"]})]}),(0,r.jsx)("div",{className:"space-y-2",children:O.ingredients.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-700 rounded-xl",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-slate-900 dark:text-white",children:e.name}),(0,r.jsxs)("span",{className:"text-slate-500 dark:text-slate-400 text-sm ml-2",children:[e.quantity," ",e.unit]})]}),(0,r.jsxs)("span",{className:"text-xs px-2 py-1 bg-teal-100 dark:bg-teal-900 text-teal-700 dark:text-teal-300 rounded-full",children:[Math.round(100*e.confidence),"%"]})]},t))})]})]})}var z=a(58915),M=a(7353),T=a(5762);let R=[{id:"all_items",label:"All Items",shortLabel:"All",icon:"\uD83D\uDD0D",group:"general",description:"Scan all visible ingredients without dietary filtering",color:"bg-slate-500"},{id:"vegetarian",label:"Vegetarian",shortLabel:"Veg",icon:"\uD83E\uDD6C",group:"dietary",description:"Flag non-vegetarian items (meat, fish, poultry)",color:"bg-green-500"},{id:"vegan",label:"Vegan",shortLabel:"Vegan",icon:"\uD83C\uDF31",group:"dietary",description:"Flag all animal products including dairy, eggs, honey",color:"bg-emerald-500"},{id:"keto",label:"Keto",shortLabel:"Keto",icon:"\uD83E\uDD51",group:"dietary",description:"Identify carb content and flag high-carb items",color:"bg-purple-500"},{id:"paleo",label:"Paleo",shortLabel:"Paleo",icon:"\uD83C\uDF56",group:"dietary",description:"Flag grains, legumes, dairy, and processed foods",color:"bg-amber-600"},{id:"nut_free",label:"Nut-Free",shortLabel:"No Nuts",icon:"\uD83D\uDEAB\uD83E\uDD5C",group:"allergies",description:"SAFETY: Flag all nuts and cross-contamination risks",color:"bg-red-500"},{id:"dairy_free",label:"Dairy-Free",shortLabel:"No Dairy",icon:"\uD83D\uDEAB\uD83E\uDD5B",group:"allergies",description:"Flag all dairy products including hidden dairy",color:"bg-blue-500"},{id:"gluten_free",label:"Gluten-Free",shortLabel:"No Gluten",icon:"\uD83D\uDEAB\uD83C\uDF3E",group:"allergies",description:"Flag wheat, barley, rye, and hidden gluten sources",color:"bg-yellow-500"},{id:"low_sodium",label:"Low-Sodium",shortLabel:"Low Na",icon:"\uD83E\uDDC2",group:"health",description:"Flag high-sodium items and suggest alternatives",color:"bg-cyan-500"},{id:"heart_healthy",label:"Heart-Healthy",shortLabel:"Heart",icon:"❤️",group:"health",description:"Evaluate saturated fat, sodium, and cholesterol",color:"bg-rose-500"},{id:"diabetic_friendly",label:"Diabetic-Friendly",shortLabel:"Diabetic",icon:"\uD83D\uDC89",group:"health",description:"Evaluate glycemic impact and sugar content",color:"bg-indigo-500"},{id:"skincare",label:"Skincare/Cosmetic",shortLabel:"Skincare",icon:"✨",group:"special",description:"Identify ingredients for DIY skincare applications",color:"bg-pink-500"},{id:"custom",label:"Custom",shortLabel:"Custom",icon:"⚙️",group:"special",description:"Use your own custom prompt",color:"bg-gray-500"}],$={general:{label:"General",categories:["all_items"]},dietary:{label:"Dietary",categories:["vegetarian","vegan","keto","paleo"]},allergies:{label:"Allergies",categories:["nut_free","dairy_free","gluten_free"]},health:{label:"Health",categories:["low_sodium","heart_healthy","diabetic_friendly"]},special:{label:"Special",categories:["skincare","custom"]}},I={pantry:{label:"Pantry",icon:"\uD83D\uDDC4️",description:"Dry goods, canned items, spices, grains, pasta, snacks"},refrigerator:{label:"Fridge",icon:"❄️",description:"Fresh produce, dairy, meats, condiments, leftovers"},countertop:{label:"Counter",icon:"\uD83C\uDF73",description:"Items spread out on counter for detailed scanning"}};function D(e){return $.allergies.categories.includes(e)}function B({selectedCategories:e,onCategoriesChange:t,className:a=""}){let s=(0,h.useRef)(null),[n,l]=(0,h.useState)(!1),[i,o]=(0,h.useState)(!1),d=()=>{let e=s.current;e&&(l(e.scrollLeft>10),o(e.scrollLeft<e.scrollWidth-e.clientWidth-10))};(0,h.useEffect)(()=>(d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)),[]);let c=e=>{let t=s.current;t&&(t.scrollBy({left:"left"===e?-200:200,behavior:"smooth"}),setTimeout(d,300))},u=Object.entries($).map(([e,t])=>({key:e,label:t.label,categories:R.filter(e=>t.categories.includes(e.id))}));return(0,r.jsxs)("div",{className:`relative ${a}`,children:[n&&(0,r.jsx)("button",{onClick:()=>c("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 w-8 h-8 flex items-center justify-center bg-white dark:bg-slate-900 shadow-md rounded-full","aria-label":"Scroll left",children:(0,r.jsx)(M.A,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"})}),(0,r.jsx)("div",{ref:s,onScroll:d,className:"flex gap-2 overflow-x-auto scrollbar-hide py-2 px-1",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:u.map((a,s)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[s>0&&(0,r.jsx)("div",{className:"h-6 w-px bg-slate-200 dark:bg-slate-700 mx-1"}),a.categories.map(a=>{let s=e.includes(a.id),n=$.allergies.categories.includes(a.id);return(0,r.jsxs)("button",{onClick:()=>{var r;let s;"all_items"===(r=a.id)?e.includes("all_items")?t([]):t(["all_items"]):(0===(s=e.includes(r)?e.filter(e=>e!==r):[...e.filter(e=>"all_items"!==e),r]).length&&(s=["all_items"]),t(s))},className:`
                    flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium
                    whitespace-nowrap transition-all duration-200
                    ${s?`${a.color} text-white shadow-md`:"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}
                    ${n&&s?"ring-2 ring-red-300 dark:ring-red-500":""}
                  `,title:a.description,children:[(0,r.jsx)("span",{className:"text-base",children:a.icon}),(0,r.jsx)("span",{children:a.shortLabel})]},a.id)})]},a.key))}),i&&(0,r.jsx)("button",{onClick:()=>c("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 w-8 h-8 flex items-center justify-center bg-white dark:bg-slate-900 shadow-md rounded-full","aria-label":"Scroll right",children:(0,r.jsx)(T.A,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"})}),e.length>0&&!e.includes("all_items")&&(0,r.jsxs)("div",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:[e.length," filter",1!==e.length?"s":""," active",(0,r.jsx)("button",{onClick:()=>t(["all_items"]),className:"ml-2 text-orange-500 hover:underline",children:"Clear all"})]})]})}var O=a(57798);let V={produce:"Produce",dairy:"Dairy & Eggs",meat:"Meat & Poultry",seafood:"Seafood",grains:"Grains & Pasta",pantry:"Pantry Staples",spices:"Spices & Herbs",condiments:"Condiments & Sauces",baking:"Baking",frozen:"Frozen",beverages:"Beverages"},G=["pieces","lbs","oz","kg","g","cups","tbsp","tsp","bunch","head","cloves","slices","cans","bottles","packages","bags","boxes","dozen","pints","quarts","gallons","liters","ml"],H=[{name:"Tomato",category:"produce",defaultUnit:"pieces"},{name:"Onion",category:"produce",defaultUnit:"pieces"},{name:"Garlic",category:"produce",defaultUnit:"cloves"},{name:"Potato",category:"produce",defaultUnit:"pieces"},{name:"Carrot",category:"produce",defaultUnit:"pieces"},{name:"Celery",category:"produce",defaultUnit:"bunch"},{name:"Bell Pepper",category:"produce",defaultUnit:"pieces"},{name:"Cucumber",category:"produce",defaultUnit:"pieces"},{name:"Lettuce",category:"produce",defaultUnit:"head"},{name:"Spinach",category:"produce",defaultUnit:"bags"},{name:"Broccoli",category:"produce",defaultUnit:"head"},{name:"Cauliflower",category:"produce",defaultUnit:"head"},{name:"Zucchini",category:"produce",defaultUnit:"pieces"},{name:"Mushrooms",category:"produce",defaultUnit:"oz"},{name:"Green Beans",category:"produce",defaultUnit:"lbs"},{name:"Asparagus",category:"produce",defaultUnit:"bunch"},{name:"Corn",category:"produce",defaultUnit:"pieces"},{name:"Peas",category:"produce",defaultUnit:"cups"},{name:"Cabbage",category:"produce",defaultUnit:"head"},{name:"Kale",category:"produce",defaultUnit:"bunch"},{name:"Brussels Sprouts",category:"produce",defaultUnit:"lbs"},{name:"Eggplant",category:"produce",defaultUnit:"pieces"},{name:"Sweet Potato",category:"produce",defaultUnit:"pieces"},{name:"Avocado",category:"produce",defaultUnit:"pieces"},{name:"Jalape\xf1o",category:"produce",defaultUnit:"pieces"},{name:"Ginger",category:"produce",defaultUnit:"pieces"},{name:"Shallots",category:"produce",defaultUnit:"pieces"},{name:"Leeks",category:"produce",defaultUnit:"pieces"},{name:"Green Onions",category:"produce",defaultUnit:"bunch"},{name:"Radishes",category:"produce",defaultUnit:"bunch"},{name:"Apple",category:"produce",defaultUnit:"pieces"},{name:"Banana",category:"produce",defaultUnit:"pieces"},{name:"Orange",category:"produce",defaultUnit:"pieces"},{name:"Lemon",category:"produce",defaultUnit:"pieces"},{name:"Lime",category:"produce",defaultUnit:"pieces"},{name:"Strawberries",category:"produce",defaultUnit:"lbs"},{name:"Blueberries",category:"produce",defaultUnit:"pints"},{name:"Raspberries",category:"produce",defaultUnit:"pints"},{name:"Grapes",category:"produce",defaultUnit:"lbs"},{name:"Watermelon",category:"produce",defaultUnit:"pieces"},{name:"Cantaloupe",category:"produce",defaultUnit:"pieces"},{name:"Pineapple",category:"produce",defaultUnit:"pieces"},{name:"Mango",category:"produce",defaultUnit:"pieces"},{name:"Peach",category:"produce",defaultUnit:"pieces"},{name:"Pear",category:"produce",defaultUnit:"pieces"},{name:"Plum",category:"produce",defaultUnit:"pieces"},{name:"Cherries",category:"produce",defaultUnit:"lbs"},{name:"Kiwi",category:"produce",defaultUnit:"pieces"},{name:"Grapefruit",category:"produce",defaultUnit:"pieces"},{name:"Pomegranate",category:"produce",defaultUnit:"pieces"},{name:"Milk",category:"dairy",defaultUnit:"gallons"},{name:"Eggs",category:"dairy",defaultUnit:"dozen"},{name:"Butter",category:"dairy",defaultUnit:"lbs"},{name:"Cheese",category:"dairy",defaultUnit:"oz"},{name:"Cheddar Cheese",category:"dairy",defaultUnit:"oz"},{name:"Mozzarella",category:"dairy",defaultUnit:"oz"},{name:"Parmesan",category:"dairy",defaultUnit:"oz"},{name:"Cream Cheese",category:"dairy",defaultUnit:"oz"},{name:"Sour Cream",category:"dairy",defaultUnit:"oz"},{name:"Yogurt",category:"dairy",defaultUnit:"oz"},{name:"Greek Yogurt",category:"dairy",defaultUnit:"oz"},{name:"Heavy Cream",category:"dairy",defaultUnit:"cups"},{name:"Half and Half",category:"dairy",defaultUnit:"pints"},{name:"Cottage Cheese",category:"dairy",defaultUnit:"oz"},{name:"Ricotta",category:"dairy",defaultUnit:"oz"},{name:"Feta Cheese",category:"dairy",defaultUnit:"oz"},{name:"Swiss Cheese",category:"dairy",defaultUnit:"oz"},{name:"Goat Cheese",category:"dairy",defaultUnit:"oz"},{name:"Blue Cheese",category:"dairy",defaultUnit:"oz"},{name:"Brie",category:"dairy",defaultUnit:"oz"},{name:"Chicken Breast",category:"meat",defaultUnit:"lbs"},{name:"Chicken Thighs",category:"meat",defaultUnit:"lbs"},{name:"Whole Chicken",category:"meat",defaultUnit:"pieces"},{name:"Ground Beef",category:"meat",defaultUnit:"lbs"},{name:"Beef Steak",category:"meat",defaultUnit:"lbs"},{name:"Beef Roast",category:"meat",defaultUnit:"lbs"},{name:"Pork Chops",category:"meat",defaultUnit:"lbs"},{name:"Pork Tenderloin",category:"meat",defaultUnit:"lbs"},{name:"Ground Pork",category:"meat",defaultUnit:"lbs"},{name:"Bacon",category:"meat",defaultUnit:"packages"},{name:"Ham",category:"meat",defaultUnit:"lbs"},{name:"Sausage",category:"meat",defaultUnit:"lbs"},{name:"Turkey Breast",category:"meat",defaultUnit:"lbs"},{name:"Ground Turkey",category:"meat",defaultUnit:"lbs"},{name:"Lamb Chops",category:"meat",defaultUnit:"lbs"},{name:"Ground Lamb",category:"meat",defaultUnit:"lbs"},{name:"Duck",category:"meat",defaultUnit:"lbs"},{name:"Pepperoni",category:"meat",defaultUnit:"oz"},{name:"Prosciutto",category:"meat",defaultUnit:"oz"},{name:"Salami",category:"meat",defaultUnit:"oz"},{name:"Salmon",category:"seafood",defaultUnit:"lbs"},{name:"Shrimp",category:"seafood",defaultUnit:"lbs"},{name:"Tuna",category:"seafood",defaultUnit:"lbs"},{name:"Cod",category:"seafood",defaultUnit:"lbs"},{name:"Tilapia",category:"seafood",defaultUnit:"lbs"},{name:"Crab",category:"seafood",defaultUnit:"lbs"},{name:"Lobster",category:"seafood",defaultUnit:"pieces"},{name:"Scallops",category:"seafood",defaultUnit:"lbs"},{name:"Mussels",category:"seafood",defaultUnit:"lbs"},{name:"Clams",category:"seafood",defaultUnit:"lbs"},{name:"Oysters",category:"seafood",defaultUnit:"dozen"},{name:"Sardines",category:"seafood",defaultUnit:"cans"},{name:"Anchovies",category:"seafood",defaultUnit:"cans"},{name:"Halibut",category:"seafood",defaultUnit:"lbs"},{name:"Trout",category:"seafood",defaultUnit:"lbs"},{name:"Rice",category:"grains",defaultUnit:"lbs"},{name:"Brown Rice",category:"grains",defaultUnit:"lbs"},{name:"Pasta",category:"grains",defaultUnit:"lbs"},{name:"Spaghetti",category:"grains",defaultUnit:"lbs"},{name:"Penne",category:"grains",defaultUnit:"lbs"},{name:"Macaroni",category:"grains",defaultUnit:"lbs"},{name:"Fettuccine",category:"grains",defaultUnit:"lbs"},{name:"Lasagna Noodles",category:"grains",defaultUnit:"boxes"},{name:"Bread",category:"grains",defaultUnit:"pieces"},{name:"Tortillas",category:"grains",defaultUnit:"packages"},{name:"Quinoa",category:"grains",defaultUnit:"lbs"},{name:"Oats",category:"grains",defaultUnit:"lbs"},{name:"Couscous",category:"grains",defaultUnit:"lbs"},{name:"Barley",category:"grains",defaultUnit:"lbs"},{name:"Breadcrumbs",category:"grains",defaultUnit:"cups"},{name:"Crackers",category:"grains",defaultUnit:"boxes"},{name:"Bagels",category:"grains",defaultUnit:"pieces"},{name:"English Muffins",category:"grains",defaultUnit:"packages"},{name:"Pita Bread",category:"grains",defaultUnit:"packages"},{name:"Naan",category:"grains",defaultUnit:"packages"},{name:"Olive Oil",category:"pantry",defaultUnit:"bottles"},{name:"Vegetable Oil",category:"pantry",defaultUnit:"bottles"},{name:"Coconut Oil",category:"pantry",defaultUnit:"bottles"},{name:"Canned Tomatoes",category:"pantry",defaultUnit:"cans"},{name:"Tomato Paste",category:"pantry",defaultUnit:"cans"},{name:"Tomato Sauce",category:"pantry",defaultUnit:"cans"},{name:"Chicken Broth",category:"pantry",defaultUnit:"cans"},{name:"Beef Broth",category:"pantry",defaultUnit:"cans"},{name:"Vegetable Broth",category:"pantry",defaultUnit:"cans"},{name:"Canned Beans",category:"pantry",defaultUnit:"cans"},{name:"Black Beans",category:"pantry",defaultUnit:"cans"},{name:"Kidney Beans",category:"pantry",defaultUnit:"cans"},{name:"Chickpeas",category:"pantry",defaultUnit:"cans"},{name:"Lentils",category:"pantry",defaultUnit:"lbs"},{name:"Peanut Butter",category:"pantry",defaultUnit:"bottles"},{name:"Almond Butter",category:"pantry",defaultUnit:"bottles"},{name:"Canned Tuna",category:"pantry",defaultUnit:"cans"},{name:"Canned Salmon",category:"pantry",defaultUnit:"cans"},{name:"Coconut Milk",category:"pantry",defaultUnit:"cans"},{name:"Nuts",category:"pantry",defaultUnit:"bags"},{name:"Almonds",category:"pantry",defaultUnit:"bags"},{name:"Walnuts",category:"pantry",defaultUnit:"bags"},{name:"Cashews",category:"pantry",defaultUnit:"bags"},{name:"Peanuts",category:"pantry",defaultUnit:"bags"},{name:"Pine Nuts",category:"pantry",defaultUnit:"bags"},{name:"Salt",category:"spices",defaultUnit:"pieces"},{name:"Black Pepper",category:"spices",defaultUnit:"pieces"},{name:"Garlic Powder",category:"spices",defaultUnit:"pieces"},{name:"Onion Powder",category:"spices",defaultUnit:"pieces"},{name:"Paprika",category:"spices",defaultUnit:"pieces"},{name:"Cumin",category:"spices",defaultUnit:"pieces"},{name:"Chili Powder",category:"spices",defaultUnit:"pieces"},{name:"Oregano",category:"spices",defaultUnit:"pieces"},{name:"Basil",category:"spices",defaultUnit:"pieces"},{name:"Thyme",category:"spices",defaultUnit:"pieces"},{name:"Rosemary",category:"spices",defaultUnit:"pieces"},{name:"Parsley",category:"spices",defaultUnit:"bunch"},{name:"Cilantro",category:"spices",defaultUnit:"bunch"},{name:"Dill",category:"spices",defaultUnit:"bunch"},{name:"Bay Leaves",category:"spices",defaultUnit:"pieces"},{name:"Cinnamon",category:"spices",defaultUnit:"pieces"},{name:"Nutmeg",category:"spices",defaultUnit:"pieces"},{name:"Turmeric",category:"spices",defaultUnit:"pieces"},{name:"Ginger Powder",category:"spices",defaultUnit:"pieces"},{name:"Cayenne Pepper",category:"spices",defaultUnit:"pieces"},{name:"Red Pepper Flakes",category:"spices",defaultUnit:"pieces"},{name:"Italian Seasoning",category:"spices",defaultUnit:"pieces"},{name:"Curry Powder",category:"spices",defaultUnit:"pieces"},{name:"Sage",category:"spices",defaultUnit:"pieces"},{name:"Mint",category:"spices",defaultUnit:"bunch"},{name:"Ketchup",category:"condiments",defaultUnit:"bottles"},{name:"Mustard",category:"condiments",defaultUnit:"bottles"},{name:"Mayonnaise",category:"condiments",defaultUnit:"bottles"},{name:"Soy Sauce",category:"condiments",defaultUnit:"bottles"},{name:"Hot Sauce",category:"condiments",defaultUnit:"bottles"},{name:"Sriracha",category:"condiments",defaultUnit:"bottles"},{name:"Worcestershire Sauce",category:"condiments",defaultUnit:"bottles"},{name:"Vinegar",category:"condiments",defaultUnit:"bottles"},{name:"Balsamic Vinegar",category:"condiments",defaultUnit:"bottles"},{name:"Apple Cider Vinegar",category:"condiments",defaultUnit:"bottles"},{name:"Rice Vinegar",category:"condiments",defaultUnit:"bottles"},{name:"BBQ Sauce",category:"condiments",defaultUnit:"bottles"},{name:"Teriyaki Sauce",category:"condiments",defaultUnit:"bottles"},{name:"Fish Sauce",category:"condiments",defaultUnit:"bottles"},{name:"Oyster Sauce",category:"condiments",defaultUnit:"bottles"},{name:"Hoisin Sauce",category:"condiments",defaultUnit:"bottles"},{name:"Salsa",category:"condiments",defaultUnit:"bottles"},{name:"Pesto",category:"condiments",defaultUnit:"bottles"},{name:"Honey",category:"condiments",defaultUnit:"bottles"},{name:"Maple Syrup",category:"condiments",defaultUnit:"bottles"},{name:"All-Purpose Flour",category:"baking",defaultUnit:"lbs"},{name:"Bread Flour",category:"baking",defaultUnit:"lbs"},{name:"Whole Wheat Flour",category:"baking",defaultUnit:"lbs"},{name:"Sugar",category:"baking",defaultUnit:"lbs"},{name:"Brown Sugar",category:"baking",defaultUnit:"lbs"},{name:"Powdered Sugar",category:"baking",defaultUnit:"lbs"},{name:"Baking Soda",category:"baking",defaultUnit:"boxes"},{name:"Baking Powder",category:"baking",defaultUnit:"cans"},{name:"Yeast",category:"baking",defaultUnit:"packages"},{name:"Vanilla Extract",category:"baking",defaultUnit:"bottles"},{name:"Almond Extract",category:"baking",defaultUnit:"bottles"},{name:"Cocoa Powder",category:"baking",defaultUnit:"cans"},{name:"Chocolate Chips",category:"baking",defaultUnit:"bags"},{name:"Cornstarch",category:"baking",defaultUnit:"boxes"},{name:"Gelatin",category:"baking",defaultUnit:"packages"},{name:"Frozen Vegetables",category:"frozen",defaultUnit:"bags"},{name:"Frozen Peas",category:"frozen",defaultUnit:"bags"},{name:"Frozen Corn",category:"frozen",defaultUnit:"bags"},{name:"Frozen Berries",category:"frozen",defaultUnit:"bags"},{name:"Frozen Pizza",category:"frozen",defaultUnit:"pieces"},{name:"Ice Cream",category:"frozen",defaultUnit:"pints"},{name:"Frozen Chicken",category:"frozen",defaultUnit:"lbs"},{name:"Frozen Shrimp",category:"frozen",defaultUnit:"lbs"},{name:"Frozen Fish",category:"frozen",defaultUnit:"lbs"},{name:"Frozen Waffles",category:"frozen",defaultUnit:"boxes"},{name:"Coffee",category:"beverages",defaultUnit:"bags"},{name:"Tea",category:"beverages",defaultUnit:"boxes"},{name:"Orange Juice",category:"beverages",defaultUnit:"bottles"},{name:"Apple Juice",category:"beverages",defaultUnit:"bottles"},{name:"Sparkling Water",category:"beverages",defaultUnit:"bottles"},{name:"Soda",category:"beverages",defaultUnit:"cans"},{name:"Wine",category:"beverages",defaultUnit:"bottles"},{name:"Beer",category:"beverages",defaultUnit:"cans"},{name:"Almond Milk",category:"beverages",defaultUnit:"bottles"},{name:"Oat Milk",category:"beverages",defaultUnit:"bottles"}];var q=a(31616);function W({onAddIngredient:e,className:t}){let[a,s]=(0,h.useState)(""),[n,l]=(0,h.useState)([]),[i,o]=(0,h.useState)(!1),[d,m]=(0,h.useState)(-1),[g,p]=(0,h.useState)(null),[f,x]=(0,h.useState)("1"),[y,b]=(0,h.useState)("pieces"),k=(0,h.useRef)(null),v=(0,h.useRef)(null);(0,h.useEffect)(()=>{a.trim().length>0?(l(function(e,t=10){if(!e.trim())return[];let a=e.toLowerCase().trim();return H.map(e=>{let t=e.name.toLowerCase(),r=0;if(t===a)r=100;else if(t.startsWith(a))r=80;else if(t.split(" ").some(e=>e.startsWith(a)))r=60;else if(t.includes(a))r=40;else{let e=0;for(let s of t)if(s===a[e]&&++e===a.length){r=20;break}}return{ingredient:e,score:r}}).filter(e=>e.score>0).sort((e,t)=>t.score-e.score).slice(0,t).map(e=>e.ingredient)}(a,8)),o(!0),m(-1)):(l([]),o(!1))},[a]),(0,h.useEffect)(()=>{let e=e=>{v.current&&!v.current.contains(e.target)&&k.current&&!k.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let w=(0,h.useCallback)(e=>{p(e.name),b(e.defaultUnit),s(""),o(!1),l([])},[]),j=(0,h.useCallback)(()=>{a.trim()&&(p(a.trim()),s(""),o(!1),l([]))},[a]),N=(0,h.useCallback)(()=>{g&&(e({name:g,quantity:parseFloat(f)||1,unit:y}),p(null),x("1"),b("pieces"))},[g,f,y,e]),U=(0,h.useCallback)(()=>{p(null),s(""),x("1"),b("pieces")},[]);return(0,r.jsxs)("div",{className:(0,q.cn)("space-y-3",t),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:[(0,r.jsx)(O.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Manual Add"})]}),g?(0,r.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-medium text-slate-900 dark:text-white truncate",children:g}),(0,r.jsx)("button",{onClick:U,className:"p-1 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-500 transition-colors",children:(0,r.jsx)(c.A,{className:"w-4 h-4"})})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"number",value:f,onChange:e=>x(e.target.value),min:"0.1",step:"0.5",className:"w-16 px-2 py-1.5 rounded-lg bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-white text-sm text-center focus:outline-none focus:ring-2 focus:ring-orange-500"}),(0,r.jsx)("select",{value:y,onChange:e=>b(e.target.value),className:"px-2 py-1.5 rounded-lg bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-orange-500",children:G.map(e=>(0,r.jsx)("option",{value:e,children:e},e))}),(0,r.jsxs)(A.$,{onClick:N,size:"sm",className:"gap-1",children:[(0,r.jsx)(u.A,{className:"w-4 h-4"}),"Add"]})]})]}):(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(O.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,r.jsx)("input",{ref:k,type:"text",value:a,onChange:e=>s(e.target.value),onFocus:()=>a.trim()&&o(!0),onKeyDown:e=>{if(i)switch(e.key){case"ArrowDown":e.preventDefault(),m(e=>Math.min(e+1,n.length));break;case"ArrowUp":e.preventDefault(),m(e=>Math.max(e-1,-1));break;case"Enter":e.preventDefault(),d>=0&&d<n.length?w(n[d]):d===n.length&&a.trim()&&j();break;case"Escape":o(!1)}},placeholder:"Search for an ingredient...",className:"w-full pl-10 pr-4 py-2.5 rounded-xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-900 dark:text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500 dark:focus:ring-orange-400"})]}),i&&(a.trim()||n.length>0)&&(0,r.jsxs)("div",{ref:v,className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-lg max-h-64 overflow-y-auto",children:[n.map((e,t)=>(0,r.jsxs)("button",{onClick:()=>w(e),className:(0,q.cn)("w-full flex items-center justify-between px-4 py-2.5 text-left transition-colors",t===d?"bg-orange-50 dark:bg-orange-900/20":"hover:bg-slate-50 dark:hover:bg-slate-700"),children:[(0,r.jsx)("span",{className:"font-medium text-slate-900 dark:text-white",children:e.name}),(0,r.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:V[e.category]})]},e.name)),a.trim()&&(0,r.jsxs)("button",{onClick:j,className:(0,q.cn)("w-full flex items-center gap-2 px-4 py-2.5 text-left border-t border-slate-200 dark:border-slate-700 transition-colors",d===n.length?"bg-orange-50 dark:bg-orange-900/20":"hover:bg-slate-50 dark:hover:bg-slate-700"),children:[(0,r.jsx)(u.A,{className:"w-4 h-4 text-orange-500"}),(0,r.jsxs)("span",{className:"text-slate-900 dark:text-white",children:['Add "',a.trim(),'" as custom ingredient']})]}),0===n.length&&!a.trim()&&(0,r.jsx)("div",{className:"px-4 py-3 text-sm text-slate-500 dark:text-slate-400 text-center",children:"Type to search ingredients"})]})]}),(0,r.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Can't find what you're looking for? Type any ingredient name and add it manually."})]})}var Y=a(24290),K=a(792),Z=a(47665);let J={pantry:"This is a pantry/cupboard scan. Look for dry goods, canned items, spices, grains, pasta, snacks, and shelf-stable items.",refrigerator:"This is a refrigerator scan. Look for fresh produce, dairy, meats, condiments, leftovers, and refrigerated items.",countertop:"This is a countertop scan with items spread out. Each visible item should be identified separately."},Q=`Return ONLY a valid JSON array with this exact format:
[
  {
    "name": "ingredient name",
    "quantity": number,
    "unit": "pcs" or "g" or "ml" or "cups" etc,
    "category": "vegetable" or "fruit" or "protein" or "dairy" or "grain" or "spice" or "condiment" or "other",
    "freshness": "fresh" or "good" or "wilted" or "expiring",
    "days_remaining_estimate": number or null,
    "confidence": 0.0 to 1.0
  }
]
Be specific with ingredient names. Estimate quantities conservatively.`,X={vegetarian:`
Additionally, for VEGETARIAN diet:
- FLAG any non-vegetarian items (meat, fish, poultry, gelatin, rennet)
- Add "is_vegetarian": true/false to each item
- Add "vegetarian_concern": "explanation" or null`,vegan:`
Additionally, for VEGAN diet:
- FLAG all animal products (meat, fish, dairy, eggs, honey, gelatin)
- Add "is_vegan": true/false to each item
- Add "vegan_concern": "explanation" or null
- Add "vegan_alternative": "suggestion" or null`,keto:`
Additionally, for KETO/low-carb diet:
- Estimate carb content for each item
- Add "is_keto_friendly": true/false
- Add "carb_level": "low" or "medium" or "high"
- Add "estimated_net_carbs_per_serving": number or null`,paleo:`
Additionally, for PALEO diet:
- FLAG grains, legumes, dairy, processed foods, refined sugar
- Add "is_paleo": true/false
- Add "paleo_concern": "grain/legume/dairy/processed/sugar" or null`,nut_free:`
ALLERGY ALERT - NUT DETECTION (SAFETY CRITICAL):
- Identify ALL potential nut content
- Flag tree nuts (almonds, walnuts, cashews, pecans, pistachios, hazelnuts, macadamia, Brazil nuts)
- Flag peanuts
- Flag cross-contamination risks
- Add "contains_nuts": true/false
- Add "nut_type": "specific nut" or null
- Add "cross_contamination_risk": "high" or "medium" or "low" or "none"
- Add "safety_warning": "warning message" or null
PRIORITIZE SAFETY - when in doubt, flag as potential risk.`,dairy_free:`
Additionally, for DAIRY-FREE diet:
- Flag all dairy (milk, cream, butter, cheese, whey, casein, lactose)
- Add "contains_dairy": true/false
- Add "dairy_type": "specific dairy ingredient" or null
- Add "dairy_free_alternative": "suggestion" or null`,gluten_free:`
Additionally, for GLUTEN-FREE diet:
- Flag wheat, barley, rye, oats (unless certified GF)
- Flag hidden gluten (soy sauce, malt, some seasonings)
- Add "contains_gluten": true/false
- Add "gluten_source": "wheat/barley/rye/oats/hidden" or null
- Add "cross_contamination_risk": "high" or "medium" or "low" or "none"`,low_sodium:`
Additionally, for LOW-SODIUM diet:
- Estimate sodium content
- Flag high-sodium items (processed foods, cured meats, condiments)
- Add "sodium_level": "low" or "medium" or "high"
- Add "estimated_sodium_mg_per_serving": number or null
- Add "low_sodium_alternative": "suggestion" or null`,heart_healthy:`
Additionally, for HEART-HEALTHY diet:
- Evaluate saturated fat, trans fat, cholesterol, sodium
- Add "heart_health_rating": "good" or "moderate" or "limit"
- Add "health_concerns": ["high saturated fat", "high sodium", etc] or []
- Add "health_benefits": ["high fiber", "omega-3", etc] or []
- Add "healthier_alternative": "suggestion" or null`,diabetic_friendly:`
Additionally, for DIABETIC-FRIENDLY diet:
- Evaluate glycemic impact
- Flag high-GI foods (white bread, sugary items, refined carbs)
- Add "glycemic_impact": "low" or "medium" or "high"
- Add "estimated_glycemic_index": number or null
- Add "sugar_content": "none" or "low" or "moderate" or "high"`,skincare:`
Additionally, for SKINCARE/COSMETIC use:
- Identify ingredients beneficial for skin (honey, oats, coconut oil, aloe, turmeric)
- Flag potential irritants
- Add "skin_benefit": "moisturizing/exfoliating/anti-inflammatory/brightening/soothing" or null
- Add "skin_concern": "irritant/comedogenic/sensitizing" or null
- Add "skin_type_best_for": "all/oily/dry/sensitive/combination" or null
- Add "diy_use": "suggested DIY application" or null`};function ee(e,t,a=[]){let r=[J[e]];for(let e of(r.push("\nAnalyze this image of food ingredients."),r.push("Identify each visible ingredient and estimate its quantity."),t.some(D)&&r.push("\n⚠️ SAFETY CRITICAL: This scan includes allergy detection. Prioritize safety over accuracy."),t.filter(e=>"all_items"!==e&&"custom"!==e))){let t=X[e];t&&r.push(t)}return a.length>0&&(r.push(`
⚠️ USER'S SPECIFIC ALLERGIES: ${a.join(", ")}`),r.push("Flag any items that may contain or be cross-contaminated with these allergens.")),r.push("\n"+Q),r.join("\n")}function et({favorites:e,onSelect:t,onDelete:a,className:s=""}){let[n,l]=(0,h.useState)(!1),[i,o]=(0,h.useState)(null),c=(0,h.useRef)(null);(0,h.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let u=async(e,t)=>{if(e.stopPropagation(),a){o(t);try{await a(t)}finally{o(null)}}},m=[...e].sort((e,t)=>e.is_default&&!t.is_default?-1:!e.is_default&&t.is_default?1:e.usage_count!==t.usage_count?t.usage_count-e.usage_count:new Date(t.created_at).getTime()-new Date(e.created_at).getTime());return(0,r.jsxs)("div",{ref:c,className:`relative ${s}`,children:[(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),l(!n)},className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-slate-600 dark:text-slate-400 hover:text-orange-500 dark:hover:text-orange-400 transition-colors",children:[(0,r.jsx)(Y.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Favorites"}),(0,r.jsx)(K.A,{className:`w-4 h-4 transition-transform ${n?"rotate-180":""}`}),e.length>0&&(0,r.jsx)("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-slate-200 dark:bg-slate-700 rounded-full",children:e.length})]}),n&&(0,r.jsx)("div",{className:"absolute top-full right-0 mt-1 w-72 max-h-80 overflow-y-auto bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-lg z-50",children:0===e.length?(0,r.jsxs)("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:[(0,r.jsx)(Y.A,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,r.jsx)("p",{className:"text-sm",children:"No saved prompts yet"}),(0,r.jsx)("p",{className:"text-xs mt-1",children:"Save your custom prompts for quick access"})]}):(0,r.jsx)("div",{className:"py-2",children:m.map(e=>(0,r.jsx)("div",{onClick:()=>{t(e),l(!1)},className:"px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer border-b border-slate-100 dark:border-slate-700 last:border-b-0",children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-medium text-sm text-slate-900 dark:text-white truncate",children:e.name}),e.is_default&&(0,r.jsx)("span",{className:"px-1.5 py-0.5 text-xs bg-orange-100 dark:bg-orange-500/20 text-orange-600 dark:text-orange-400 rounded",children:"Default"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[e.scan_type&&(0,r.jsxs)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[I[e.scan_type]?.icon," ",I[e.scan_type]?.label]}),(0,r.jsxs)("span",{className:"flex items-center gap-1 text-xs text-slate-400",children:[(0,r.jsx)(d.A,{className:"w-3 h-3"}),e.usage_count," uses"]})]}),(0,r.jsxs)("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400 line-clamp-2",children:[e.prompt_text.substring(0,100),"..."]})]}),a&&(0,r.jsx)("button",{onClick:t=>u(t,e.id),disabled:i===e.id,className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded transition-colors",title:"Delete favorite",children:(0,r.jsx)(g.A,{className:`w-4 h-4 ${i===e.id?"animate-pulse":""}`})})]})},e.id))})})]})}function ea({prompt:e,onPromptChange:t,scanType:a,selectedCategories:s,favorites:n,onSaveFavorite:l,onLoadFavorite:i,onDeleteFavorite:o,userAllergies:d=[],isCollapsed:c=!0,onToggleCollapse:u,className:m=""}){let[g,p]=(0,h.useState)(!1),[f,x]=(0,h.useState)(!1),[y,b]=(0,h.useState)(!1),[k,w]=(0,h.useState)(""),[j,N]=(0,h.useState)({valid:!0}),C=(0,h.useCallback)(()=>ee(a,s,d),[a,s,d]);(0,h.useEffect)(()=>{p(e!==C())},[e,C]),(0,h.useEffect)(()=>{N(e&&0!==e.trim().length?e.length>4e3?{valid:!1,error:"Prompt cannot exceed 4000 characters"}:e.length<20?{valid:!1,error:"Prompt must be at least 20 characters"}:e.toLowerCase().includes("json")?{valid:!0}:{valid:!1,error:"Prompt should include JSON format instruction for proper results"}:{valid:!1,error:"Prompt cannot be empty"})},[e]);let S=async()=>{if(k.trim()){x(!0);try{await l(k.trim()),b(!1),w("")}finally{x(!1)}}},_=e.length,L=_>4e3?"text-red-500":_>3600?"text-yellow-500":"text-slate-400";return(0,r.jsxs)("div",{className:`border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden ${m}`,children:[(0,r.jsxs)("div",{onClick:u,className:"flex items-center justify-between px-4 py-3 bg-slate-50 dark:bg-slate-800/50 cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Scan Prompt"}),g&&(0,r.jsx)("span",{className:"px-2 py-0.5 text-xs bg-orange-100 dark:bg-orange-500/20 text-orange-600 dark:text-orange-400 rounded-full",children:"Modified"}),!j.valid&&(0,r.jsx)("span",{className:"px-2 py-0.5 text-xs bg-red-100 dark:bg-red-500/20 text-red-600 dark:text-red-400 rounded-full",children:"Invalid"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(et,{favorites:n,onSelect:i,onDelete:o}),g&&(0,r.jsxs)(A.$,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),t(C()),p(!1)},className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:[(0,r.jsx)(U.A,{className:"w-4 h-4 mr-1"}),"Reset"]}),(0,r.jsxs)(A.$,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),b(!0)},className:"text-orange-500 hover:text-orange-600",children:[(0,r.jsx)(Y.A,{className:"w-4 h-4 mr-1"}),"Save"]}),c?(0,r.jsx)(K.A,{className:"w-5 h-5 text-slate-400"}):(0,r.jsx)(Z.A,{className:"w-5 h-5 text-slate-400"})]})]}),!c&&(0,r.jsxs)("div",{className:"p-4 space-y-3",children:[(0,r.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),className:`
              w-full h-48 px-4 py-3 rounded-lg border resize-none
              bg-white dark:bg-slate-900
              text-slate-700 dark:text-slate-300
              text-sm font-mono
              focus:outline-none focus:ring-2 focus:ring-orange-500/50
              ${!j.valid?"border-red-300 dark:border-red-500":"border-slate-200 dark:border-slate-700"}
            `,placeholder:"Enter your custom scan prompt..."}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[!j.valid&&(0,r.jsx)("span",{className:"text-xs text-red-500",children:j.error}),(0,r.jsxs)("span",{className:`text-xs ${L} ml-auto`,children:[_.toLocaleString()," / ",4e3.toLocaleString()]})]})]}),y&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 w-full max-w-md mx-4 shadow-xl",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Save as Favorite"}),(0,r.jsx)("input",{type:"text",value:k,onChange:e=>w(e.target.value),placeholder:"Enter prompt name...",className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-700 dark:text-slate-300 mb-4",autoFocus:!0}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)(A.$,{variant:"ghost",onClick:()=>{b(!1),w("")},children:"Cancel"}),(0,r.jsx)(A.$,{onClick:S,disabled:!k.trim()||f,className:"bg-orange-500 hover:bg-orange-600 text-white",children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save"})]})]})})]})}var er=a(25990),es=a(80312);let en=(0,n.A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var el=a(57809),ei=a(85396);function eo(){let[e,t]=(0,h.useState)([]),[a,s]=(0,h.useState)(!0),n=(0,ei.d)();(0,h.useEffect)(()=>{l()},[]);let l=async()=>{try{let e=await _.api.getScanHistory({limit:10});t(e.scans)}catch(e){console.error("Failed to load scan history:",e)}finally{s(!1)}},i=async e=>{try{await _.api.deleteScan(e),t(t=>t.filter(t=>t.id!==e)),n.success("Scan deleted")}catch(e){n.error("Failed to delete scan")}},o=async e=>{try{let t=await _.api.rescanFromHistory(e);n.success(`Rescanned - found ${t.ingredients.length} items`),window.location.reload()}catch(e){n.error("Failed to rescan")}};return a?(0,r.jsx)("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Loading scan history..."}):0===e.length?null:(0,r.jsxs)(el.Zp,{className:"p-4",children:[(0,r.jsx)("h3",{className:"font-bold text-slate-900 dark:text-white mb-4",children:"Recent Scans"}),(0,r.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-2",children:e.map(e=>(0,r.jsxs)("div",{className:"relative flex-shrink-0 w-32 h-32 rounded-lg overflow-hidden bg-slate-100 dark:bg-slate-800 group",children:["video"===e.media_type?(0,r.jsx)("video",{src:e.media_url,className:"w-full h-full object-cover",muted:!0}):(0,r.jsx)("img",{src:e.media_url,alt:"Scan",className:"w-full h-full object-cover"}),(0,r.jsxs)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[(0,r.jsx)(A.$,{size:"icon",variant:"ghost",onClick:()=>o(e.id),className:"text-white hover:bg-white/20 w-8 h-8",title:"Rescan",children:(0,r.jsx)(er.A,{className:"w-4 h-4"})}),(0,r.jsx)(A.$,{size:"icon",variant:"ghost",onClick:()=>i(e.id),className:"text-white hover:bg-white/20 w-8 h-8",title:"Delete",children:(0,r.jsx)(g.A,{className:"w-4 h-4"})})]}),(0,r.jsx)("div",{className:"absolute top-2 right-2",children:"video"===e.media_type?(0,r.jsx)(es.A,{className:"w-4 h-4 text-white drop-shadow"}):(0,r.jsx)(en,{className:"w-4 h-4 text-white drop-shadow"})})]},e.id))})]})}var ed=a(88244),ec=a(69339);let eu={image:{icon:"\uD83D\uDCF8",label:"Image"},video:{icon:"\uD83C\uDFA5",label:"Video"}},em={pantry:{icon:"\uD83D\uDDC4️",label:"Pantry"},refrigerator:{icon:"❄️",label:"Fridge"},countertop:{icon:"\uD83C\uDF73",label:"Counter"}},eg={pantry:(0,r.jsx)(s.A,{className:"w-3 h-3"}),fridge:(0,r.jsx)(l,{className:"w-3 h-3"}),freezer:(0,r.jsx)(i.A,{className:"w-3 h-3"})},eh={expired:"bg-red-100 text-red-700 dark:bg-red-500/20 dark:text-red-400 border-red-200 dark:border-red-800",critical:"bg-orange-100 text-orange-700 dark:bg-orange-500/20 dark:text-orange-400 border-orange-200 dark:border-orange-800",soon:"bg-yellow-100 text-yellow-700 dark:bg-yellow-500/20 dark:text-yellow-400 border-yellow-200 dark:border-yellow-800",good:"bg-green-100 text-green-700 dark:bg-green-500/20 dark:text-green-400 border-green-200 dark:border-green-800",fresh:"bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800"};function ep(){let[e,t]=(0,h.useState)([]),[a,s]=(0,h.useState)(!0),[n,l]=(0,h.useState)(!1),[i,f]=(0,h.useState)([]),[x,y]=(0,h.useState)(new Set),[b,k]=(0,h.useState)("video"),[v,w]=(0,h.useState)("pantry"),[j,N]=(0,h.useState)(["all_items"]),[U,C]=(0,h.useState)(""),[S,L]=(0,h.useState)(!0),[F,E]=(0,h.useState)([]),[M,T]=(0,h.useState)(null),[R,$]=(0,h.useState)(new Map),[D,O]=(0,h.useState)(!0),{isReady:V,authenticated:G}=(0,ec.A)(),H=(0,ed.d)(),q=(0,p.useRouter)(),{getBatchShelfLife:Y,getDaysRemaining:K,getUrgencyLevel:Z,getStorageRecommendation:J,calculateExpiration:Q,loading:X}=function(){let[e,t]=(0,h.useState)(!1),[a,r]=(0,h.useState)(null),s=(0,h.useRef)(new Map),n=(0,h.useCallback)(e=>!!e&&Date.now()-e.timestamp<36e5,[]),l=(0,h.useCallback)(async(e,a)=>{let l=`${e.toLowerCase().trim()}-${a||"all"}`,i=s.current.get(l);if(n(i))return i.data;try{t(!0),r(null);let n=await _.api.getIngredientShelfLife(e,a);return s.current.set(l,{data:n,timestamp:Date.now()}),n}catch(e){return console.error("[useShelfLife] Failed to fetch shelf life:",e),r(e instanceof Error?e:Error("Failed to fetch shelf life")),null}finally{t(!1)}},[n]),i=(0,h.useCallback)(async(e,a)=>{let l=new Map,i=[];for(let t of e){let e=`${t.toLowerCase().trim()}-${a||"all"}`,r=s.current.get(e);n(r)?l.set(t,r.data):i.push(t)}if(i.length>0)try{t(!0),r(null);let e=i.map(e=>_.api.getIngredientShelfLife(e,a)),n=await Promise.all(e);i.forEach((e,t)=>{let r=n[t]||null,i=`${e.toLowerCase().trim()}-${a||"all"}`;s.current.set(i,{data:r,timestamp:Date.now()}),l.set(e,r)})}catch(e){console.error("[useShelfLife] Failed to fetch batch shelf life:",e),r(e instanceof Error?e:Error("Failed to fetch shelf life"))}finally{t(!1)}return l},[n]),o=(0,h.useCallback)((e,t)=>{let a=new Date(t||new Date);return a.setDate(a.getDate()+e),a},[]),d=(0,h.useCallback)(e=>{let t=new Date;return Math.ceil((e.getTime()-t.getTime())/864e5)},[]),c=(0,h.useCallback)(e=>e<0?"expired":e<=2?"critical":e<=5?"soon":e<=14?"good":"fresh",[]),u=(0,h.useCallback)(e=>{switch(e){case"expired":return"red";case"critical":return"orange";case"soon":return"yellow";case"good":return"green";case"fresh":return"emerald";default:return"gray"}},[]),m=(0,h.useCallback)(e=>e?`Best in ${e.best_storage}: ${e.best_shelf_life_days} days`:"Unknown",[]),g=(0,h.useCallback)(e=>{if(!e||!e.storage_options)return null;let t=e.best_storage,a=e.storage_options[t];return{storage:t,days:a?.shelf_life_days||e.best_shelf_life_days,tips:a?.tips}},[]),p=(0,h.useCallback)(e=>[...e].sort((e,t)=>(e.daysRemaining??(e.expiration_date?d(new Date(e.expiration_date)):999))-(t.daysRemaining??(t.expiration_date?d(new Date(t.expiration_date)):999))),[d]);return{getShelfLife:l,getBatchShelfLife:i,calculateExpiration:o,getDaysRemaining:d,getUrgencyLevel:c,getUrgencyColor:u,formatShelfLife:m,getStorageRecommendation:g,sortByUrgency:p,clearCache:(0,h.useCallback)(()=>{s.current.clear()},[]),loading:e,error:a}}(),et=(0,h.useCallback)(async()=>{if(!G)return void s(!1);try{let e=await _.api.getIngredients();t(e)}catch(e){console.error("Failed to load ingredients:",e),H.error("Failed to load ingredients","Please try refreshing the page")}finally{s(!1)}},[G]),er=(0,h.useCallback)(async()=>{if(0===e.length)return;let t=e.map(e=>e.name);$(await Y(t))},[e,Y]);(0,h.useEffect)(()=>{e.length>0&&D&&er()},[e,D,er]);let es=(0,h.useCallback)(e=>{let t=R.get(e.name);if(!t)return null;let a=J(t);if(!a)return null;let r=e.scanned_at?new Date(e.scanned_at):new Date,s=Q(a.days,r),n=K(s),l=Z(n);return{bestStorage:a.storage,shelfLifeDays:a.days,tips:a.tips,expirationDate:s,daysRemaining:n,urgency:l}},[R,J,Q,K,Z]),en=(0,h.useMemo)(()=>D?[...e].sort((e,t)=>{let a=es(e),r=es(t);return a||r?a?r?a.daysRemaining-r.daysRemaining:-1:1:0}):e,[e,D,es]),ei=(0,h.useCallback)(async()=>{if(G)try{let a=await _.api.getProfile();if(!a)return;if(T(a),a.default_scan_categories&&a.default_scan_categories.length>0)N(a.default_scan_categories);else if(a.scan_preferences){var e,t;let r=["all_items"];if(a.scan_preferences.preselect_dietary&&a.dietary_restrictions){let t,s=(e=a.dietary_restrictions,t={Vegetarian:"vegetarian",Vegan:"vegan","Gluten-Free":"gluten_free","Dairy-Free":"dairy_free","Nut-Free":"nut_free","Low-Carb":"keto",Keto:"keto",Paleo:"paleo"},e.map(e=>t[e]).filter(e=>void 0!==e));r.push(...s)}if(a.scan_preferences.preselect_allergies&&a.allergies){let e,s,n=(t=a.allergies,e={peanuts:"nut_free","tree nuts":"nut_free",nuts:"nut_free",almonds:"nut_free",walnuts:"nut_free",cashews:"nut_free",dairy:"dairy_free",milk:"dairy_free",lactose:"dairy_free",gluten:"gluten_free",wheat:"gluten_free",celiac:"gluten_free"},s=new Set,t.forEach(t=>{let a=t.toLowerCase();Object.entries(e).forEach(([e,t])=>{a.includes(e)&&s.add(t)})}),Array.from(s));r.push(...n)}r.length>1&&N(r.filter(e=>"all_items"!==e))}}catch(e){console.error("Failed to load user profile:",e)}},[G]),ep=(0,h.useCallback)(async()=>{if(G)try{let e=await _.api.getFavoritePrompts();E(e)}catch(e){console.error("Failed to load favorite prompts:",e)}},[G]);(0,h.useEffect)(()=>{V&&(et(),ei(),ep())},[V,et,ei,ep]),(0,h.useEffect)(()=>{C(ee(v,j,M?.allergies||[]))},[v,j,M?.allergies]);let ef=(0,h.useCallback)(e=>{f(t=>[...t,{name:e.name,quantity:e.quantity,unit:e.unit,category:"other",freshness:"fresh",confidence:1}]),H.success("Ingredient added",`${e.name} added to pending items`)},[H]),ex=async()=>{let e=i.filter((e,t)=>x.has(t));if(0===e.length)return void H.error("No items selected","Please validate at least one item");l(!0);try{await _.api.saveIngredients(e),f([]),y(new Set),await et(),H.success("Ingredients saved",`Added ${e.length} items to your inventory`)}catch(e){console.error("Failed to save ingredients:",e),H.error("Failed to save ingredients","Please try again")}finally{l(!1)}},ey=async()=>{if(0===e.length)return void H.error("No ingredients available","Please scan or add ingredients first");l(!0);try{let t=await _.api.startCookingFromIngredients(e);q.push(`/cook?id=${t.id}`)}catch(e){console.error("Failed to start cooking:",e),H.error("Failed to start cooking","Please try again")}finally{l(!1)}},eb=async e=>{try{await _.api.deleteIngredient(e),t(t=>t.filter(t=>t.id!==e)),H.success("Ingredient removed","Item deleted from your inventory")}catch(e){console.error("Failed to delete ingredient:",e),H.error("Failed to delete ingredient","Please try again")}},ek=async e=>{try{await _.api.saveFavoritePrompt({name:e,prompt_text:U,scan_type:v,categories:j}),await ep(),H.success("Prompt saved",`"${e}" has been added to your favorites`)}catch(e){throw console.error("Failed to save favorite prompt:",e),H.error("Failed to save prompt","Please try again"),e}},ev=async e=>{try{await _.api.deleteFavoritePrompt(e),E(t=>t.filter(t=>t.id!==e)),H.success("Prompt deleted","Favorite prompt has been removed")}catch(e){throw console.error("Failed to delete favorite prompt:",e),H.error("Failed to delete prompt","Please try again"),e}};return!V||a?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,r.jsx)(z.k,{size:"lg",text:"Loading scanner..."})}):(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-black text-slate-900 dark:text-white",children:[I[v].icon," ",I[v].label," Scanner"]}),(0,r.jsx)("p",{className:"text-slate-600 dark:text-slate-400",children:"Scan items to update your available ingredients."})]}),(0,r.jsxs)("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.length," items in inventory"]})]}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsx)(P,{onScanComplete:e=>{f(e.ingredients),y(new Set(e.ingredients.map((e,t)=>t)))},scanType:v,inputType:b,categories:j,customPrompt:U,enableVoice:!1,enableLiveMode:!1,captureInterval:3e3})}),e.length>0&&(0,r.jsx)(el.Zp,{className:"p-4 bg-gradient-to-br from-brand-orange/10 to-brand-teal/10 border-brand-orange/20",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Ready to Cook?"}),(0,r.jsxs)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Start cooking with your ",e.length," available ingredients"]})]}),(0,r.jsxs)(A.$,{onClick:ey,disabled:n,className:"bg-gradient-to-r from-brand-orange to-brand-teal",children:[(0,r.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Start Cooking"]})]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Input"}),(0,r.jsx)("div",{className:"flex gap-1 p-1 bg-slate-200 dark:bg-slate-700 rounded-xl",children:["image","video"].map(e=>(0,r.jsxs)("button",{onClick:()=>k(e),className:`flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${b===e?"bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:[eu[e].icon," ",eu[e].label]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Scan Location"}),(0,r.jsx)("div",{className:"flex gap-1 p-1 bg-slate-200 dark:bg-slate-700 rounded-xl",children:["pantry","refrigerator","countertop"].map(e=>(0,r.jsxs)("button",{onClick:()=>w(e),className:`flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${v===e?"bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:[em[e].icon," ",em[e].label]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Scan Filters"}),(0,r.jsx)(B,{selectedCategories:j,onCategoriesChange:N,userDietaryRestrictions:M?.dietary_restrictions,userAllergies:M?.allergies})]}),(0,r.jsx)(ea,{prompt:U,onPromptChange:C,scanType:v,selectedCategories:j,favorites:F,onSaveFavorite:ek,onLoadFavorite:e=>{C(e.prompt_text),e.scan_type&&w(e.scan_type),e.categories&&e.categories.length>0&&N(e.categories),_.api.updateFavoritePrompt(e.id,{increment_usage:!0}).catch(console.error)},onDeleteFavorite:ev,userAllergies:M?.allergies,isCollapsed:S,onToggleCollapse:()=>L(!S)})]}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h2",{className:"font-bold text-lg text-slate-900 dark:text-white",children:["Inventoried Items (",e.length,")"]}),(0,r.jsxs)(A.$,{variant:"ghost",size:"sm",onClick:()=>O(!D),className:"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white",children:[(0,r.jsx)(d.A,{className:"w-4 h-4 mr-2"}),D?"Hide":"Show"," Shelf Life"]})]})}),(0,r.jsx)(el.Zp,{className:"p-4",children:(0,r.jsx)(W,{onAddIngredient:ef})}),i.length>0&&(0,r.jsxs)(el.Zp,{className:"p-4 space-y-4 border-orange-200 dark:border-orange-800 bg-orange-50 dark:bg-orange-950",children:[(0,r.jsxs)("h3",{className:"font-bold text-orange-800 dark:text-orange-400",children:[i.length," items detected"]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:i.map((e,t)=>(0,r.jsxs)("label",{className:"px-3 py-1.5 bg-white dark:bg-slate-800 text-slate-900 dark:text-white rounded-full text-sm font-medium shadow-sm flex items-center gap-2 group cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[(0,r.jsx)("input",{type:"checkbox",checked:x.has(t),onChange:()=>{y(e=>{let a=new Set(e);return a.has(t)?a.delete(t):a.add(t),a})},className:"w-4 h-4 text-brand-orange rounded border-slate-300 dark:border-slate-600 focus:ring-brand-orange cursor-pointer"}),(0,r.jsx)("span",{className:x.has(t)?"font-semibold":"",children:e.name}),(0,r.jsxs)("span",{className:"text-xs text-slate-500",children:[e.quantity," ",e.unit]}),e.freshness&&(0,r.jsx)("span",{className:`text-xs px-1.5 py-0.5 rounded ${"fresh"===e.freshness?"bg-green-100 text-green-700 dark:bg-green-500/20 dark:text-green-400":"expiring"===e.freshness?"bg-yellow-100 text-yellow-700 dark:bg-yellow-500/20 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-500/20 dark:text-red-400"}`,children:e.freshness}),(0,r.jsx)("button",{onClick:e=>{e.preventDefault(),f(e=>e.filter((e,a)=>a!==t)),y(e=>{let a=new Set;return e.forEach(e=>{e<t?a.add(e):e>t&&a.add(e-1)}),a})},disabled:n,className:"ml-1 p-0.5 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-colors opacity-60 hover:opacity-100 disabled:opacity-30","aria-label":`Remove ${e.name}`,type:"button",children:(0,r.jsx)(c.A,{className:"w-3.5 h-3.5 text-slate-500 dark:text-slate-400"})})]},t))}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)(A.$,{onClick:ex,disabled:n,className:"flex-1",children:[(0,r.jsx)(u.A,{className:"w-4 h-4 mr-2"}),n?"Saving...":"Add to Inventory"]}),(0,r.jsx)(A.$,{variant:"outline",onClick:()=>f([]),className:"text-slate-600 dark:text-slate-400",children:"Clear"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(el.Zp,{className:"p-4 min-h-[200px]",children:0===e.length?(0,r.jsx)("div",{className:"h-full flex items-center justify-center text-slate-600 dark:text-slate-400 text-center p-8",children:(0,r.jsx)("p",{children:"No ingredients yet. Use the scanner above to add items!"})}):(0,r.jsx)("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:en.map(e=>{let t=D?es(e):null;return(0,r.jsxs)("div",{className:`flex items-center justify-between p-3 rounded-xl group transition-colors ${t?`border ${eh[t.urgency]}`:"bg-slate-50 dark:bg-slate-800"}`,children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-medium text-slate-900 dark:text-white truncate",children:e.name}),(0,r.jsxs)("span",{className:"text-slate-600 dark:text-slate-400 text-sm flex-shrink-0",children:[e.quantity," ",e.unit]})]}),D&&t&&(0,r.jsxs)("div",{className:"flex items-center gap-3 mt-1.5 text-xs",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(d.A,{className:"w-3 h-3"}),t.daysRemaining<0?`Expired ${Math.abs(t.daysRemaining)}d ago`:0===t.daysRemaining?"Expires today":`${t.daysRemaining}d left`]}),(0,r.jsxs)("span",{className:"flex items-center gap-1 text-slate-500 dark:text-slate-400",children:[eg[t.bestStorage],(0,r.jsx)("span",{className:"capitalize",children:t.bestStorage})]}),t.tips&&(0,r.jsx)("span",{className:"flex items-center gap-1 cursor-help text-slate-400 dark:text-slate-500",title:t.tips,children:(0,r.jsx)(m.A,{className:"w-3 h-3"})})]}),D&&!t&&X&&(0,r.jsxs)("div",{className:"flex items-center gap-1 mt-1.5 text-xs text-slate-400",children:[(0,r.jsx)(z.k,{size:"sm"}),(0,r.jsx)("span",{children:"Loading shelf life..."})]})]}),(0,r.jsx)(A.$,{variant:"ghost",size:"icon",onClick:()=>eb(e.id),"aria-label":`Delete ${e.name} from inventory`,className:"opacity-0 group-hover:opacity-100 transition-opacity text-red-500 dark:text-red-400 hover:text-red-600 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-950 flex-shrink-0",children:(0,r.jsx)(g.A,{className:"w-4 h-4"})})]},e.id)})})}),D&&e.length>0&&(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["expired","critical","soon","good"].map(e=>{let t=en.filter(t=>{let a=es(t);return a?.urgency===e}).length;return 0===t?null:(0,r.jsxs)("div",{className:`p-3 rounded-lg border ${eh[e]}`,children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t}),(0,r.jsx)("div",{className:"text-xs opacity-80",children:{expired:"Expired",critical:"Use Now (1-2d)",soon:"Use Soon (3-5d)",good:"Good (6-14d)"}[e]})]},e)})}),(0,r.jsx)(eo,{})]})]})}},57798:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},58915:(e,t,a)=>{"use strict";a.d(t,{k:()=>s});var r=a(55155);function s({size:e="md",text:t="AI is Thinking..."}){return(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,r.jsxs)("div",{className:`relative ${{sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"}[e]}`,children:[(0,r.jsx)("div",{className:"absolute inset-0 border-4 border-orange-200 rounded-full"}),(0,r.jsx)("div",{className:"absolute inset-0 border-4 border-orange-500 rounded-full border-t-transparent animate-spin"})]}),t&&(0,r.jsx)("p",{className:"text-xs font-bold uppercase tracking-widest text-orange-500 animate-pulse",children:t})]})}},67649:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},69339:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(21555),s=a(15885);function n(){let[e,t]=(0,r.useState)(null),[a,n]=(0,r.useState)(!0),[l,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),c=(0,r.useCallback)(async()=>{try{let e=(0,s.getSupabase)(),{data:a,error:r}=await e.auth.refreshSession();if(r)return console.error("[useAuth] Refresh error:",r),!1;if(!a?.session)return console.error("[useAuth] No session returned after refresh"),!1;return d(a.session),t(a.session.user),console.log("[useAuth] Session refreshed successfully"),!0}catch(e){return console.error("[useAuth] Failed to refresh:",e),!1}},[]);return(0,r.useEffect)(()=>{s.api.getUser().then(({data:{user:e}})=>{t(e),n(!1),i(!0)}).catch(()=>{n(!1),i(!0)});let{data:{subscription:e}}=s.api.onAuthStateChange(async(e,a)=>{console.log("[useAuth] Auth state change:",e),"TOKEN_REFRESHED"===e&&console.log("[useAuth] Token refreshed successfully"),d(a),t(a?.user??null),n(!1),i(!0)});return()=>e.unsubscribe()},[]),{user:e,session:o,loading:a,isReady:l,authenticated:!!e,refreshSession:c,signOut:()=>s.api.signOut()}}},73522:(e,t,a)=>{Promise.resolve().then(a.bind(a,57026))},78562:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},80312:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},81065:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("mic-off",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]])},85396:(e,t,a)=>{"use strict";a.d(t,{d:()=>r.d});var r=a(88244)},88102:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(18889).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},88244:(e,t,a)=>{"use strict";a.d(t,{d:()=>u,t:()=>p});var r=a(55155),s=a(39156),n=a(62649),l=a(67649),i=a(75686),o=a(44746),d=a(21555);let c=(0,d.createContext)(void 0);function u(){let e=(0,d.useContext)(c);if(!e)throw Error("useToast must be used within a ToastProvider");return e}let m={success:s.A,error:n.A,warning:l.A,info:i.A},g={success:{bg:"bg-green-50 dark:bg-green-500/10",border:"border-green-200 dark:border-green-500/20",icon:"text-green-500",title:"text-green-800 dark:text-green-200",message:"text-green-700 dark:text-green-300"},error:{bg:"bg-red-50 dark:bg-red-500/10",border:"border-red-200 dark:border-red-500/20",icon:"text-red-500",title:"text-red-800 dark:text-red-200",message:"text-red-700 dark:text-red-300"},warning:{bg:"bg-yellow-50 dark:bg-yellow-500/10",border:"border-yellow-200 dark:border-yellow-500/20",icon:"text-yellow-500",title:"text-yellow-800 dark:text-yellow-200",message:"text-yellow-700 dark:text-yellow-300"},info:{bg:"bg-blue-50 dark:bg-blue-500/10",border:"border-blue-200 dark:border-blue-500/20",icon:"text-blue-500",title:"text-blue-800 dark:text-blue-200",message:"text-blue-700 dark:text-blue-300"}};function h({toast:e,onRemove:t}){let a=m[e.type],s=g[e.type];return(0,d.useEffect)(()=>{let a=e.duration??5e3;if(a>0){let e=setTimeout(t,a);return()=>clearTimeout(e)}},[e.duration,t]),(0,r.jsxs)("div",{className:`${s.bg} ${s.border} border rounded-xl p-4 shadow-lg backdrop-blur-sm animate-slide-in-right flex items-start gap-3 max-w-sm w-full`,role:"alert","aria-live":"polite",children:[(0,r.jsx)(a,{className:`w-5 h-5 ${s.icon} flex-shrink-0 mt-0.5`}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:`font-medium text-sm ${s.title}`,children:e.title}),e.message&&(0,r.jsx)("p",{className:`text-sm mt-1 ${s.message}`,children:e.message})]}),(0,r.jsx)("button",{onClick:t,className:"p-1 hover:bg-black/5 dark:hover:bg-white/10 rounded-lg transition-colors flex-shrink-0","aria-label":"Dismiss notification",children:(0,r.jsx)(o.A,{className:"w-4 h-4 text-gray-400"})})]})}function p({children:e}){let[t,a]=(0,d.useState)([]),s=(0,d.useCallback)(e=>{let t=Math.random().toString(36).substring(2,9);a(a=>[...a,{...e,id:t}])},[]),n=(0,d.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]),l=(0,d.useCallback)((e,t)=>s({type:"success",title:e,message:t}),[s]),i=(0,d.useCallback)((e,t)=>s({type:"error",title:e,message:t}),[s]),o=(0,d.useCallback)((e,t)=>s({type:"warning",title:e,message:t}),[s]),u=(0,d.useCallback)((e,t)=>s({type:"info",title:e,message:t}),[s]);return(0,r.jsxs)(c.Provider,{value:{toasts:t,addToast:s,removeToast:n,success:l,error:i,warning:o,info:u},children:[e,(0,r.jsx)("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2 pointer-events-none",role:"region","aria-label":"Notifications","aria-live":"polite",children:t.map(e=>(0,r.jsx)("div",{className:"pointer-events-auto",children:(0,r.jsx)(h,{toast:e,onRemove:()=>n(e.id)})},e.id))})]})}},93842:(e,t,a)=>{"use strict";a.d(t,{p:()=>l,V:()=>i});var r=a(21555);function s(){return"u">typeof navigator&&void 0!==navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia}function n(e){return"https:"===window.location.protocol||"localhost"===window.location.hostname||window.location.hostname.startsWith("127.")?s()?e instanceof Error?"NotAllowedError"===e.name||"PermissionDeniedError"===e.name?"Camera permission denied. Please allow camera access in your browser settings.":"NotFoundError"===e.name||"DevicesNotFoundError"===e.name?"No camera found on this device.":"NotReadableError"===e.name||"TrackStartError"===e.name?"Camera is already in use by another application.":"OverconstrainedError"===e.name||"ConstraintNotSatisfiedError"===e.name?"Camera does not meet the required specifications.":"TypeError"===e.name?"Camera access is not available. Please check your connection and browser settings.":e.message||"Failed to access camera":"Failed to access camera. Please check your browser permissions.":"Your browser does not support camera access. Please use a modern browser like Chrome, Safari, or Firefox.":"Camera access requires HTTPS. Please access the app via https:// instead of http://"}let l={ultraLow:{width:320,height:240,quality:.2},low:{width:480,height:360,quality:.3},medium:{width:640,height:480,quality:.5},high:{width:1280,height:720,quality:.7}};function i(e={}){let t=e.preset?l[e.preset]:null,{facingMode:a="environment",width:o=t?.width??480,height:d=t?.height??360,quality:c=t?.quality??.3}=e,u=(0,r.useRef)(null),m=(0,r.useRef)(null),g=(0,r.useRef)(null),[h,p]=(0,r.useState)(!1),[f,x]=(0,r.useState)(null),[y,b]=(0,r.useState)(null),k=(0,r.useCallback)(async()=>{try{if(x(null),!s()){let e=n();x(e),b(!1),console.error("Camera not supported:",e);return}let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:a,width:{ideal:o},height:{ideal:d}}});g.current=e,u.current&&(u.current.srcObject=e,await u.current.play()),p(!0),b(!0)}catch(e){x(n(e)),b(!1),console.error("Camera error:",e)}},[a,o,d]),v=(0,r.useCallback)(()=>{g.current&&(g.current.getTracks().forEach(e=>e.stop()),g.current=null),u.current&&(u.current.srcObject=null),p(!1)},[]),w=(0,r.useCallback)(()=>{if(!u.current||!m.current)return console.warn("[Camera] Video or canvas ref not available"),null;let e=u.current,t=m.current;if(e.readyState<2)return console.warn("[Camera] Video not ready (readyState:",e.readyState,")"),null;if(0===e.videoWidth||0===e.videoHeight)return console.warn("[Camera] Video has no dimensions yet"),null;let a=t.getContext("2d");if(!a)return console.warn("[Camera] Could not get canvas context"),null;t.width=e.videoWidth||o,t.height=e.videoHeight||d,a.drawImage(e,0,0,t.width,t.height);try{return t.toDataURL("image/webp",c)}catch{return t.toDataURL("image/jpeg",c)}},[o,d,c]),j=(0,r.useCallback)(async(e=3e3)=>g.current?new Promise(t=>{let a=new MediaRecorder(g.current,{mimeType:"video/webm;codecs=vp8",videoBitsPerSecond:25e4}),r=[];a.ondataavailable=e=>{e.data.size>0&&r.push(e.data)},a.onstop=async()=>{let e=new Blob(r,{type:"video/webm"}),a=new FileReader;a.onloadend=()=>{t(a.result)},a.onerror=()=>{console.error("[Camera] Failed to convert video to base64"),t(null)},a.readAsDataURL(e)},a.start(),setTimeout(()=>{"recording"===a.state&&a.stop()},e)}):(console.warn("[Camera] No active stream for video recording"),null),[]);return(0,r.useEffect)(()=>()=>{v()},[v]),{videoRef:u,canvasRef:m,isActive:h,error:f,hasPermission:y,startCamera:k,stopCamera:v,captureFrame:w,captureVideo:j}}}},e=>{e.O(0,[9731,9631,7139,5101,5885,9889,6939,1170,7358],()=>e(e.s=73522)),_N_E=e.O()}]);