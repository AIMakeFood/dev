(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7181],{6885:(e,a,t)=>{Promise.resolve().then(t.bind(t,71855))},11778:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},13851:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},18546:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},18889:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var r=t(21555);let s=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},l=(...e)=>e.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim();var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:d="",children:n,iconNode:o,...c},x)=>(0,r.createElement)("svg",{ref:x,...i,width:a,height:a,stroke:e,strokeWidth:s?24*Number(t)/Number(a):t,className:l("lucide",d),...!n&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(c)&&{"aria-hidden":"true"},...c},[...o.map(([e,a])=>(0,r.createElement)(e,a)),...Array.isArray(n)?n:[n]])),n=(e,a)=>{let t=(0,r.forwardRef)(({className:t,...i},n)=>(0,r.createElement)(d,{ref:n,iconNode:a,className:l(`lucide-${s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,t),...i}));return t.displayName=s(e),t}},22951:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},25699:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},32468:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},33444:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},39156:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},44643:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},44746:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},45681:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},45723:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},50497:(e,a,t)=>{"use strict";var r=t(60685);t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},50536:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},62649:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},67649:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},69339:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var r=t(21555),s=t(15885);function l(){let[e,a]=(0,r.useState)(null),[t,l]=(0,r.useState)(!0),[i,d]=(0,r.useState)(!1),[n,o]=(0,r.useState)(null),c=(0,r.useCallback)(async()=>{try{let e=(0,s.getSupabase)(),{data:t,error:r}=await e.auth.refreshSession();if(r)return console.error("[useAuth] Refresh error:",r),!1;if(!t?.session)return console.error("[useAuth] No session returned after refresh"),!1;return o(t.session),a(t.session.user),console.log("[useAuth] Session refreshed successfully"),!0}catch(e){return console.error("[useAuth] Failed to refresh:",e),!1}},[]);return(0,r.useEffect)(()=>{s.api.getUser().then(({data:{user:e}})=>{a(e),l(!1),d(!0)}).catch(()=>{l(!1),d(!0)});let{data:{subscription:e}}=s.api.onAuthStateChange(async(e,t)=>{console.log("[useAuth] Auth state change:",e),"TOKEN_REFRESHED"===e&&console.log("[useAuth] Token refreshed successfully"),o(t),a(t?.user??null),l(!1),d(!0)});return()=>e.unsubscribe()},[]),{user:e,session:n,loading:t,isReady:i,authenticated:!!e,refreshSession:c,signOut:()=>s.api.signOut()}}},69811:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},71855:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>P});var r=t(55155),s=t(50536),l=t(18889);let i=(0,l.A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var d=t(18546),n=t(83425),o=t(44643),c=t(39156),x=t(67649),h=t(13851),m=t(32468),u=t(45681),b=t(25699),g=t(22951),y=t(69811),p=t(33444);let f=(0,l.A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var k=t(11778),w=t(45723),v=t(3948),j=t.n(v),N=t(50497),A=t(21555),S=t(88244),C=t(69339),E=t(15885);let M={profileVisibility:"private",shareCookingStats:!1,shareRecipeFavorites:!1,allowAnalytics:!0,allowPersonalization:!0,dataRetentionDays:365,proxyEmailEnabled:!1,piiProtection:{maskEmail:!0,maskName:!1,hideFromSearch:!0,useProxyEmail:!1,redactOnExport:!1},marketingEmails:!1,productUpdates:!0,securityAlerts:!0};function P(){let e=(0,N.useRouter)(),{authenticated:a,loading:t,user:l}=(0,C.A)(),v=(0,S.d)(),[P,D]=(0,A.useState)(!0),[$,R]=(0,A.useState)("idle"),[F,_]=(0,A.useState)(M),[z,T]=(0,A.useState)(!1),[O,V]=(0,A.useState)(!1),[L,q]=(0,A.useState)(""),[H,U]=(0,A.useState)(!1),[I,W]=(0,A.useState)(!1),Y=(0,A.useCallback)(async()=>{try{let e=await E.api.getProfile();e?.privacy_settings&&_({...M,...e.privacy_settings})}catch(e){console.error("Failed to load privacy settings:",e)}finally{D(!1)}},[]);(0,A.useEffect)(()=>{t||a?a&&Y():e.push("/login")},[a,t,e,Y]);let B=async e=>{R("saving");try{await E.api.updatePreferences({privacy_settings:e}),_(e),R("saved"),setTimeout(()=>R("idle"),2e3)}catch(e){console.error("Failed to save settings:",e),R("error"),setTimeout(()=>R("idle"),3e3)}},J=(e,a)=>{let t={...F,[e]:a};_(t),B(t)},K=(e,a)=>{let t={...F,piiProtection:{...F.piiProtection,[e]:a}};_(t),B(t)},Z=async()=>{W(!0);try{let[e,a,t]=await Promise.all([E.api.getProfile(),E.api.getIngredients().catch(()=>[]),E.api.getMealHistory().catch(()=>[])]),r={exportDate:new Date().toISOString(),profile:{email:l?.email,created_at:e?.created_at,subscription_tier:e?.subscription_tier,skill_level:e?.skill_level,dietary_restrictions:e?.dietary_restrictions,privacy_settings:F},ingredients:a,mealHistory:t},s=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),i=URL.createObjectURL(s),d=document.createElement("a");d.href=i,d.download=`aimakefood-data-export-${new Date().toISOString().split("T")[0]}.json`,d.click(),URL.revokeObjectURL(i),T(!1)}catch(e){console.error("Export failed:",e)}finally{W(!1)}},G=async()=>{if("DELETE"===L){U(!0);try{await E.api.requestAccountDeletion?.(),v.success("Request submitted","You will receive a confirmation email within 24 hours."),V(!1)}catch(e){console.error("Deletion request failed:",e),v.error("Request failed","Failed to submit deletion request. Please contact support.")}finally{U(!1)}}};if(t||P)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(s.A,{className:"w-8 h-8 animate-spin text-brand-orange"})});let Q=[{value:"public",label:"Public",icon:(0,r.jsx)(i,{className:"w-5 h-5"}),description:"Anyone can see your profile and cooking stats"},{value:"friends",label:"Friends Only",icon:(0,r.jsx)(d.A,{className:"w-5 h-5"}),description:"Only people you follow can see your profile"},{value:"private",label:"Private",icon:(0,r.jsx)(n.A,{className:"w-5 h-5"}),description:"Only you can see your profile information"}];return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-brand-dark py-8 px-4",children:[(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)(j(),{href:"/settings",className:"flex items-center gap-2 text-gray-500 hover:text-brand-orange",children:[(0,r.jsx)(o.A,{className:"w-4 h-4"}),"Back to Settings"]}),"idle"!==$&&(0,r.jsxs)("div",{className:`flex items-center gap-2 text-sm ${"saving"===$?"text-gray-500":"saved"===$?"text-green-600":"text-red-600"}`,children:["saving"===$&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.A,{className:"w-4 h-4 animate-spin"}),"Saving..."]}),"saved"===$&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.A,{className:"w-4 h-4"}),"Saved"]}),"error"===$&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.A,{className:"w-4 h-4"}),"Failed to save"]})]})]}),(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Privacy Settings"}),(0,r.jsxs)("div",{className:"bg-white dark:bg-white/5 rounded-2xl shadow-xl border border-gray-200 dark:border-white/10 p-6 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-brand-orange/10 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,r.jsx)(h.A,{className:"w-6 h-6 text-brand-orange"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-1",children:"Profile Visibility"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Control who can see your profile and cooking activity"})]})]}),(0,r.jsx)("div",{className:"space-y-3",children:Q.map(e=>(0,r.jsxs)("label",{className:`flex items-center gap-4 p-4 rounded-xl border cursor-pointer transition-all ${F.profileVisibility===e.value?"border-brand-orange bg-brand-orange/5":"border-gray-200 dark:border-white/10 hover:border-brand-orange/50"}`,children:[(0,r.jsx)("input",{type:"radio",name:"visibility",value:e.value,checked:F.profileVisibility===e.value,onChange:()=>J("profileVisibility",e.value),className:"sr-only"}),(0,r.jsx)("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${F.profileVisibility===e.value?"bg-brand-orange text-white":"bg-gray-100 dark:bg-white/10 text-gray-500"}`,children:e.icon}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-medium",children:e.label}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.description})]}),F.profileVisibility===e.value&&(0,r.jsx)(c.A,{className:"w-5 h-5 text-brand-orange"})]},e.value))})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-white/5 rounded-2xl shadow-xl border border-gray-200 dark:border-white/10 p-6 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-brand-teal/10 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,r.jsx)(m.A,{className:"w-6 h-6 text-brand-teal"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-1",children:"Personal Information Protection"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Control how your personal information is displayed to others"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-white/5 rounded-xl",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(u.A,{className:"w-5 h-5 text-gray-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"Mask Email Address"}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Show as j***@example.com instead of full email"})]})]}),(0,r.jsx)("button",{onClick:()=>K("maskEmail",!F.piiProtection.maskEmail),role:"switch","aria-checked":F.piiProtection.maskEmail,"aria-label":"Mask email address",className:`relative w-12 h-6 rounded-full transition-colors ${F.piiProtection.maskEmail?"bg-brand-orange":"bg-gray-300 dark:bg-white/20"}`,children:(0,r.jsx)("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${F.piiProtection.maskEmail?"translate-x-7":"translate-x-1"}`})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-white/5 rounded-xl",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(b.A,{className:"w-5 h-5 text-gray-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"Mask Display Name"}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Show as J*** D*** instead of full name"})]})]}),(0,r.jsx)("button",{onClick:()=>K("maskName",!F.piiProtection.maskName),role:"switch","aria-checked":F.piiProtection.maskName,"aria-label":"Mask display name",className:`relative w-12 h-6 rounded-full transition-colors ${F.piiProtection.maskName?"bg-brand-orange":"bg-gray-300 dark:bg-white/20"}`,children:(0,r.jsx)("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${F.piiProtection.maskName?"translate-x-7":"translate-x-1"}`})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-white/5 rounded-xl",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(g.A,{className:"w-5 h-5 text-gray-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"Hide from Search"}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Don't appear in public user searches"})]})]}),(0,r.jsx)("button",{onClick:()=>K("hideFromSearch",!F.piiProtection.hideFromSearch),role:"switch","aria-checked":F.piiProtection.hideFromSearch,"aria-label":"Hide from search",className:`relative w-12 h-6 rounded-full transition-colors ${F.piiProtection.hideFromSearch?"bg-brand-orange":"bg-gray-300 dark:bg-white/20"}`,children:(0,r.jsx)("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${F.piiProtection.hideFromSearch?"translate-x-7":"translate-x-1"}`})})]})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-white/5 rounded-2xl shadow-xl border border-gray-200 dark:border-white/10 p-6 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-500/10 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,r.jsx)(y.A,{className:"w-6 h-6 text-purple-500"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-1",children:"Data Sharing"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Control how your data is used and shared"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-white/5 rounded-xl",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"Share Cooking Stats"}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Allow your cooking statistics to be visible on leaderboards"})]}),(0,r.jsx)("button",{onClick:()=>J("shareCookingStats",!F.shareCookingStats),role:"switch","aria-checked":F.shareCookingStats,"aria-label":"Share cooking stats",className:`relative w-12 h-6 rounded-full transition-colors ${F.shareCookingStats?"bg-brand-orange":"bg-gray-300 dark:bg-white/20"}`,children:(0,r.jsx)("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${F.shareCookingStats?"translate-x-7":"translate-x-1"}`})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-white/5 rounded-xl",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"Analytics"}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Help improve AI Make Food with anonymous usage data"})]}),(0,r.jsx)("button",{onClick:()=>J("allowAnalytics",!F.allowAnalytics),role:"switch","aria-checked":F.allowAnalytics,"aria-label":"Allow analytics",className:`relative w-12 h-6 rounded-full transition-colors ${F.allowAnalytics?"bg-brand-orange":"bg-gray-300 dark:bg-white/20"}`,children:(0,r.jsx)("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${F.allowAnalytics?"translate-x-7":"translate-x-1"}`})})]})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-white/5 rounded-2xl shadow-xl border border-gray-200 dark:border-white/10 p-6 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-500/10 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,r.jsx)(p.A,{className:"w-6 h-6 text-blue-500"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-1",children:"Data Retention"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Control how long we keep your cooking history"})]})]}),(0,r.jsx)("div",{className:"space-y-2",children:[{value:30,label:"30 days"},{value:90,label:"90 days"},{value:180,label:"6 months"},{value:365,label:"1 year"},{value:"forever",label:"Keep forever"}].map(e=>(0,r.jsxs)("label",{className:`flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all ${F.dataRetentionDays===e.value?"border-brand-orange bg-brand-orange/5":"border-gray-200 dark:border-white/10 hover:border-brand-orange/50"}`,children:[(0,r.jsx)("input",{type:"radio",name:"retention",value:e.value,checked:F.dataRetentionDays===e.value,onChange:()=>J("dataRetentionDays",e.value),className:"sr-only"}),(0,r.jsx)("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${F.dataRetentionDays===e.value?"border-brand-orange":"border-gray-300 dark:border-white/30"}`,children:F.dataRetentionDays===e.value&&(0,r.jsx)("div",{className:"w-2 h-2 bg-brand-orange rounded-full"})}),(0,r.jsx)("span",{className:"font-medium",children:e.label})]},e.value))}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"Note: Meal history older than this period will be automatically deleted. This does not affect your account or subscription data."})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-white/5 rounded-2xl shadow-xl border border-gray-200 dark:border-white/10 p-6",children:[(0,r.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gray-500/10 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,r.jsx)(f,{className:"w-6 h-6 text-gray-500"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-1",children:"Your Data"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Export or delete your personal data"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,r.jsxs)("button",{onClick:()=>T(!0),className:"flex-1 px-4 py-3 border border-gray-200 dark:border-white/10 rounded-xl hover:bg-gray-50 dark:hover:bg-white/5 transition-colors flex items-center justify-center gap-2",children:[(0,r.jsx)(k.A,{className:"w-5 h-5"}),"Export My Data"]}),(0,r.jsxs)("button",{onClick:()=>V(!0),className:"flex-1 px-4 py-3 border border-red-200 dark:border-red-500/30 text-red-600 dark:text-red-400 rounded-xl hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors flex items-center justify-center gap-2",children:[(0,r.jsx)(w.A,{className:"w-5 h-5"}),"Delete My Account"]})]})]})]}),z&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",role:"dialog","aria-modal":"true","aria-labelledby":"export-modal-title",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-2xl max-w-md w-full p-6",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-brand-orange/10 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(k.A,{className:"w-8 h-8 text-brand-orange"})}),(0,r.jsx)("h2",{id:"export-modal-title",className:"text-xl font-bold text-center mb-2",children:"Export Your Data"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-6",children:"We'll compile all your data including your profile, ingredients, and meal history into a downloadable JSON file."}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>T(!1),className:"flex-1 px-4 py-2 border border-gray-200 dark:border-white/10 rounded-xl",children:"Cancel"}),(0,r.jsx)("button",{onClick:Z,disabled:I,className:"flex-1 px-4 py-2 bg-gradient-to-r from-brand-orange to-brand-teal text-white rounded-xl flex items-center justify-center gap-2",children:I?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.A,{className:"w-4 h-4 animate-spin"}),"Exporting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k.A,{className:"w-4 h-4"}),"Download"]})})]})]})}),O&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",role:"alertdialog","aria-modal":"true","aria-labelledby":"delete-modal-title","aria-describedby":"delete-modal-description",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-2xl max-w-md w-full p-6",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(x.A,{className:"w-8 h-8 text-red-500"})}),(0,r.jsx)("h2",{id:"delete-modal-title",className:"text-xl font-bold text-center mb-2",children:"Delete Your Account"}),(0,r.jsx)("p",{id:"delete-modal-description",className:"text-gray-500 dark:text-gray-400 text-center mb-4",children:"This action is permanent and cannot be undone. All your data including recipes, cooking history, and preferences will be permanently deleted."}),(0,r.jsxs)("div",{className:"bg-red-50 dark:bg-red-500/10 border border-red-200 dark:border-red-500/20 rounded-xl p-4 mb-4",children:[(0,r.jsxs)("p",{className:"text-sm text-red-700 dark:text-red-300",children:["To confirm, type ",(0,r.jsx)("strong",{children:"DELETE"})," below:"]}),(0,r.jsx)("input",{type:"text",value:L,onChange:e=>q(e.target.value),placeholder:"Type DELETE to confirm",className:"mt-2 w-full px-3 py-2 border border-red-200 dark:border-red-500/30 rounded-lg bg-white dark:bg-black/20 focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>{V(!1),q("")},className:"flex-1 px-4 py-2 border border-gray-200 dark:border-white/10 rounded-xl",children:"Cancel"}),(0,r.jsx)("button",{onClick:G,disabled:H||"DELETE"!==L,className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-xl disabled:opacity-50 flex items-center justify-center gap-2",children:H?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.A,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.A,{className:"w-4 h-4"}),"Delete Account"]})})]})]})})]})}},75686:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},83425:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(18889).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},88244:(e,a,t)=>{"use strict";t.d(a,{d:()=>x,t:()=>b});var r=t(55155),s=t(39156),l=t(62649),i=t(67649),d=t(75686),n=t(44746),o=t(21555);let c=(0,o.createContext)(void 0);function x(){let e=(0,o.useContext)(c);if(!e)throw Error("useToast must be used within a ToastProvider");return e}let h={success:s.A,error:l.A,warning:i.A,info:d.A},m={success:{bg:"bg-green-50 dark:bg-green-500/10",border:"border-green-200 dark:border-green-500/20",icon:"text-green-500",title:"text-green-800 dark:text-green-200",message:"text-green-700 dark:text-green-300"},error:{bg:"bg-red-50 dark:bg-red-500/10",border:"border-red-200 dark:border-red-500/20",icon:"text-red-500",title:"text-red-800 dark:text-red-200",message:"text-red-700 dark:text-red-300"},warning:{bg:"bg-yellow-50 dark:bg-yellow-500/10",border:"border-yellow-200 dark:border-yellow-500/20",icon:"text-yellow-500",title:"text-yellow-800 dark:text-yellow-200",message:"text-yellow-700 dark:text-yellow-300"},info:{bg:"bg-blue-50 dark:bg-blue-500/10",border:"border-blue-200 dark:border-blue-500/20",icon:"text-blue-500",title:"text-blue-800 dark:text-blue-200",message:"text-blue-700 dark:text-blue-300"}};function u({toast:e,onRemove:a}){let t=h[e.type],s=m[e.type];return(0,o.useEffect)(()=>{let t=e.duration??5e3;if(t>0){let e=setTimeout(a,t);return()=>clearTimeout(e)}},[e.duration,a]),(0,r.jsxs)("div",{className:`${s.bg} ${s.border} border rounded-xl p-4 shadow-lg backdrop-blur-sm animate-slide-in-right flex items-start gap-3 max-w-sm w-full`,role:"alert","aria-live":"polite",children:[(0,r.jsx)(t,{className:`w-5 h-5 ${s.icon} flex-shrink-0 mt-0.5`}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:`font-medium text-sm ${s.title}`,children:e.title}),e.message&&(0,r.jsx)("p",{className:`text-sm mt-1 ${s.message}`,children:e.message})]}),(0,r.jsx)("button",{onClick:a,className:"p-1 hover:bg-black/5 dark:hover:bg-white/10 rounded-lg transition-colors flex-shrink-0","aria-label":"Dismiss notification",children:(0,r.jsx)(n.A,{className:"w-4 h-4 text-gray-400"})})]})}function b({children:e}){let[a,t]=(0,o.useState)([]),s=(0,o.useCallback)(e=>{let a=Math.random().toString(36).substring(2,9);t(t=>[...t,{...e,id:a}])},[]),l=(0,o.useCallback)(e=>{t(a=>a.filter(a=>a.id!==e))},[]),i=(0,o.useCallback)((e,a)=>s({type:"success",title:e,message:a}),[s]),d=(0,o.useCallback)((e,a)=>s({type:"error",title:e,message:a}),[s]),n=(0,o.useCallback)((e,a)=>s({type:"warning",title:e,message:a}),[s]),x=(0,o.useCallback)((e,a)=>s({type:"info",title:e,message:a}),[s]);return(0,r.jsxs)(c.Provider,{value:{toasts:a,addToast:s,removeToast:l,success:i,error:d,warning:n,info:x},children:[e,(0,r.jsx)("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2 pointer-events-none",role:"region","aria-label":"Notifications","aria-live":"polite",children:a.map(e=>(0,r.jsx)("div",{className:"pointer-events-auto",children:(0,r.jsx)(u,{toast:e,onRemove:()=>l(e.id)})},e.id))})]})}}},e=>{e.O(0,[9731,9631,3948,5885,6939,1170,7358],()=>e(e.s=6885)),_N_E=e.O()}]);