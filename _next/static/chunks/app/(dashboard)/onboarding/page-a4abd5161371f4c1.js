(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5054],{31616:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var a=s(43696),l=s(33086);function i(...e){return(0,l.QP)((0,a.$)(e))}},33971:(e,t,s)=>{"use strict";s.d(t,{$:()=>c,r:()=>n});var a=s(55155),l=s(3456),i=s(47426),r=s(31616);let n=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-bold transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-2",{variants:{variant:{default:"bg-orange-500 text-white hover:bg-orange-600 shadow-md shadow-orange-200 dark:shadow-orange-900/20",destructive:"bg-red-500 text-white hover:bg-red-600 shadow-md shadow-red-200 dark:shadow-red-900/20",outline:"border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white hover:bg-slate-50 dark:hover:bg-slate-800 hover:border-slate-300 dark:hover:border-slate-600",secondary:"bg-slate-100 dark:bg-slate-800 text-slate-900 dark:text-white hover:bg-slate-200 dark:hover:bg-slate-700",ghost:"hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-900 dark:text-white",link:"text-orange-500 dark:text-orange-400 underline-offset-4 hover:underline"},size:{default:"h-11 px-5 py-2",sm:"h-9 rounded-lg px-3 text-xs",lg:"h-14 rounded-2xl px-8 text-base",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c({className:e,variant:t,size:s,asChild:i=!1,...c}){let o=i?l.DX:"button";return(0,a.jsx)(o,{"data-slot":"button",className:(0,r.cn)(n({variant:t,size:s,className:e})),...c})}},50794:(e,t,s)=>{Promise.resolve().then(s.bind(s,64867))},57809:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>n,Zp:()=>i,aR:()=>r});var a=s(55155),l=s(31616);function i({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,l.cn)("bg-white dark:bg-slate-900 text-slate-900 dark:text-white flex flex-col gap-6 rounded-2xl border border-slate-200 dark:border-slate-800 py-6 shadow-sm",e),...t})}function r({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,l.cn)("flex flex-col gap-1.5 px-6",e),...t})}function n({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,l.cn)("leading-none font-bold tracking-tight text-xl",e),...t})}function c({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,l.cn)("text-slate-600 dark:text-slate-400 text-sm",e),...t})}function o({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,l.cn)("px-6",e),...t})}},58915:(e,t,s)=>{"use strict";s.d(t,{k:()=>l});var a=s(55155);function l({size:e="md",text:t="AI is Thinking..."}){return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsxs)("div",{className:`relative ${{sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"}[e]}`,children:[(0,a.jsx)("div",{className:"absolute inset-0 border-4 border-orange-200 rounded-full"}),(0,a.jsx)("div",{className:"absolute inset-0 border-4 border-orange-500 rounded-full border-t-transparent animate-spin"})]}),t&&(0,a.jsx)("p",{className:"text-xs font-bold uppercase tracking-widest text-orange-500 animate-pulse",children:t})]})}},64867:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>H});var a=s(55155),l=s(50536),i=s(50497),r=s(15749),n=s(73675),c=s(57541),o=s(37100),d=s(30382),x=s(78562),m=s(44643),h=s(21555),p=s(33971),u=s(24290),g=s(83425),b=s(25699),f=s(13851),j=s(44746),N=s(80461),y=s(57809),v=s(58915),w=s(15885),k=s(22951),A=s(42757),C=s(45681),P=s(62649),S=s(5762),I=s(77187),$=s(11778),E=s(38268),R=s(64119),F=s(78304);function _({checked:e,onChange:t,disabled:s}){return(0,a.jsx)("button",{type:"button",onClick:()=>!s&&t(!e),disabled:s,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e?"bg-orange-500":"bg-slate-200"} ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:(0,a.jsx)("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e?"translate-x-6":"translate-x-1"}`})})}function L({icon:e,title:t,description:s,checked:l,onChange:i,disabled:r,badge:n}){return(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4 py-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:`p-2 rounded-xl ${l?"bg-orange-100":"bg-slate-100"}`,children:(0,a.jsx)(e,{className:`w-5 h-5 ${l?"text-orange-600":"text-slate-400"}`})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"font-medium",children:t}),n&&(0,a.jsx)("span",{className:"px-2 py-0.5 bg-slate-200 text-slate-600 text-[10px] font-bold rounded-full uppercase",children:n})]}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:s})]})]}),(0,a.jsx)(_,{checked:l,onChange:i,disabled:r})]})}function U({id:e,name:t,price:s,period:l,description:i,features:n,icon:c,popular:o,selected:d,onSelect:m}){return(0,a.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:m,className:`w-full text-left p-6 rounded-2xl border-2 transition-all ${d?"border-orange-500 bg-orange-50 shadow-lg shadow-orange-500/10":o?"border-teal-200 bg-teal-50/50":"border-slate-200 bg-white hover:border-slate-300"}`,children:[o&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("span",{className:"px-3 py-1 bg-teal-500 text-white text-xs font-bold rounded-full",children:"Most Popular"})}),(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:`p-2 rounded-xl ${d?"bg-orange-500 text-white":o?"bg-teal-100 text-teal-600":"bg-slate-100 text-slate-600"}`,children:(0,a.jsx)(c,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-lg",children:t}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:i})]})]}),(0,a.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${d?"border-orange-500 bg-orange-500":"border-slate-300"}`,children:d&&(0,a.jsx)(x.A,{className:"w-4 h-4 text-white"})})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("span",{className:"text-3xl font-black",children:s}),l&&(0,a.jsxs)("span",{className:"text-slate-500 text-sm",children:["/",l]})]}),(0,a.jsx)("ul",{className:"space-y-2",children:n.map((e,t)=>{let s="string"==typeof e,l=s?e:e.text,i=!s&&e.highlight,r=s?void 0:e.badge;return(0,a.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,a.jsx)(x.A,{className:`w-4 h-4 mt-0.5 shrink-0 ${d?"text-orange-500":"text-teal-500"}`}),(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:`${i?"font-semibold text-slate-900":"text-slate-600"}`,children:l}),r&&(0,a.jsx)("span",{className:"px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs rounded-full font-medium",children:r})]})]},t)})}),"free"!==e&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-dashed border-slate-200",children:(0,a.jsx)("p",{className:"text-xs text-slate-500 text-center",children:"Includes 7-day free trial • Cancel anytime"})})]})}let T=[{id:"free",name:"Free",price:"$0",period:"",description:"Try AI cooking assistance",icon:s(42937).A,features:["2 ingredient scans per day","1 AI recipe suggestion per day","7 days meal history","Standard safety alerts"]},{id:"basic",name:"Basic",price:"$30",period:"month",description:"Essential features for regular cooks",icon:c.A,features:["5 ingredient scans per day","5 AI recipe suggestions per day","Unlimited meal history","Basic recipe customization","Real-time AI coaching","Email support"]},{id:"pro",name:"Pro Chef",price:"$90",period:"month",description:"Full AI experience",icon:N.A,popular:!0,features:["25 ingredient scans per day","10 AI recipe suggestions per day",{text:"\uD83D\uDD11 Custom Gemini API key",highlight:!0,badge:"Save $$"},"Unlimited meal history","Advanced recipe customization","Real-time AI coaching",'Voice commands ("Hey Chef")',"Weekly meal planning","Priority support"]}];var M=s(58818),D=s(69811);function Y({checked:e,onChange:t}){return(0,a.jsx)("button",{type:"button",onClick:()=>t(!e),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e?"bg-orange-500":"bg-slate-200"}`,children:(0,a.jsx)("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e?"translate-x-6":"translate-x-1"}`})})}function Z({icon:e,iconColor:t,bgColor:s,title:l,description:i,checked:r,onChange:n,onLabel:c="On",offLabel:o="Off"}){return(0,a.jsx)("div",{className:"p-4 bg-white rounded-2xl border border-slate-200",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:`p-2 rounded-xl ${s}`,children:(0,a.jsx)(e,{className:`w-5 h-5 ${t}`})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:l}),(0,a.jsx)("p",{className:"text-sm text-slate-500 mt-0.5",children:i})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:`text-xs font-medium ${r?"text-orange-600":"text-slate-400"}`,children:r?c:o}),(0,a.jsx)(Y,{checked:r,onChange:n})]})]})})}var G=s(6949),O=s(48345),K=s(92599),z=s(75686);let V={antiPhishingCode:"",mfaMethod:null,displayName:"",username:"",avatarUrl:null,emailNotifications:{marketing:!1,recipes:!0,weeklyDigest:!0,security:!0},pushNotifications:{enabled:!0,cookingReminders:!0,achievements:!0},privacy:{profilePublic:!1,showInLeaderboard:!0,allowRecipeSharing:!0,analyticsEnabled:!0},selectedPlan:"free",geminiApiKey:void 0,usePersonalGeminiKey:!1},W=[{id:"welcome",title:"Welcome",component:function({data:e,updateData:t,userEmail:s}){let[l,i]=(0,h.useState)(!1);return(0,a.jsxs)("div",{className:"max-w-lg mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(r.P.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.1},className:"w-20 h-20 bg-gradient-to-br from-orange-500 to-teal-500 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(c.A,{className:"w-10 h-10 text-white"})}),(0,a.jsx)("h1",{className:"text-3xl font-black mb-2",children:"Welcome to AI Make Food!"}),(0,a.jsxs)("p",{className:"text-slate-600",children:["Let's set up your account, ",(0,a.jsx)("strong",{children:s})]})]}),(0,a.jsxs)(y.Zp,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-green-100 rounded-xl",children:(0,a.jsx)(k.A,{className:"w-6 h-6 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-bold text-lg mb-1",children:"Set Your Anti-Phishing Code"}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"This secret word or phrase will appear in all our emails to you, helping you verify they're really from us."})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:l?"text":"password",value:e.antiPhishingCode,onChange:e=>t({antiPhishingCode:e.target.value}),placeholder:"Enter a memorable word or phrase",className:"w-full px-4 py-3 pr-12 bg-slate-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500",maxLength:50}),(0,a.jsx)("button",{type:"button",onClick:()=>i(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-slate-400 hover:text-slate-600",children:l?(0,a.jsx)(b.A,{className:"w-5 h-5"}):(0,a.jsx)(f.A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-blue-50 rounded-xl",children:[(0,a.jsx)(z.A,{className:"w-4 h-4 text-blue-500 mt-0.5 shrink-0"}),(0,a.jsxs)("p",{className:"text-xs text-blue-700",children:[(0,a.jsx)("strong",{children:"Tips:"}),' Use something unique and memorable like "purple elephant dancing" or your pet\'s birthday. Avoid using passwords or sensitive information.']})]}),e.antiPhishingCode&&(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-green-50 border border-green-200 rounded-xl",children:[(0,a.jsxs)("p",{className:"text-sm text-green-700",children:[(0,a.jsx)("strong",{children:"Preview:"})," Your emails will show:"]}),(0,a.jsx)("div",{className:"mt-2 p-3 bg-white rounded-lg border border-green-200",children:(0,a.jsxs)("p",{className:"text-sm font-medium text-green-800",children:["Your anti-phishing code:"," ",(0,a.jsx)("span",{className:"font-mono",children:e.antiPhishingCode})]})})]})]})]}),(0,a.jsx)("p",{className:"text-center text-sm text-slate-500",children:"This step is optional but recommended. You can always set this later in Settings."})]})},skippable:!0},{id:"mfa",title:"Security",component:function({data:e,updateData:t,userEmail:s,onNext:i}){let[n,c]=(0,h.useState)(e.mfaMethod||null),[o,d]=(0,h.useState)("choose"),[m,p]=(0,h.useState)(!1),[u,g]=(0,h.useState)(null),[j,N]=(0,h.useState)(null),[v,E]=(0,h.useState)(!1),[R,F]=(0,h.useState)(["","","","","",""]),_=(0,h.useRef)([]),[L,U]=(0,h.useState)([]),[T,M]=(0,h.useState)(!1),[D,Y]=(0,h.useState)(!1),[Z,G]=(0,h.useState)(!1),[O,K]=(0,h.useState)(!1),z=e=>{c(e),g(null)},V=async()=>{if(n){p(!0),g(null);try{if("totp"===n){let{data:e,error:t}=await w.api.enrollMFA("Authenticator App");if(t)throw Error(t.message);e&&(N({factorId:e.id,qrCode:e.totp.qr_code,secret:e.totp.secret}),d("setup-totp"))}else d("setup-email")}catch(e){g(e instanceof Error?e.message:"Failed to start MFA setup")}finally{p(!1)}}},W=async()=>{K(!0),g(null);try{let e=await w.api.sendEmailOTP("mfa_setup");e.success?(G(!0),d("verify")):g(e.error||"Failed to send verification code")}catch(e){g(e instanceof Error?e.message:"Failed to send verification code")}finally{K(!1)}},q=async e=>{let s=e||R.join("");if(6!==s.length)return void g("Please enter a 6-digit code");p(!0),g(null);try{if("totp"===n&&j){let{data:e}=await w.api.challengeMFA(j.factorId);if(!e)throw Error("Failed to create challenge");let{error:t}=await w.api.verifyMFA(j.factorId,e.id,s);if(t)throw Error(t.message);let a=await w.api.generateRecoveryCodes();U(a),d("recovery-codes")}else if("email"===n){let e=await w.api.verifyEmailOTP(s,"mfa_setup");if(!e.valid)throw Error(e.error||"Invalid verification code");await w.api.setMFAMethod("email"),t({mfaMethod:"email"}),i()}}catch(e){g(e instanceof Error?e.message:"Verification failed"),F(["","","","","",""]),_.current[0]?.focus()}finally{p(!1)}},B=async()=>{if(!D&&L.length>0)return void g("Please save your recovery codes before continuing");p(!0);try{await w.api.setMFAMethod("totp"),t({mfaMethod:"totp"}),i()}catch(e){g(e instanceof Error?e.message:"Failed to complete setup")}finally{p(!1)}};return"choose"===o?(0,a.jsxs)("div",{className:"max-w-lg mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-100 to-teal-100 rounded-full mb-4",children:[(0,a.jsx)(k.A,{className:"w-4 h-4 text-orange-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-slate-700",children:"Required for Account Security"})]}),(0,a.jsx)("h1",{className:"text-3xl font-black mb-2",children:"Set Up Two-Factor Authentication"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Add an extra layer of security to your account. Choose your preferred method:"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>z("totp"),className:`w-full text-left p-6 rounded-2xl border-2 transition-all ${"totp"===n?"border-teal-500 bg-teal-50 shadow-lg shadow-teal-500/10":"border-slate-200 bg-white hover:border-slate-300"}`,children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:`p-3 rounded-xl ${"totp"===n?"bg-teal-500 text-white":"bg-slate-100 text-slate-600"}`,children:(0,a.jsx)(A.A,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h3",{className:"font-bold text-lg",children:"Authenticator App"}),(0,a.jsx)("span",{className:"px-2 py-0.5 bg-teal-500 text-white text-[10px] font-bold rounded-full",children:"RECOMMENDED"})]}),(0,a.jsx)("p",{className:"text-sm text-slate-500 mb-3",children:"Use an app like Google Authenticator, Authy, or 1Password to generate codes"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsxs)("li",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 text-teal-500"}),"Works offline"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 text-teal-500"}),"Most secure option"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 text-teal-500"}),"Codes refresh every 30 seconds"]})]})]}),(0,a.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${"totp"===n?"border-teal-500 bg-teal-500":"border-slate-300"}`,children:"totp"===n&&(0,a.jsx)(x.A,{className:"w-4 h-4 text-white"})})]})}),(0,a.jsx)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>z("email"),className:`w-full text-left p-6 rounded-2xl border-2 transition-all ${"email"===n?"border-orange-500 bg-orange-50 shadow-lg shadow-orange-500/10":"border-slate-200 bg-white hover:border-slate-300"}`,children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:`p-3 rounded-xl ${"email"===n?"bg-orange-500 text-white":"bg-slate-100 text-slate-600"}`,children:(0,a.jsx)(C.A,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-1",children:"Email Verification"}),(0,a.jsx)("p",{className:"text-sm text-slate-500 mb-3",children:"Receive a verification code via email each time you sign in"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsxs)("li",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 text-orange-500"}),"No app required"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 text-orange-500"}),"Codes sent to ",s]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 text-orange-500"}),"Easy to set up"]})]})]}),(0,a.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${"email"===n?"border-orange-500 bg-orange-500":"border-slate-300"}`,children:"email"===n&&(0,a.jsx)(x.A,{className:"w-4 h-4 text-white"})})]})})]}),u&&(0,a.jsx)(y.Zp,{className:"p-4 bg-red-50 border-red-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(P.A,{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5"}),(0,a.jsx)("p",{className:"text-sm text-red-700",children:u})]})}),(0,a.jsx)("button",{onClick:V,disabled:!n||m,className:"w-full py-4 bg-gradient-to-r from-orange-500 to-teal-500 text-white font-bold rounded-2xl hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.A,{className:"w-5 h-5 animate-spin"}),"Setting up..."]}):(0,a.jsxs)(a.Fragment,{children:["Continue with ","totp"===n?"Authenticator":"Email",(0,a.jsx)(S.A,{className:"w-5 h-5"})]})}),(0,a.jsx)(y.Zp,{className:"p-4 bg-blue-50 border-blue-200",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"Why is this required?"})," Two-factor authentication protects your account even if someone obtains your password. You can change your method later in settings."]})})]}):"setup-totp"===o&&j?(0,a.jsxs)("div",{className:"max-w-lg mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-black mb-2",children:"Set Up Authenticator"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Scan the QR code with your authenticator app"})]}),(0,a.jsxs)(y.Zp,{className:"p-6 flex flex-col items-center",children:[(0,a.jsx)("div",{className:"p-4 bg-white rounded-2xl shadow-inner mb-4",children:(0,a.jsx)("img",{src:j.qrCode,alt:"QR Code",className:"w-48 h-48"})}),(0,a.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:"Scan this QR code with Google Authenticator, Authy, or another TOTP app"}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("button",{onClick:()=>E(!v),className:"flex items-center gap-2 text-sm text-slate-600 hover:text-slate-900 mb-2",children:[v?(0,a.jsx)(b.A,{className:"w-4 h-4"}):(0,a.jsx)(f.A,{className:"w-4 h-4"}),v?"Hide":"Show"," manual entry code"]}),v&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-slate-100 rounded-xl",children:[(0,a.jsx)("code",{className:"flex-1 font-mono text-sm break-all",children:j.secret}),(0,a.jsx)("button",{onClick:()=>{j?.secret&&navigator.clipboard.writeText(j.secret)},className:"p-2 hover:bg-slate-200 rounded-lg transition-colors",children:(0,a.jsx)(I.A,{className:"w-4 h-4"})})]})]})]}),(0,a.jsxs)("button",{onClick:()=>d("verify"),className:"w-full py-4 bg-gradient-to-r from-orange-500 to-teal-500 text-white font-bold rounded-2xl hover:shadow-lg transition-all flex items-center justify-center gap-2",children:["I've scanned the code",(0,a.jsx)(S.A,{className:"w-5 h-5"})]})]}):"setup-email"===o?(0,a.jsxs)("div",{className:"max-w-lg mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-black mb-2",children:"Set Up Email Verification"}),(0,a.jsx)("p",{className:"text-slate-600",children:"We'll send a verification code to confirm your email"})]}),(0,a.jsxs)(y.Zp,{className:"p-6 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-orange-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(C.A,{className:"w-8 h-8 text-orange-600"})}),(0,a.jsx)("p",{className:"text-slate-600 mb-2",children:"Verification code will be sent to:"}),(0,a.jsx)("p",{className:"font-bold text-lg",children:s})]}),u&&(0,a.jsx)(y.Zp,{className:"p-4 bg-red-50 border-red-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(P.A,{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5"}),(0,a.jsx)("p",{className:"text-sm text-red-700",children:u})]})}),(0,a.jsx)("button",{onClick:W,disabled:O,className:"w-full py-4 bg-gradient-to-r from-orange-500 to-teal-500 text-white font-bold rounded-2xl hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:O?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.A,{className:"w-5 h-5 animate-spin"}),"Sending code..."]}):(0,a.jsxs)(a.Fragment,{children:["Send Verification Code",(0,a.jsx)(S.A,{className:"w-5 h-5"})]})})]}):"verify"===o?(0,a.jsxs)("div",{className:"max-w-lg mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-black mb-2",children:"Enter Verification Code"}),(0,a.jsx)("p",{className:"text-slate-600",children:"totp"===n?"Enter the 6-digit code from your authenticator app":"Enter the code we sent to your email"})]}),(0,a.jsx)("div",{className:"flex justify-center gap-2",onPaste:e=>{e.preventDefault();let t=e.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);6===t.length&&(F(t.split("")),q(t))},children:R.map((e,t)=>(0,a.jsx)("input",{ref:e=>{_.current[t]=e},type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:e=>((e,t)=>{if(!/^\d*$/.test(t))return;let s=[...R];s[e]=t.slice(-1),F(s),g(null),t&&e<5&&_.current[e+1]?.focus(),s.every(e=>""!==e)&&6===s.join("").length&&q(s.join(""))})(t,e.target.value),onKeyDown:e=>{"Backspace"===e.key&&!R[t]&&t>0&&_.current[t-1]?.focus()},className:"w-12 h-14 text-center text-2xl font-bold border-2 border-slate-200 rounded-xl focus:border-orange-500 focus:outline-none transition-colors"},t))}),u&&(0,a.jsx)(y.Zp,{className:"p-4 bg-red-50 border-red-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(P.A,{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5"}),(0,a.jsx)("p",{className:"text-sm text-red-700",children:u})]})}),(0,a.jsx)("button",{onClick:()=>q(),disabled:m||R.some(e=>""===e),className:"w-full py-4 bg-gradient-to-r from-orange-500 to-teal-500 text-white font-bold rounded-2xl hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.A,{className:"w-5 h-5 animate-spin"}),"Verifying..."]}):"Verify Code"}),"email"===n&&(0,a.jsx)("button",{onClick:W,disabled:O,className:"w-full py-2 text-orange-600 hover:text-orange-700 text-sm font-medium",children:O?"Sending...":"Resend code"})]}):"recovery-codes"===o?(0,a.jsxs)("div",{className:"max-w-lg mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(x.A,{className:"w-8 h-8 text-green-600"})}),(0,a.jsx)("h1",{className:"text-3xl font-black mb-2",children:"Save Your Recovery Codes"}),(0,a.jsx)("p",{className:"text-slate-600",children:"These codes can be used to access your account if you lose your authenticator"})]}),(0,a.jsxs)(y.Zp,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"font-bold",children:"Recovery Codes"}),(0,a.jsxs)("button",{onClick:()=>M(!T),className:"flex items-center gap-1 text-sm text-slate-600 hover:text-slate-900",children:[T?(0,a.jsx)(b.A,{className:"w-4 h-4"}):(0,a.jsx)(f.A,{className:"w-4 h-4"}),T?"Hide":"Show"]})]}),(0,a.jsx)("div",{className:`grid grid-cols-2 gap-2 mb-4 ${T?"":"blur-sm select-none"}`,children:L.map((e,t)=>(0,a.jsx)("div",{className:"font-mono text-sm p-2 bg-slate-100 rounded-lg text-center",children:e},t))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([`AI Make Food Recovery Codes
Generated: ${new Date().toISOString()}
Account: ${s}

IMPORTANT: Store these codes securely. Each code can only be used once.

${L.map((e,t)=>`${t+1}. ${e}`).join("\n")}

If you lose access to your authenticator app, use one of these codes to sign in.
`],{type:"text/plain"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="aimakefood-recovery-codes.txt",a.click(),URL.revokeObjectURL(t),Y(!0)},className:"flex-1 py-2 px-4 border-2 border-slate-200 rounded-xl text-sm font-medium flex items-center justify-center gap-2 hover:bg-slate-50",children:[(0,a.jsx)($.A,{className:"w-4 h-4"}),"Download"]}),(0,a.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(L.join("\n")),Y(!0)},className:"flex-1 py-2 px-4 border-2 border-slate-200 rounded-xl text-sm font-medium flex items-center justify-center gap-2 hover:bg-slate-50",children:[(0,a.jsx)(I.A,{className:"w-4 h-4"}),"Copy"]})]})]}),(0,a.jsx)(y.Zp,{className:"p-4 bg-amber-50 border-amber-200",children:(0,a.jsxs)("p",{className:"text-sm text-amber-800",children:[(0,a.jsx)("strong",{children:"Important:"})," Store these codes in a safe place. Each code can only be used once. You won't be able to see them again."]})}),u&&(0,a.jsx)(y.Zp,{className:"p-4 bg-red-50 border-red-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(P.A,{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5"}),(0,a.jsx)("p",{className:"text-sm text-red-700",children:u})]})}),(0,a.jsx)("button",{onClick:B,disabled:m,className:`w-full py-4 font-bold rounded-2xl transition-all flex items-center justify-center gap-2 ${D?"bg-gradient-to-r from-orange-500 to-teal-500 text-white hover:shadow-lg":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.A,{className:"w-5 h-5 animate-spin"}),"Completing setup..."]}):D?(0,a.jsxs)(a.Fragment,{children:["I've saved my codes - Continue",(0,a.jsx)(S.A,{className:"w-5 h-5"})]}):"Save your codes to continue"})]}):null},skippable:!1},{id:"profile",title:"Profile",component:function({data:e,updateData:t}){let s=(0,h.useRef)(null),[i,n]=(0,h.useState)("idle"),[c,o]=(0,h.useState)(null),d=(0,h.useCallback)(e=>{let s=e.target.files?.[0];if(!s||!s.type.startsWith("image/")||s.size>5242880)return;let a=new FileReader;a.onloadend=()=>{t({avatarUrl:a.result})},a.readAsDataURL(s)},[t]),m=(0,h.useCallback)(async e=>{if(!e){n("idle"),o(null);return}if(e.length<3){o("Username must be at least 3 characters"),n("idle");return}if(e.length>20){o("Username must be 20 characters or less"),n("idle");return}if(!/^[a-zA-Z0-9_]+$/.test(e)){o("Only letters, numbers, and underscores allowed"),n("idle");return}o(null),n("checking"),await new Promise(e=>setTimeout(e,500)),["admin","aimakefood","support","help"].includes(e.toLowerCase())?n("taken"):n("available")},[]);return(0,a.jsxs)("div",{className:"max-w-lg mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-black mb-2",children:"Create Your Profile"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Let other chefs know who you are"})]}),(0,a.jsxs)("div",{className:"flex justify-center",children:[(0,a.jsxs)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{s.current?.click()},className:"relative group",children:[(0,a.jsx)("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gradient-to-br from-orange-100 to-teal-100 border-4 border-white shadow-xl",children:e.avatarUrl?(0,a.jsx)("img",{src:e.avatarUrl,alt:"Profile",className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(G.A,{className:"w-16 h-16 text-slate-300"})})}),(0,a.jsx)("div",{className:"absolute inset-0 rounded-full bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,a.jsx)(O.A,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("div",{className:"absolute -bottom-1 -right-1 w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center border-4 border-white",children:(0,a.jsx)(O.A,{className:"w-4 h-4 text-white"})})]}),(0,a.jsx)("input",{ref:s,type:"file",accept:"image/*",onChange:d,className:"hidden"})]}),(0,a.jsxs)(y.Zp,{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Display Name"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(G.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,a.jsx)("input",{type:"text",value:e.displayName,onChange:e=>t({displayName:e.target.value}),placeholder:"Chef Gordon",className:"w-full pl-10 pr-4 py-3 bg-slate-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500",maxLength:50})]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"This is how your name will appear to others"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Username"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(K.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,a.jsx)("input",{type:"text",value:e.username,onChange:e=>{let s=e.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"");t({username:s}),m(s)},placeholder:"chef_gordon",className:`w-full pl-10 pr-12 py-3 bg-slate-100 rounded-xl focus:outline-none focus:ring-2 ${c?"ring-2 ring-red-500":"available"===i?"ring-2 ring-green-500":"focus:ring-orange-500"}`,maxLength:20}),(0,a.jsxs)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:["checking"===i&&(0,a.jsx)(l.A,{className:"w-5 h-5 text-slate-400 animate-spin"}),"available"===i&&(0,a.jsx)(x.A,{className:"w-5 h-5 text-green-500"}),"taken"===i&&(0,a.jsx)(j.A,{className:"w-5 h-5 text-red-500"})]})]}),c&&(0,a.jsx)("p",{className:"text-xs text-red-500 mt-1",children:c}),"taken"===i&&!c&&(0,a.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"This username is already taken"}),"available"===i&&(0,a.jsx)("p",{className:"text-xs text-green-500 mt-1",children:"Username is available!"}),"idle"===i&&!c&&(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Letters, numbers, and underscores only"})]})]}),(0,a.jsx)("p",{className:"text-center text-sm text-slate-500",children:"You can update your profile anytime in Settings"})]})},skippable:!0},{id:"api-key",title:"API Key",component:function({data:e,updateData:t,userProfile:s,onNavigateToPlans:l}){let[i,r]=(0,h.useState)(e.geminiApiKey||""),[n,o]=(0,h.useState)(!1),[d,m]=(0,h.useState)(!1),[k,A]=(0,h.useState)(null),C=s?.subscription_tier==="pro",P=async()=>{if(i.trim()){m(!0);try{let e=await w.api.validateGeminiKey(i);A(e?"valid":"invalid"),e&&t({geminiApiKey:i,usePersonalGeminiKey:!0})}catch(e){A("invalid")}finally{m(!1)}}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-brand-orange to-brand-teal text-white px-4 py-2 rounded-full text-sm font-medium mb-4",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{className:"w-4 h-4"}),"Pro Member"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{className:"w-4 h-4"}),"Pro Plan Exclusive"]})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Use Your Own Gemini API Key"}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400",children:"Save money and get unlimited access by using your personal Google Gemini API key"})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{icon:"\uD83D\uDCB0",title:"Save Money",desc:"Pay Google directly at lower rates"},{icon:"\uD83D\uDE80",title:"Unlimited Scans",desc:"No monthly limits on ingredient scanning"},{icon:"⚡",title:"No Rate Limits",desc:"Scan as fast as you want, anytime"},{icon:"\uD83C\uDFAF",title:"Priority Processing",desc:"Direct API access for faster results"}].map(e=>(0,a.jsxs)("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:e.icon}),(0,a.jsx)("div",{className:"font-semibold text-sm text-slate-900 dark:text-white mb-1",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:e.desc})]},e.title))}),(0,a.jsx)("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 divide-x divide-slate-200 dark:divide-slate-700",children:[(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 mb-2",children:"Platform API Key"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-1",children:"Limited"}),(0,a.jsxs)("ul",{className:"text-xs text-slate-600 dark:text-slate-400 space-y-1",children:[(0,a.jsx)("li",{children:"• 50 scans/month (Free)"}),(0,a.jsx)("li",{children:"• 500 scans/month (Pro)"}),(0,a.jsx)("li",{children:"• Rate limited"})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-950/30",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-2",children:"Your API Key"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300 mb-1",children:"Unlimited"}),(0,a.jsxs)("ul",{className:"text-xs text-green-600 dark:text-green-400 space-y-1",children:[(0,a.jsx)("li",{children:"• Unlimited scans"}),(0,a.jsx)("li",{children:"• Pay only Google costs"}),(0,a.jsx)("li",{children:"• No rate limits"})]})]})]})}),C?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Gemini API Key"}),(0,a.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)("input",{type:n?"text":"password",value:i,onChange:e=>r(e.target.value),placeholder:"AIza...",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900 text-slate-900 dark:text-white pr-10"}),(0,a.jsx)("button",{type:"button",onClick:()=>o(!n),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:n?(0,a.jsx)(b.A,{className:"w-4 h-4"}):(0,a.jsx)(f.A,{className:"w-4 h-4"})})]}),(0,a.jsx)(p.$,{onClick:P,disabled:!i.trim()||d,variant:"outline",children:d?(0,a.jsx)(v.k,{size:"sm"}):"Validate"})]})]}),k&&(0,a.jsx)("div",{className:`flex items-center gap-2 text-sm ${"valid"===k?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:"valid"===k?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{className:"w-4 h-4"}),"API key is valid!"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.A,{className:"w-4 h-4"}),"Invalid API key. Please check and try again."]})}),(0,a.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Don't have an API key?"," ",(0,a.jsx)("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-brand-teal hover:underline",children:"Get one free from Google AI Studio"})]})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"password",disabled:!0,placeholder:"Upgrade to Pro to unlock",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-400 cursor-not-allowed pr-10"}),(0,a.jsx)(g.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"})]}),(0,a.jsx)(y.Zp,{className:"p-4 bg-gradient-to-br from-orange-50 to-teal-50 dark:from-orange-950/20 dark:to-teal-950/20 border-2 border-brand-orange/20",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-brand-orange to-brand-teal rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(c.A,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-bold text-slate-900 dark:text-white mb-1",children:"Unlock with Pro Plan"}),(0,a.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Upgrade to Pro to use your own API key and save on scanning costs while enjoying unlimited usage."}),(0,a.jsxs)(p.$,{onClick:()=>l?.(),className:"bg-gradient-to-r from-brand-orange to-brand-teal text-white",children:[(0,a.jsx)(N.A,{className:"w-4 h-4 mr-2"}),"Upgrade to Pro"]})]})]})})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:C?"You can always set this up later in Settings":"Or continue with platform limits and upgrade anytime"})})]})},skippable:!0},{id:"notifications",title:"Notifications",component:function({data:e,updateData:t}){let s=(s,a)=>{t({emailNotifications:{...e.emailNotifications,[s]:a}})},l=(s,a)=>{t({pushNotifications:{...e.pushNotifications,[s]:a}})};return(0,a.jsxs)("div",{className:"max-w-lg mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-black mb-2",children:"Notification Preferences"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Choose how you'd like to stay updated"})]}),(0,a.jsxs)(y.Zp,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-xl",children:(0,a.jsx)(C.A,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-bold",children:"Email Notifications"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Sent to your inbox"})]})]}),(0,a.jsxs)("div",{className:"divide-y",children:[(0,a.jsx)(L,{icon:g.A,title:"Security Alerts",description:"Login attempts, password changes, and security updates",checked:e.emailNotifications.security,onChange:()=>{},disabled:!0,badge:"Required"}),(0,a.jsx)(L,{icon:d.A,title:"Recipe Suggestions",description:"Personalized recipes based on your ingredients",checked:e.emailNotifications.recipes,onChange:e=>s("recipes",e)}),(0,a.jsx)(L,{icon:E.A,title:"Weekly Digest",description:"Summary of your cooking achievements and new recipes",checked:e.emailNotifications.weeklyDigest,onChange:e=>s("weeklyDigest",e)}),(0,a.jsx)(L,{icon:C.A,title:"Marketing & Updates",description:"News, tips, and special offers from AI Make Food",checked:e.emailNotifications.marketing,onChange:e=>s("marketing",e)})]})]}),(0,a.jsxs)(y.Zp,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-xl",children:(0,a.jsx)(R.A,{className:"w-5 h-5 text-purple-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-bold",children:"Push Notifications"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"In-app and device alerts"})]})]}),(0,a.jsxs)("div",{className:"divide-y",children:[(0,a.jsx)(L,{icon:R.A,title:"Enable Push Notifications",description:"Allow notifications on your device",checked:e.pushNotifications.enabled,onChange:e=>l("enabled",e)}),e.pushNotifications.enabled&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L,{icon:d.A,title:"Cooking Reminders",description:"Timer alerts and cooking step notifications",checked:e.pushNotifications.cookingReminders,onChange:e=>l("cookingReminders",e)}),(0,a.jsx)(L,{icon:F.A,title:"Achievement Notifications",description:"XP gains, level ups, and badge unlocks",checked:e.pushNotifications.achievements,onChange:e=>l("achievements",e)})]})]})]}),(0,a.jsx)("p",{className:"text-center text-sm text-slate-500",children:"You can change these settings anytime in your account preferences"})]})},skippable:!0},{id:"privacy",title:"Privacy",component:function({data:e,updateData:t}){let s=(s,a)=>{t({privacy:{...e.privacy,[s]:a}})};return(0,a.jsxs)("div",{className:"max-w-lg mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-black mb-2",children:"Privacy Settings"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Control who can see your information"})]}),(0,a.jsx)(y.Zp,{className:"p-4 bg-gradient-to-r from-blue-50 to-teal-50 border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-xl",children:(0,a.jsx)(k.A,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-blue-900",children:"Your privacy matters"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"We never sell your data. These settings control what other users can see."})]})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(Z,{icon:e.privacy.profilePublic?f.A:b.A,iconColor:e.privacy.profilePublic?"text-teal-600":"text-slate-400",bgColor:e.privacy.profilePublic?"bg-teal-100":"bg-slate-100",title:"Public Profile",description:"Allow other users to view your profile and cooking history",checked:e.privacy.profilePublic,onChange:e=>s("profilePublic",e),onLabel:"Public",offLabel:"Private"}),(0,a.jsx)(Z,{icon:F.A,iconColor:e.privacy.showInLeaderboard?"text-yellow-600":"text-slate-400",bgColor:e.privacy.showInLeaderboard?"bg-yellow-100":"bg-slate-100",title:"Leaderboard Visibility",description:"Show your name and rank on the weekly leaderboard",checked:e.privacy.showInLeaderboard,onChange:e=>s("showInLeaderboard",e),onLabel:"Visible",offLabel:"Hidden"}),(0,a.jsx)(Z,{icon:M.A,iconColor:e.privacy.allowRecipeSharing?"text-purple-600":"text-slate-400",bgColor:e.privacy.allowRecipeSharing?"bg-purple-100":"bg-slate-100",title:"Recipe Sharing",description:"Allow your cooked recipes to appear in the community feed",checked:e.privacy.allowRecipeSharing,onChange:e=>s("allowRecipeSharing",e),onLabel:"Allowed",offLabel:"Disabled"}),(0,a.jsx)(Z,{icon:D.A,iconColor:e.privacy.analyticsEnabled?"text-orange-600":"text-slate-400",bgColor:e.privacy.analyticsEnabled?"bg-orange-100":"bg-slate-100",title:"Usage Analytics",description:"Help us improve by sharing anonymous usage data",checked:e.privacy.analyticsEnabled,onChange:e=>s("analyticsEnabled",e),onLabel:"Enabled",offLabel:"Disabled"})]}),(0,a.jsx)(y.Zp,{className:"p-4",children:(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:[(0,a.jsx)("strong",{children:"Summary:"})," Your profile is"," ",(0,a.jsx)("span",{className:e.privacy.profilePublic?"text-teal-600":"text-slate-900",children:e.privacy.profilePublic?"public":"private"}),e.privacy.showInLeaderboard&&", visible on leaderboards",e.privacy.allowRecipeSharing&&", sharing recipes",e.privacy.analyticsEnabled&&", helping improve the app","."]})}),(0,a.jsx)("p",{className:"text-center text-sm text-slate-500",children:"You can change these settings anytime in Settings → Privacy"})]})},skippable:!0},{id:"plan",title:"Choose Plan",component:function({data:e,updateData:t}){return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-100 to-teal-100 rounded-full mb-4",children:[(0,a.jsx)(c.A,{className:"w-4 h-4 text-orange-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-slate-700",children:"Special Welcome Offer"})]}),(0,a.jsx)("h1",{className:"text-3xl font-black mb-2",children:"Choose Your Plan"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Start with Free or unlock the full experience"})]}),(0,a.jsx)("div",{className:"space-y-4",children:T.map(s=>(0,a.jsx)(U,{...s,selected:e.selectedPlan===s.id,onSelect:()=>t({selectedPlan:s.id})},s.id))}),"free"===e.selectedPlan&&(0,a.jsx)(y.Zp,{className:"p-4 bg-slate-50 border-slate-200",children:(0,a.jsxs)("p",{className:"text-sm text-slate-600 text-center",children:[(0,a.jsx)("strong",{children:"No credit card required."})," You can always upgrade later from Settings."]})}),"free"!==e.selectedPlan&&(0,a.jsx)(y.Zp,{className:"p-4 bg-gradient-to-r from-orange-50 to-teal-50 border-orange-200",children:(0,a.jsxs)("p",{className:"text-sm text-orange-800 text-center",children:[(0,a.jsx)("strong",{children:"7-day free trial included!"})," You won't be charged until the trial ends."]})}),(0,a.jsxs)("p",{className:"text-center text-sm text-slate-500",children:["Not sure which plan is right for you?"," ",(0,a.jsx)("a",{href:"/pricing",className:"text-orange-500 hover:underline",children:"Compare all features"})]})]})},skippable:!0}];function q({userEmail:e,userProfile:t,onComplete:s,initialData:l}){let[i,u]=(0,h.useState)(0),[g,b]=(0,h.useState)({...V,...l}),[f,j]=(0,h.useState)(!1),[N,y]=(0,h.useState)(!1),v=(0,h.useCallback)(e=>{b(t=>({...t,...e}))},[]),w=(0,h.useCallback)(()=>{i<W.length-1&&u(e=>e+1)},[i]),k=(0,h.useCallback)(()=>{i>0&&u(e=>e-1)},[i]),A=(0,h.useCallback)(async()=>{j(!0);try{await s(g),y(!0)}catch(e){console.error("Failed to complete onboarding:",e)}finally{j(!1)}},[g,s]),C=(0,h.useCallback)(()=>{w()},[w]),P=(0,h.useCallback)(()=>{let e=W.findIndex(e=>"plan"===e.id);-1!==e&&u(e)},[]),S=W[i],I=S.component,$=i===W.length-1,E=S.skippable,R=(i+1)/W.length*100;return N?(0,a.jsx)(r.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-teal-50 p-4",children:(0,a.jsxs)("div",{className:"text-center max-w-md",children:[(0,a.jsx)(r.P.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"w-24 h-24 bg-gradient-to-br from-orange-500 to-teal-500 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(c.A,{className:"w-12 h-12 text-white"})}),(0,a.jsx)("h1",{className:"text-3xl font-black mb-4",children:"You're All Set!"}),(0,a.jsxs)("p",{className:"text-slate-600 mb-8",children:["Welcome to AI Make Food, ",g.displayName||"Chef","! Your kitchen awaits."]}),(0,a.jsxs)(p.$,{onClick:()=>{window.location.href="/"},className:"bg-gradient-to-r from-orange-500 to-teal-500",children:["Start Cooking",(0,a.jsx)(o.A,{className:"w-4 h-4 ml-2"})]})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[(0,a.jsxs)("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b",children:[(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-teal-500 rounded-xl flex items-center justify-center",children:(0,a.jsx)(d.A,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("span",{className:"font-bold text-xl",children:[(0,a.jsx)("span",{className:"text-orange-500",children:"AI"}),"MakeFood"]})]}),(0,a.jsxs)("div",{className:"text-sm text-slate-500",children:["Step ",i+1," of ",W.length]})]})}),(0,a.jsx)("div",{className:"h-1 bg-slate-200",children:(0,a.jsx)(r.P.div,{className:"h-full bg-gradient-to-r from-orange-500 to-teal-500",initial:{width:0},animate:{width:`${R}%`},transition:{duration:.3}})})]}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,a.jsx)("div",{className:"flex justify-center gap-2",children:W.map((e,t)=>(0,a.jsxs)("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium transition-colors ${t===i?"bg-orange-100 text-orange-700":t<i?"bg-teal-100 text-teal-700":"bg-slate-100 text-slate-400"}`,children:[t<i?(0,a.jsx)(x.A,{className:"w-3 h-3"}):(0,a.jsx)("span",{className:"w-4 h-4 rounded-full bg-current/20 flex items-center justify-center text-[10px]",children:t+1}),(0,a.jsx)("span",{className:"hidden sm:inline",children:e.title})]},e.id))})}),(0,a.jsx)("main",{className:"container mx-auto px-4 pb-32",children:(0,a.jsx)(n.N,{mode:"wait",children:(0,a.jsx)(r.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,a.jsx)(I,{data:g,updateData:v,userEmail:e,userProfile:t,onNext:w,onSkip:C,onNavigateToPlans:"api-key"===S.id?P:void 0})},i)})}),(0,a.jsx)("footer",{className:"fixed bottom-0 left-0 right-0 bg-white border-t p-4",children:(0,a.jsxs)("div",{className:"container mx-auto flex items-center justify-between gap-4",children:[(0,a.jsxs)(p.$,{variant:"ghost",onClick:k,disabled:0===i,className:"gap-2",children:[(0,a.jsx)(m.A,{className:"w-4 h-4"}),"Back"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[!$&&E&&(0,a.jsx)(p.$,{variant:"ghost",onClick:C,children:"Skip"}),$?(0,a.jsxs)(p.$,{onClick:A,disabled:f,className:"bg-gradient-to-r from-orange-500 to-teal-500 gap-2",children:[f?"Setting up...":"Complete Setup",(0,a.jsx)(x.A,{className:"w-4 h-4"})]}):(0,a.jsxs)(p.$,{onClick:w,className:"bg-gradient-to-r from-orange-500 to-teal-500 gap-2",children:["Continue",(0,a.jsx)(o.A,{className:"w-4 h-4"})]})]})]})})]})}var B=s(55036);function H(){let e=(0,i.useRouter)(),{isCompleted:t,isLoading:s,userEmail:r,userProfile:n,completeOnboarding:c}=function(e={}){let{redirectIfCompleted:t=!0,redirectPath:s="/"}=e,a=(0,i.useRouter)(),[l,r]=(0,h.useState)(null),[n,c]=(0,h.useState)(!0),[o,d]=(0,h.useState)(""),[x,m]=(0,h.useState)(null);return(0,h.useEffect)(()=>{(async()=>{try{let e=await w.api.getProfile(),l=e?.onboarding_completed??!1;r(l),m(e);let{data:i}=await w.api.getUser();d(i?.user?.email||""),t&&l&&a.replace(s)}catch(e){console.error("Failed to check onboarding status:",e),r(!1)}finally{c(!1)}})()},[t,s,a]),{isCompleted:l,isLoading:n,userEmail:o,userProfile:x,completeOnboarding:(0,h.useCallback)(async e=>{try{if(await w.api.updatePreferences({display_name:e.displayName,username:e.username,avatar_url:e.avatarUrl||void 0,anti_phishing_code:e.antiPhishingCode||void 0,email_notifications:e.emailNotifications,push_notifications:e.pushNotifications,privacy_settings:e.privacy,onboarding_completed:!0}),e.usePersonalGeminiKey&&e.geminiApiKey)try{await w.api.updateGeminiAPIKey({use_personal_key:!0,key:e.geminiApiKey})}catch(e){console.error("Failed to save Gemini API key:",e)}if("free"!==e.selectedPlan){let t="pro"===e.selectedPlan?B.env.NEXT_PUBLIC_STRIPE_PRO_PRICE_ID:B.env.NEXT_PUBLIC_STRIPE_FAMILY_PRICE_ID;if(t){let{url:e}=await w.api.createCheckoutSession(t);if(e){window.location.href=e;return}}}r(!0)}catch(e){throw console.error("Failed to complete onboarding:",e),e}},[]),skipOnboarding:(0,h.useCallback)(async()=>{try{await w.api.updatePreferences({onboarding_completed:!0}),r(!0),a.replace(s)}catch(e){console.error("Failed to skip onboarding:",e)}},[a,s])}}({redirectIfCompleted:!0,redirectPath:"/"});return s?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.A,{className:"w-8 h-8 animate-spin text-orange-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Loading..."})]})}):t?null:(0,a.jsx)(q,{userEmail:r,userProfile:n,onComplete:async t=>{await c(t),"free"===t.selectedPlan&&e.push("/")}})}}},e=>{e.O(0,[9731,9631,7139,5101,4587,5885,6939,1170,7358],()=>e(e.s=50794)),_N_E=e.O()}]);