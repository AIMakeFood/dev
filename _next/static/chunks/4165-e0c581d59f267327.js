"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4165],{2908:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(18889).A)("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]])},9667:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(18889).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},13309:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(18889).A)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]])},13851:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(18889).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},31616:(e,t,a)=>{a.d(t,{cn:()=>l});var s=a(43696),r=a(33086);function l(...e){return(0,r.QP)((0,s.$)(e))}},33474:(e,t,a)=>{a.d(t,{B:()=>l});var s=a(21555),r=a(62394);function l(e={}){let{maxHistory:t=60,sampleInterval:a=1e3}=e,n=(0,s.useRef)([]),i=(0,s.useRef)([]),c=(0,s.useRef)([]),d=(0,s.useRef)([]),o=(0,s.useRef)([]),u=(0,s.useRef)(0),h=(0,s.useRef)(0),x=(0,s.useRef)(0),m=(0,s.useRef)(0),[f,g]=(0,s.useState)([]),[p,b]=(0,s.useState)([]),[v,y]=(0,s.useState)([]),[w,k]=(0,s.useState)({ingredientFps:0,safetyFps:0,uploadRate:0,downloadRate:0,lastLatency:0,avgLatency:0,totalBytesSent:0,totalBytesReceived:0,ingredientFrameCount:0,safetyFrameCount:0,fpsHistory:[],bandwidthHistory:[],latencyHistory:[]}),j=(0,s.useCallback)(e=>{let t=Date.now();n.current.push(t),n.current.length>100&&n.current.shift(),c.current.push({size:e,timestamp:t}),c.current.length>50&&c.current.shift(),u.current+=e,x.current+=1,S()},[]),N=(0,s.useCallback)(e=>{let t=Date.now();i.current.push(t),i.current.length>100&&i.current.shift(),c.current.push({size:e,timestamp:t}),c.current.length>50&&c.current.shift(),u.current+=e,m.current+=1,S()},[]),A=(0,s.useCallback)((e,a)=>{let s=Date.now();d.current.push({size:e,timestamp:s}),d.current.length>50&&d.current.shift(),o.current.push(a),o.current.length>50&&o.current.shift(),h.current+=e,y(e=>[...e,{time:s,ms:a}].slice(-t)),S()},[t]),S=(0,s.useCallback)(()=>{let e=Date.now(),a=(0,r.qt)(n.current),s=(0,r.qt)(i.current),l=(0,r.JU)(c.current),y=(0,r.JU)(d.current),w=o.current[o.current.length-1]||0,j=(0,r._d)(o.current);g(r=>[...r,{time:e,ingredient:a,safety:s}].slice(-t)),b(a=>[...a,{time:e,up:l,down:y}].slice(-t)),k({ingredientFps:a,safetyFps:s,uploadRate:l,downloadRate:y,lastLatency:w,avgLatency:j,totalBytesSent:u.current,totalBytesReceived:h.current,ingredientFrameCount:x.current,safetyFrameCount:m.current,fpsHistory:f,bandwidthHistory:p,latencyHistory:v})},[t,f,p,v]),M=(0,s.useCallback)(()=>{n.current=[],i.current=[],c.current=[],d.current=[],o.current=[],u.current=0,h.current=0,x.current=0,m.current=0,g([]),b([]),y([]),k({ingredientFps:0,safetyFps:0,uploadRate:0,downloadRate:0,lastLatency:0,avgLatency:0,totalBytesSent:0,totalBytesReceived:0,ingredientFrameCount:0,safetyFrameCount:0,fpsHistory:[],bandwidthHistory:[],latencyHistory:[]})},[]);return{metrics:{...w,fpsHistory:f,bandwidthHistory:p,latencyHistory:v},recordIngredientFrame:j,recordSafetyFrame:N,recordApiResponse:A,reset:M}}},33971:(e,t,a)=>{a.d(t,{$:()=>c,r:()=>i});var s=a(55155),r=a(3456),l=a(47426),n=a(31616);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-bold transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-2",{variants:{variant:{default:"bg-orange-500 text-white hover:bg-orange-600 shadow-md shadow-orange-200 dark:shadow-orange-900/20",destructive:"bg-red-500 text-white hover:bg-red-600 shadow-md shadow-red-200 dark:shadow-red-900/20",outline:"border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white hover:bg-slate-50 dark:hover:bg-slate-800 hover:border-slate-300 dark:hover:border-slate-600",secondary:"bg-slate-100 dark:bg-slate-800 text-slate-900 dark:text-white hover:bg-slate-200 dark:hover:bg-slate-700",ghost:"hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-900 dark:text-white",link:"text-orange-500 dark:text-orange-400 underline-offset-4 hover:underline"},size:{default:"h-11 px-5 py-2",sm:"h-9 rounded-lg px-3 text-xs",lg:"h-14 rounded-2xl px-8 text-base",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c({className:e,variant:t,size:a,asChild:l=!1,...c}){let d=l?r.DX:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,n.cn)(i({variant:t,size:a,className:e})),...c})}},34633:(e,t,a)=>{a.d(t,{n:()=>h});var s=a(55155),r=a(13309),l=a(81065),n=a(95779),i=a(82833),c=a(21555),d=a(33971),o=a(62394),u=a(31616);function h({voiceStatus:e="off",lastCommand:t,lastCommandTime:a,isOutputPlaying:h=!1,onToggleMic:x,className:m}){let f=(0,c.useRef)(null),g=(0,c.useRef)(null),{data:p,isInitialized:b,initialize:v,getFrequencyBars:y,getWaveformPoints:w}=function(e={}){let{fftSize:t=256,smoothingTimeConstant:a=.8}=e,s=(0,c.useRef)(null),r=(0,c.useRef)(null),l=(0,c.useRef)(null),n=(0,c.useRef)(null),i=(0,c.useRef)(null),[d,o]=(0,c.useState)({frequencyData:new Uint8Array(t/2),timeDomainData:new Uint8Array(t/2),inputLevel:0,outputLevel:0,isMicActive:!1,isOutputActive:!1}),[u,h]=(0,c.useState)(null),[x,m]=(0,c.useState)(!1),f=(0,c.useCallback)(async()=>{try{let e=window.AudioContext||window.webkitAudioContext;if(!e)throw Error("Web Audio API not supported");s.current=new e;let i=s.current.createAnalyser();i.fftSize=t,i.smoothingTimeConstant=a,r.current=i;let c=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});l.current=c;let d=s.current.createMediaStreamSource(c);d.connect(i),n.current=d,m(!0),h(null),g()}catch(e){h(e instanceof Error?e.message:"Failed to initialize audio"),console.error("[AudioVisualization] Init error:",e)}},[t,a]),g=(0,c.useCallback)(()=>{let e=r.current;if(!e)return;let t=e.frequencyBinCount,a=new Uint8Array(t),s=new Uint8Array(t),l=()=>{e.getByteFrequencyData(a),e.getByteTimeDomainData(s);let r=0;for(let e=0;e<t;e++){let t=(s[e]-128)/128;r+=t*t}let n=Math.min(100,Math.round(200*Math.sqrt(r/t))),c=n>5;o(e=>({...e,frequencyData:new Uint8Array(a),timeDomainData:new Uint8Array(s),inputLevel:n,isMicActive:c})),i.current=requestAnimationFrame(l)};l()},[]),p=(0,c.useCallback)(()=>{i.current&&(cancelAnimationFrame(i.current),i.current=null)},[]),b=(0,c.useCallback)(()=>{p(),n.current&&(n.current.disconnect(),n.current=null),l.current&&(l.current.getTracks().forEach(e=>e.stop()),l.current=null),s.current&&(s.current.close(),s.current=null),r.current=null,m(!1)},[p]),v=(0,c.useCallback)(e=>{o(t=>({...t,outputLevel:Math.min(100,Math.max(0,e)),isOutputActive:e>5}))},[]);(0,c.useEffect)(()=>()=>{b()},[b]);let y=(0,c.useCallback)((e=32)=>{let{frequencyData:t}=d;if(!t||0===t.length)return Array(e).fill(0);let a=[],s=Math.floor(t.length/e);for(let r=0;r<e;r++){let e=r*s,l=e+s,n=0;for(let a=e;a<l&&a<t.length;a++)n+=t[a];a.push(n/s/255)}return a},[d]),w=(0,c.useCallback)((e=100)=>{let{timeDomainData:t}=d;if(!t||0===t.length)return Array(e).fill(0);let a=[],s=Math.floor(t.length/e);for(let r=0;r<e;r++){let e=r*s;e<t.length?a.push((t[e]-128)/128):a.push(0)}return a},[d]);return{data:d,error:u,isInitialized:x,initialize:f,cleanup:b,setOutputLevel:v,getFrequencyBars:y,getWaveformPoints:w}}(),[k,j]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{"off"===e||k||v().then(()=>j(!0))},[e,k,v]),(0,c.useEffect)(()=>{let t=f.current;if(!t||!b)return;let a=t.getContext("2d");if(!a)return;let s=()=>{let r=t.width,l=t.height;a.fillStyle="#0f172a",a.fillRect(0,0,r,l);let n=y(64),i=r/n.length,c="off"!==e&&p.inputLevel>5;n.forEach((t,s)=>{let r=t*l*.8;"awake"===e?a.fillStyle=`rgba(249, 115, 22, ${.5+.5*t})`:c?a.fillStyle=`rgba(34, 197, 94, ${.5+.5*t})`:a.fillStyle=`rgba(100, 116, 139, ${.3+.3*t})`,a.fillRect(s*i+1,l-r,i-2,r)});let d=w(100);a.beginPath(),a.strokeStyle="awake"===e?"#f97316":"#22c55e",a.lineWidth=2,d.forEach((e,t)=>{let s=t/d.length*r,n=l/2+e*l*.3;0===t?a.moveTo(s,n):a.lineTo(s,n)}),a.stroke(),g.current=requestAnimationFrame(s)};return s(),()=>{g.current&&cancelAnimationFrame(g.current)}},[b,e,p.inputLevel,y,w]),(0,s.jsxs)("div",{className:(0,u.cn)("bg-slate-100 dark:bg-slate-900 rounded-2xl overflow-hidden",m),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-200 dark:bg-slate-800",children:[(0,s.jsx)("span",{className:"font-medium text-slate-900 dark:text-white text-sm",children:"Audio Monitor"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)(d.$,{size:"sm",variant:"off"!==e?"default":"secondary",onClick:x,className:"h-7 text-xs gap-1",children:["off"!==e?(0,s.jsx)(r.A,{className:"w-3 h-3"}):(0,s.jsx)(l.A,{className:"w-3 h-3"}),"off"!==e?"On":"Off"]})})]}),(0,s.jsxs)("div",{className:"relative h-24 bg-slate-950",children:[(0,s.jsx)("canvas",{ref:f,width:400,height:96,className:"w-full h-full"}),(0,s.jsxs)("div",{className:"absolute top-2 left-3 flex items-center gap-2",children:[(0,s.jsx)("div",{className:(0,u.cn)("w-2.5 h-2.5 rounded-full","off"===e&&"bg-slate-500","listening"===e&&"bg-green-500 animate-pulse","awake"===e&&"bg-orange-500 animate-pulse","processing"===e&&"bg-blue-500 animate-pulse")}),(0,s.jsx)("span",{className:(0,u.cn)("text-xs font-medium",{off:"text-slate-500",listening:"text-green-500",awake:"text-orange-500",processing:"text-blue-500"}[e]),children:{off:"Voice Off",listening:"Listening...",awake:"AWAKE (Say command)",processing:"Processing..."}[e]})]}),(0,s.jsxs)("div",{className:"absolute top-2 right-3 flex items-center gap-2",children:[(0,s.jsx)(r.A,{className:"w-3 h-3 text-slate-500"}),(0,s.jsx)("div",{className:"w-16 h-1.5 bg-slate-800 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:(0,u.cn)("h-full rounded-full transition-all",p.inputLevel>80?"bg-red-500":p.inputLevel>50?"bg-yellow-500":"bg-green-500"),style:{width:`${p.inputLevel}%`}})}),(0,s.jsxs)("span",{className:"text-xs text-slate-500 w-8",children:[p.inputLevel,"%"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-200 dark:bg-slate-800 border-t border-slate-300 dark:border-slate-700",children:[(0,s.jsx)("div",{className:"flex-1 min-w-0",children:t?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Last:"}),(0,s.jsxs)("span",{className:"text-xs font-medium text-orange-600 dark:text-orange-400 truncate",children:['"',t,'"']}),a&&(0,s.jsxs)("span",{className:"text-xs text-slate-500",children:["(",(0,o.ak)(a),")"]})]}):(0,s.jsx)("span",{className:"text-xs text-slate-500",children:"No commands yet"})}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:h?(0,s.jsx)(n.A,{className:"w-4 h-4 text-green-500 animate-pulse"}):(0,s.jsx)(i.A,{className:"w-4 h-4 text-slate-500"})})]})]})}},48345:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(18889).A)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},54788:(e,t,a)=>{a.d(t,{Iq:()=>m});var s=a(55155),r=a(48345),l=a(13309),n=a(18889);let i=(0,n.A)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);var c=a(13851);let d=(0,n.A)("scan-line",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);var o=a(62649),u=a(31616);let h={active:"bg-green-500",idle:"bg-blue-500",warning:"bg-yellow-500",error:"bg-red-500",disabled:"bg-slate-400"},x={active:!0,idle:!1,warning:!0,error:!0,disabled:!1};function m({cameraPermission:e,micPermission:t,apiConnected:a,safetyEnabled:n,ingredientEnabled:m,className:f}){let g=[{label:"Camera",status:e?"active":"error",detail:e?"Granted":"Denied",icon:(0,s.jsx)(r.A,{className:"w-4 h-4"})},{label:"Microphone",status:t?"active":"error",detail:t?"Granted":"Denied",icon:(0,s.jsx)(l.A,{className:"w-4 h-4"})},{label:"API",status:a?"active":"error",detail:a?"Connected":"Disconnected",icon:(0,s.jsx)(i,{className:"w-4 h-4"})},{label:"Safety",status:n?"active":"disabled",detail:n?"Watching":"Off",icon:(0,s.jsx)(c.A,{className:"w-4 h-4"})},{label:"Scanner",status:m?"active":"disabled",detail:m?"Active":"Off",icon:(0,s.jsx)(d,{className:"w-4 h-4"})}],p=g.some(e=>"error"===e.status||"warning"===e.status);return(0,s.jsxs)("div",{className:(0,u.cn)("flex items-center gap-4",f),children:[p&&(0,s.jsx)(o.A,{className:"w-5 h-5 text-red-500 animate-pulse"}),g.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",title:`${e.label}: ${e.detail}`,children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:(0,u.cn)("w-2.5 h-2.5 rounded-full",h[e.status],x[e.status]&&"animate-pulse")})}),(0,s.jsx)("span",{className:"text-slate-600 dark:text-slate-400 hidden sm:inline",children:e.icon}),(0,s.jsx)("span",{className:"text-slate-700 dark:text-slate-300 hidden md:inline",children:e.label})]},e.label))]})}},62394:(e,t,a)=>{function s(e,t=1e3){if(e.length<2)return 0;let a=Date.now(),r=e.filter(e=>a-e<t);if(r.length<2)return 0;let l=r[r.length-1]-r[0];return 0===l?0:Math.round((r.length-1)/(l/1e3))}function r(e,t=1){if(0===e)return"0 B";let a=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,a)).toFixed(t))} ${["B","KB","MB","GB"][a]}`}function l(e){return`${r(e)}/s`}function n(e){let t=`${Math.round(e)}ms`;return e<100?{value:t,color:"text-green-500"}:e<300?{value:t,color:"text-yellow-500"}:e<500?{value:t,color:"text-orange-500"}:{value:t,color:"text-red-500"}}function i(e){let t=Math.floor((Date.now()-e)/1e3);return t<5?"just now":t<60?`${t}s ago`:t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:`${Math.floor(t/86400)}d ago`}function c(e){let t=new Date(e),a=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0"),r=t.getSeconds().toString().padStart(2,"0"),l=t.getMilliseconds().toString().padStart(3,"0");return`${a}:${s}:${r}.${l}`}function d(e){return 0===e.length?0:e.reduce((e,t)=>e+t,0)/e.length}function o(e,t=5e3){let a=Date.now(),s=e.filter(e=>a-e.timestamp<t);return 0===s.length?0:s.reduce((e,t)=>e+t.size,0)/(t/1e3)}function u(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}a.d(t,{Ey:()=>c,JU:()=>o,VG:()=>u,YL:()=>n,_d:()=>d,ak:()=>i,qt:()=>s,vV:()=>l,z3:()=>r})},66707:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(18889).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},67130:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(18889).A)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},77187:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(18889).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},77528:(e,t,a)=>{a.d(t,{P:()=>h});var s=a(55155),r=a(48345),l=a(13851),n=a(2908),i=a(21555),c=a(33971),d=a(93842),o=a(62394),u=a(31616);function h({type:e,enabled:t,onToggle:a,onFrameCapture:h,fps:x=0,dataRate:m=0,lastResult:f,className:g}){let[p,b]=(0,i.useState)("low"),[v,y]=(0,i.useState)(!1),[w,k]=(0,i.useState)(!1),[j,N]=(0,i.useState)(0),{videoRef:A,canvasRef:S,isActive:M,error:C,startCamera:z,stopCamera:R,captureFrame:D}=(0,d.V)({preset:p}),E=(0,i.useRef)(null);(0,i.useEffect)(()=>{t&&!M?z():!t&&M&&R()},[t,M,z,R]),(0,i.useEffect)(()=>{if(!t||!M){E.current&&(clearInterval(E.current),E.current=null);return}return E.current=setInterval(()=>{let e=D();if(e&&h){let t=Math.round(3*e.length/4),a=A.current,s={width:a?.videoWidth||d.p[p].width,height:a?.videoHeight||d.p[p].height};k(!0),N(e=>e+1),h(t,s),setTimeout(()=>k(!1),200)}},"ingredient"===e?3e3:2e3),()=>{E.current&&clearInterval(E.current)}},[t,M,e,D,h,p,A]),(0,i.useEffect)(()=>()=>{E.current&&clearInterval(E.current)},[]);let F="ingredient"===e?r.A:l.A;return(0,s.jsxs)("div",{className:(0,u.cn)("bg-slate-100 dark:bg-slate-900 rounded-2xl overflow-hidden",g),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-200 dark:bg-slate-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(F,{className:"w-4 h-4 text-slate-500 dark:text-slate-400"}),(0,s.jsx)("span",{className:"font-medium text-slate-900 dark:text-white text-sm",children:"ingredient"===e?"Ingredient Scanner":"Safety Scanner"})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("button",{onClick:()=>y(!v),className:"p-1.5 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-700 transition-colors",children:(0,s.jsx)(n.A,{className:"w-4 h-4 text-slate-500 dark:text-slate-400"})})})]}),(0,s.jsxs)("div",{className:"relative aspect-video bg-black",children:[(0,s.jsx)("video",{ref:A,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),(0,s.jsx)("canvas",{ref:S,className:"hidden"}),M&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"absolute top-3 left-3 flex items-center gap-2",children:[(0,s.jsx)("div",{className:(0,u.cn)("w-3 h-3 rounded-full",w?"bg-red-500 animate-pulse":"bg-green-500")}),(0,s.jsx)("span",{className:"text-xs font-medium text-white bg-black/50 px-2 py-1 rounded",children:w?"CAPTURING":t?"LIVE":"PAUSED"})]}),(0,s.jsx)("div",{className:"absolute top-3 right-3",children:(0,s.jsxs)("span",{className:"text-xs text-white bg-black/50 px-2 py-1 rounded",children:["#",j]})}),w&&(0,s.jsx)("div",{className:"absolute inset-0 bg-white/10 animate-pulse pointer-events-none"})]}),C&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80",children:(0,s.jsxs)("div",{className:"text-center text-white p-4",children:[(0,s.jsx)("p",{className:"text-red-400 text-sm",children:C}),(0,s.jsx)(c.$,{size:"sm",variant:"secondary",onClick:z,className:"mt-2",children:"Retry"})]})}),!M&&!C&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-200 dark:bg-slate-900",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(F,{className:"w-12 h-12 text-slate-400 dark:text-slate-600 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-slate-500 text-sm",children:"Camera inactive"})]})})]}),v&&(0,s.jsx)("div",{className:"p-3 bg-slate-200 dark:bg-slate-800 border-t border-slate-300 dark:border-slate-700",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("label",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Quality:"}),(0,s.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:"flex-1 text-xs px-2 py-1 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-white border border-slate-300 dark:border-transparent",children:[(0,s.jsx)("option",{value:"ultraLow",children:"Ultra Low (320x240)"}),(0,s.jsx)("option",{value:"low",children:"Low (480x360)"}),(0,s.jsx)("option",{value:"medium",children:"Medium (640x480)"}),(0,s.jsx)("option",{value:"high",children:"High (1280x720)"})]})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-200 dark:bg-slate-800 border-t border-slate-300 dark:border-slate-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs",children:[(0,s.jsxs)("span",{className:(0,u.cn)("flex items-center gap-1",x>0?"text-green-600 dark:text-green-400":"text-slate-500"),children:[x,"fps"]}),(0,s.jsx)("span",{className:(0,u.cn)(m>0?"text-blue-600 dark:text-blue-400":"text-slate-500"),children:(0,o.vV)(m)})]}),(0,s.jsx)(c.$,{size:"sm",variant:t?"default":"secondary",onClick:a,className:"text-xs h-7",children:t?"Disable":"Enable"})]}),f&&(0,s.jsx)("div",{className:"p-2 bg-slate-100 dark:bg-slate-900 border-t border-slate-200 dark:border-slate-800",children:(0,s.jsxs)("p",{className:"text-xs text-slate-600 dark:text-slate-400 truncate",children:["Last: ",f]})})]})}},78503:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(18889).A)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},81065:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(18889).A)("mic-off",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]])},81822:(e,t,a)=>{a.d(t,{f:()=>v});var s=a(55155),r=a(66707),l=a(78503),n=a(67130),i=a(33444),c=a(78663),d=a(73388),o=a(53190),u=a(14293),h=a(42410),x=a(57274),m=a(98743),f=a(63121),g=a(720),p=a(62394),b=a(31616);function v({fpsHistory:e,bandwidthHistory:t,latencyHistory:a,currentFps:v,currentBandwidth:k,currentLatency:j,totalBytes:N,className:A}){let S=e.slice(-30).map(e=>({time:(0,p.Ey)(e.time).slice(0,8),ingredient:e.ingredient,safety:e.safety})),M=t.slice(-30).map(e=>({time:(0,p.Ey)(e.time).slice(0,8),up:Math.round(e.up/1024),down:Math.round(e.down/1024)})),C=a.slice(-30).map(e=>({time:(0,p.Ey)(e.time).slice(0,8),ms:Math.round(e.ms)})),z=(0,p.YL)(j.last);return(0,s.jsxs)("div",{className:(0,b.cn)("space-y-4",A),children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,s.jsx)(y,{icon:(0,s.jsx)(r.A,{className:"w-4 h-4"}),label:"FPS (Ingredient)",value:`${v.ingredient}`,color:"text-orange-500"}),(0,s.jsx)(y,{icon:(0,s.jsx)(r.A,{className:"w-4 h-4"}),label:"FPS (Safety)",value:`${v.safety}`,color:"text-blue-500"}),(0,s.jsx)(y,{icon:(0,s.jsx)(l.A,{className:"w-4 h-4"}),label:"Upload",value:(0,p.vV)(k.up),subValue:`Total: ${(0,p.z3)(N.sent)}`,color:"text-green-500"}),(0,s.jsx)(y,{icon:(0,s.jsx)(n.A,{className:"w-4 h-4"}),label:"Download",value:(0,p.vV)(k.down),subValue:`Total: ${(0,p.z3)(N.received)}`,color:"text-purple-500"})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsx)(w,{title:"Frame Rate",icon:(0,s.jsx)(r.A,{className:"w-4 h-4"}),children:(0,s.jsx)(c.u,{width:"100%",height:120,children:(0,s.jsxs)(d.b,{data:S,children:[(0,s.jsx)(o.d,{strokeDasharray:"3 3",stroke:"#334155"}),(0,s.jsx)(u.W,{dataKey:"time",tick:!1,stroke:"#64748b"}),(0,s.jsx)(h.h,{domain:[0,60],tick:{fontSize:10},stroke:"#64748b"}),(0,s.jsx)(x.m,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"},labelStyle:{color:"#94a3b8"}}),(0,s.jsx)(m.N1,{type:"monotone",dataKey:"ingredient",stroke:"#f97316",strokeWidth:2,dot:!1,name:"Ingredient"}),(0,s.jsx)(m.N1,{type:"monotone",dataKey:"safety",stroke:"#3b82f6",strokeWidth:2,dot:!1,name:"Safety"})]})})}),(0,s.jsx)(w,{title:"Bandwidth (KB/s)",icon:(0,s.jsx)(l.A,{className:"w-4 h-4"}),children:(0,s.jsx)(c.u,{width:"100%",height:120,children:(0,s.jsxs)(f.Q,{data:M,children:[(0,s.jsx)(o.d,{strokeDasharray:"3 3",stroke:"#334155"}),(0,s.jsx)(u.W,{dataKey:"time",tick:!1,stroke:"#64748b"}),(0,s.jsx)(h.h,{tick:{fontSize:10},stroke:"#64748b"}),(0,s.jsx)(x.m,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"},labelStyle:{color:"#94a3b8"}}),(0,s.jsx)(g.Gk,{type:"monotone",dataKey:"up",stackId:"1",stroke:"#22c55e",fill:"#22c55e",fillOpacity:.3,name:"Upload"}),(0,s.jsx)(g.Gk,{type:"monotone",dataKey:"down",stackId:"2",stroke:"#a855f7",fill:"#a855f7",fillOpacity:.3,name:"Download"})]})})}),(0,s.jsx)(w,{title:"Latency",icon:(0,s.jsx)(i.A,{className:"w-4 h-4"}),value:z.value,valueColor:z.color,subValue:`Avg: ${Math.round(j.avg)}ms`,children:(0,s.jsx)(c.u,{width:"100%",height:120,children:(0,s.jsxs)(d.b,{data:C,children:[(0,s.jsx)(o.d,{strokeDasharray:"3 3",stroke:"#334155"}),(0,s.jsx)(u.W,{dataKey:"time",tick:!1,stroke:"#64748b"}),(0,s.jsx)(h.h,{tick:{fontSize:10},stroke:"#64748b"}),(0,s.jsx)(x.m,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"},labelStyle:{color:"#94a3b8"}}),(0,s.jsx)(m.N1,{type:"monotone",dataKey:"ms",stroke:"#eab308",strokeWidth:2,dot:!1,name:"Latency"})]})})})]})]})}function y({icon:e,label:t,value:a,subValue:r,color:l="text-slate-900 dark:text-white"}){return(0,s.jsxs)("div",{className:"bg-slate-200 dark:bg-slate-800 rounded-xl p-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400 mb-1",children:[e,(0,s.jsx)("span",{className:"text-xs",children:t})]}),(0,s.jsx)("div",{className:(0,b.cn)("text-xl font-bold",l),children:a}),r&&(0,s.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:r})]})}function w({title:e,icon:t,value:a,valueColor:r,subValue:l,children:n}){return(0,s.jsxs)("div",{className:"bg-slate-200 dark:bg-slate-800 rounded-xl p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[t,(0,s.jsx)("span",{className:"text-xs font-medium",children:e})]}),a&&(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("span",{className:(0,b.cn)("text-sm font-bold",r),children:a}),l&&(0,s.jsx)("span",{className:"text-xs text-slate-500 ml-2",children:l})]})]}),n]})}},82833:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(18889).A)("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]])},83518:(e,t,a)=>{a.d(t,{qj:()=>h,Zg:()=>m});var s=a(55155);let r=(0,a(18889).A)("file-braces",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);var l=a(33444),n=a(78562),i=a(77187),c=a(21555),d=a(33971),o=a(62394),u=a(31616);function h({selectedItem:e,className:t}){let[a,h]=(0,c.useState)(!1);if(!e)return(0,s.jsx)("div",{className:(0,u.cn)("bg-slate-200 dark:bg-slate-800 rounded-xl p-4",t),children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full min-h-[200px] text-slate-500",children:[(0,s.jsx)(r,{className:"w-12 h-12 mb-3 opacity-50"}),(0,s.jsx)("p",{className:"text-sm",children:"Select an item to view details"})]})});let m=e.latency?(0,o.YL)(e.latency):null,f=JSON.stringify(e.data,null,2);return(0,s.jsxs)("div",{className:(0,u.cn)("bg-slate-200 dark:bg-slate-800 rounded-xl overflow-hidden flex flex-col",t),children:[(0,s.jsx)("div",{className:"p-3 bg-slate-300/50 dark:bg-slate-700/50 border-b border-slate-300 dark:border-slate-700",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x,{type:e.type}),(0,s.jsx)("span",{className:"font-medium text-slate-900 dark:text-white text-sm truncate",children:e.title})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-xs text-slate-600 dark:text-slate-400",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(l.A,{className:"w-3 h-3"}),(0,o.Ey)(e.timestamp)]}),m&&(0,s.jsx)("span",{className:m.color,children:m.value}),e.size&&(0,s.jsx)("span",{children:(0,o.z3)(e.size)})]})]}),(0,s.jsx)(d.$,{size:"sm",variant:"ghost",onClick:()=>{if(!e)return;let t=JSON.stringify(e.data,null,2);navigator.clipboard.writeText(t),h(!0),setTimeout(()=>h(!1),2e3)},className:"h-7 text-xs gap-1",children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.A,{className:"w-3 h-3 text-green-500"}),"Copied"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.A,{className:"w-3 h-3"}),"Copy"]})})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-auto p-3 bg-slate-100 dark:bg-slate-900",children:(0,s.jsx)("pre",{className:"text-xs font-mono text-slate-700 dark:text-slate-300 whitespace-pre-wrap break-all",children:f})})]})}function x({type:e}){return(0,s.jsx)("span",{className:(0,u.cn)("px-2 py-0.5 rounded text-xs font-medium",{api:"bg-blue-500/20 text-blue-400",hazard:"bg-red-500/20 text-red-400",command:"bg-orange-500/20 text-orange-400",frame:"bg-green-500/20 text-green-400"}[e]),children:{api:"API",hazard:"Hazard",command:"Voice",frame:"Frame"}[e]})}function m({entries:e,selectedId:t,onSelect:a,className:r}){return 0===e.length?(0,s.jsx)("div",{className:"text-center py-8 text-slate-500 text-sm",children:"No entries yet"}):(0,s.jsx)("div",{className:(0,u.cn)("space-y-1",r),children:e.map(e=>(0,s.jsxs)("button",{onClick:()=>a(e),className:(0,u.cn)("w-full flex items-center gap-3 p-2 rounded-lg text-left transition-colors",t===e.id?"bg-slate-300 dark:bg-slate-700":"hover:bg-slate-200 dark:hover:bg-slate-800"),children:[(0,s.jsx)(x,{type:e.type}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"text-sm text-slate-900 dark:text-white truncate",children:e.title}),(0,s.jsx)("div",{className:"text-xs text-slate-500",children:(0,o.Ey)(e.timestamp).slice(0,8)})]}),e.latency&&(0,s.jsxs)("span",{className:(0,u.cn)("text-xs",(0,o.YL)(e.latency).color),children:[e.latency,"ms"]})]},e.id))})}},88200:(e,t,a)=>{a.d(t,{n:()=>i});var s=a(55155),r=a(792),l=a(21555),n=a(31616);function i({title:e,children:t,defaultOpen:a=!1,count:i,className:c}){let[d,o]=(0,l.useState)(a);return(0,s.jsxs)("div",{className:(0,n.cn)("border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden",c),children:[(0,s.jsx)("button",{onClick:()=>o(!d),className:"w-full flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(r.A,{className:(0,n.cn)("w-5 h-5 text-slate-500 transition-transform duration-200",d&&"rotate-180")}),(0,s.jsx)("span",{className:"font-medium text-slate-900 dark:text-white",children:e}),void 0!==i&&(0,s.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium bg-slate-200 dark:bg-slate-600 text-slate-600 dark:text-slate-300 rounded-full",children:i})]})}),(0,s.jsx)("div",{className:(0,n.cn)("overflow-hidden transition-all duration-200",d?"max-h-[2000px]":"max-h-0"),children:(0,s.jsx)("div",{className:"p-4 bg-white dark:bg-slate-900",children:t})})]})}},93842:(e,t,a)=>{a.d(t,{p:()=>n,V:()=>i});var s=a(21555);function r(){return"u">typeof navigator&&void 0!==navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia}function l(e){return"https:"===window.location.protocol||"localhost"===window.location.hostname||window.location.hostname.startsWith("127.")?r()?e instanceof Error?"NotAllowedError"===e.name||"PermissionDeniedError"===e.name?"Camera permission denied. Please allow camera access in your browser settings.":"NotFoundError"===e.name||"DevicesNotFoundError"===e.name?"No camera found on this device.":"NotReadableError"===e.name||"TrackStartError"===e.name?"Camera is already in use by another application.":"OverconstrainedError"===e.name||"ConstraintNotSatisfiedError"===e.name?"Camera does not meet the required specifications.":"TypeError"===e.name?"Camera access is not available. Please check your connection and browser settings.":e.message||"Failed to access camera":"Failed to access camera. Please check your browser permissions.":"Your browser does not support camera access. Please use a modern browser like Chrome, Safari, or Firefox.":"Camera access requires HTTPS. Please access the app via https:// instead of http://"}let n={ultraLow:{width:320,height:240,quality:.2},low:{width:480,height:360,quality:.3},medium:{width:640,height:480,quality:.5},high:{width:1280,height:720,quality:.7}};function i(e={}){let t=e.preset?n[e.preset]:null,{facingMode:a="environment",width:c=t?.width??480,height:d=t?.height??360,quality:o=t?.quality??.3}=e,u=(0,s.useRef)(null),h=(0,s.useRef)(null),x=(0,s.useRef)(null),[m,f]=(0,s.useState)(!1),[g,p]=(0,s.useState)(null),[b,v]=(0,s.useState)(null),y=(0,s.useCallback)(async()=>{try{if(p(null),!r()){let e=l();p(e),v(!1),console.error("Camera not supported:",e);return}let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:a,width:{ideal:c},height:{ideal:d}}});x.current=e,u.current&&(u.current.srcObject=e,await u.current.play()),f(!0),v(!0)}catch(e){p(l(e)),v(!1),console.error("Camera error:",e)}},[a,c,d]),w=(0,s.useCallback)(()=>{x.current&&(x.current.getTracks().forEach(e=>e.stop()),x.current=null),u.current&&(u.current.srcObject=null),f(!1)},[]),k=(0,s.useCallback)(()=>{if(!u.current||!h.current)return console.warn("[Camera] Video or canvas ref not available"),null;let e=u.current,t=h.current;if(e.readyState<2)return console.warn("[Camera] Video not ready (readyState:",e.readyState,")"),null;if(0===e.videoWidth||0===e.videoHeight)return console.warn("[Camera] Video has no dimensions yet"),null;let a=t.getContext("2d");if(!a)return console.warn("[Camera] Could not get canvas context"),null;t.width=e.videoWidth||c,t.height=e.videoHeight||d,a.drawImage(e,0,0,t.width,t.height);try{return t.toDataURL("image/webp",o)}catch{return t.toDataURL("image/jpeg",o)}},[c,d,o]),j=(0,s.useCallback)(async(e=3e3)=>x.current?new Promise(t=>{let a=new MediaRecorder(x.current,{mimeType:"video/webm;codecs=vp8",videoBitsPerSecond:25e4}),s=[];a.ondataavailable=e=>{e.data.size>0&&s.push(e.data)},a.onstop=async()=>{let e=new Blob(s,{type:"video/webm"}),a=new FileReader;a.onloadend=()=>{t(a.result)},a.onerror=()=>{console.error("[Camera] Failed to convert video to base64"),t(null)},a.readAsDataURL(e)},a.start(),setTimeout(()=>{"recording"===a.state&&a.stop()},e)}):(console.warn("[Camera] No active stream for video recording"),null),[]);return(0,s.useEffect)(()=>()=>{w()},[w]),{videoRef:u,canvasRef:h,isActive:m,error:g,hasPermission:b,startCamera:y,stopCamera:w,captureFrame:k,captureVideo:j}}},95779:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(18889).A)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])}}]);